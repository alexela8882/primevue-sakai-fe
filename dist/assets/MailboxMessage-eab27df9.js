import{C as b,_ as p,u as O,r as d,v as A,s as k,A as P,z,c as u,P as $,o as c,j as v,e,t as w,Q as N,i,m as x,f as l,w as g,p as U,F}from"./index-3f64a318.js";import{u as J}from"./index-38601a04.js";const Q={class:"w-full"},Y={key:0,class:"flex flex-column gap-4"},G={class:"flex justify-content-between"},H={class:"flex align-items-center gap-2"},K={class:"font-bold text-2xl"},W={key:0,class:"flex align-items-center gap-2"},X=e("span",{class:"text-xl"}," (Converted to inquiry)",-1),Z={class:"flex align-items-center gap-3"},ee={class:"m-0"},oe={class:"flex align-items-center text-2xl"},te={class:"mailbox-dialog-footer surface-50"},se={key:0,class:"flex align-items-center justify-content-end gap-2 p-2"},ne={__name:"MailboxMessage",props:{token:String,message:Object,inquiryModuleInfo:Object},setup(t){const h=t,C=b(()=>p(()=>import("./mailboxReply-2f43364b.js"),["assets/mailboxReply-2f43364b.js","assets/index-3f64a318.js","assets/index-d1288d3d.css","assets/index-38601a04.js"])),D=b(()=>p(()=>import("./ConvertMailboxMessage-06843a58.js"),["assets/ConvertMailboxMessage-06843a58.js","assets/index-3f64a318.js","assets/index-d1288d3d.css","assets/index.esm-26096367.js","assets/index-303deeca.js","assets/index-38601a04.js","assets/TwoColumnList-a73d6639.js"])),R=b(()=>p(()=>import("./MailboxMessageBody-465165d2.js"),["assets/MailboxMessageBody-465165d2.js","assets/index-3f64a318.js","assets/index-d1288d3d.css"])),q=O(),_=d(!1),r=d(!1),f=d(),S=d([{label:"Leads",name:"leads",command:s=>{m(s.item)}},{label:"Defect Reports",name:"defectreports",command:s=>{m(s.item)}},{label:"Breakdown Log",name:"breakdownlogs",command:s=>{m(s.item)}},{label:"Job Request",name:"servicejobs",command:s=>{m(s.item)}}]),T=J(),B=A(),{folderMessageReplyLoading:I}=k(T),{convertMailboxDialog:n}=k(B),j=async()=>{r.value=!0},m=s=>{console.log(h.message),n.value=!0,f.value=s};return P(()=>I.value,(s,o)=>{s||(r.value=!1)}),z(()=>{}),(s,o)=>{const E=u("font-awesome-icon"),V=u("SplitButton"),y=u("Dialog"),M=u("Skeleton"),L=$("tooltip");return c(),v(F,null,[e("div",Q,[t.message?(c(),v("div",Y,[e("div",G,[e("div",H,[e("span",K,w(t.message.subject),1),t.message.convertedToInquiry?(c(),v("span",W,[X,N(e("span",{onClick:o[0]||(o[0]=a=>i(q).push({name:"modules.pages.detail",params:{name:"inquiries",id:t.inquiryModuleInfo._id,pageid:t.message.inquiry_id}})),class:"pi pi-reply cursor-pointer font-bold text-primary"},null,512),[[L,{value:"view inquiry",pt:{arrow:{style:{borderBottomColor:"var(--primary-color)"}},text:"bg-primary font-medium"}},void 0,{bottom:!0}]])])):x("",!0)]),e("div",Z,[e("div",null,[l(E,{onClick:o[1]||(o[1]=a=>j()),icon:"fa-solid fa-reply",class:"cursor-pointer",style:{"font-size":"1.5rem",color:"var(--primary-300)"}})]),e("div",null,[l(V,{model:S.value,disabled:t.message.convertedToInquiry,label:"Convert",outlined:""},null,8,["model","disabled"])])])]),e("div",null,[l(i(R),{message:t.message},null,8,["message"])])])):x("",!0)]),l(y,{visible:r.value,"onUpdate:visible":o[2]||(o[2]=a=>r.value=a),maximizable:"",modal:"",header:"You are replying to a mail",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:g(()=>[e("p",ee,[l(i(C),{mail:t.message,token:t.token},null,8,["mail","token"])])]),_:1},8,["visible"]),l(y,{visible:i(n),"onUpdate:visible":o[5]||(o[5]=a=>U(n)?n.value=a:null),modal:"",maximizable:"",style:{width:"60vw"},class:"convert-mailbox-dialog"},{header:g(()=>[e("div",oe,[e("div",null,"Convert to Inquiry — "+w(f.value.label),1)])]),footer:g(()=>[e("div",te,[_.value?(c(),v("div",se,[l(M,{width:"5rem",height:"2rem"}),l(M,{width:"5rem",height:"2rem"})])):x("",!0)])]),default:g(()=>[l(i(D),{token:t.token,mailboxMessage:t.message,convertModule:f.value,onTriggerDialog:o[3]||(o[3]=a=>n.value=!1),onUpdateTimeout:o[4]||(o[4]=a=>_.value=!1)},null,8,["token","mailboxMessage","convertModule"])]),_:1},8,["visible"])],64)}}};export{ne as default};
