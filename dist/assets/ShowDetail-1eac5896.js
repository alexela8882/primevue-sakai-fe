import{_ as Ze,c as b,o as t,j as l,f as i,M as et,a as Le,O as tt,B as Se,s as j,r,v as ee,N as st,u as lt,K as at,a4 as ot,G as it,E as nt,e,F as v,k as h,n as dt,t as m,i as n,m as _,g as ke,w as c,d as y,S as z,I as F,J as I,a5 as ct}from"./index-b43f83a8.js";import{R as rt}from"./RdBreadCrumbs-6673c528.js";import{D as ut}from"./DataTableLoader-be4446ff.js";import{T as xe}from"./TwoColumnList-515f013f.js";import{u as mt}from"./index-d3eb398d.js";const _t={};function pt(J,O){const x=b("Skeleton");return t(),l("div",null,[i(x,{class:"mb-2",borderRadius:"16px"}),i(x,{width:"10rem",class:"mb-2",borderRadius:"16px"}),i(x,{width:"5rem",borderRadius:"16px",class:"mb-2"}),i(x,{height:"2rem",class:"mb-2",borderRadius:"16px"}),i(x,{width:"10rem",height:"4rem",borderRadius:"16px"})])}const we=Ze(_t,[["render",pt]]),vt=et("moduleFileStore",()=>{Le();const J=tt(),O=Se();j(J),j(O);const x=r(!1),R=r(!1),P=r(!1),B=r([]),G=r([{categoryValue:0,items:[{id:1,label:"Test 1",date:"Jan 23, 2023",size:"55kb",type:"jpg",selected:!1},{id:2,label:"Test 2",date:"Aug 01, 2023",size:"45kb",type:"jpg",selected:!1},{id:3,label:"Test 3",date:"Nov 23, 2023",size:"100kb",type:"jpg",selected:!1},{id:4,label:"Test 4",date:"Sept 23, 2023",size:"1mb",type:"png",selected:!1},{id:5,label:"Test 5",date:"Jan 06, 2023",size:"2.3mb",type:"jpg",selected:!1},{id:6,label:"Test 6",date:"March 24, 2023",size:"50kb",type:"jpeg",selected:!1},{id:7,label:"Test 7",date:"Nov 23, 2023",size:"1kb",type:"jpeg",selected:!1},{id:8,label:"Test 8",date:"Nov 23, 2023",size:"0kb",type:"png",selected:!1},{id:9,label:"Test 9",date:"Nov 23, 2023",size:"90kb",type:"png",selected:!1},{id:10,label:"Test 10",date:"Nov 23, 2023",size:"1.1mb",type:"jpg",selected:!1},{id:11,label:"Test 11",date:"Nov 23, 2023",size:"1.1mb",type:"jpg",selected:!1},{id:12,label:"Test 12",date:"Dec 23, 2023",size:"1.1mb",type:"jpg",selected:!1}]},{categoryValue:2,items:[{label:"Test 1",date:"Nov 23, 2023",size:"55kb",file_type:"jpg"}]}]),$=r({}),E=ee(()=>B.value),V=ee(()=>G.value),Q=ee(()=>$.value);return{fileLoading:x,fileDialog:R,fileDialogSwitch:P,getModuleFiles:E,getFiles:V,getFile:Q,addModuleFiles:async p=>{p.map(U=>B.value.push(U))}}});const ft={key:0,class:"flex align-items-center justify-content-center",style:{height:"60vh !important"}},gt={key:1},ht={style:{position:"sticky !important",top:"72px","z-index":"2 !important"},class:"bg-white px-5 py-3 mb-5 border-round-xl flex align-items-center justify-content-between shadow-2"},yt={class:"flex"},bt={key:0,class:"flex flex-column text-md mr-4"},kt={key:0},xt={class:"flex"},wt={class:"font-semibold text-md"},Lt={key:1},St={class:"font-semibold text-md"},Nt={key:0,class:"flex flex-column text-md mx-4"},Tt={key:0,class:"font-semibold text-md"},Dt=["href"],Mt=["href"],Ft={class:"grid"},It={class:"col-7"},jt={class:"p-3 bg-white border-round-xl shadow-2"},Rt={class:"flex flex-column gap-3"},Et={key:0},Ct={class:"text-2xl font-bold"},zt={key:0},Ot=e("div",{class:"material-icons cursor-pointer"},"playlist_add",-1),Pt=[Ot],Bt={class:"flex flex-column px-3 mt-4"},$t={key:0},Vt={key:0},At=["id"],Ut=["onClick"],qt=e("i",{class:"pi pi-eye"},null,-1),Wt={key:1},Jt={key:1},Gt={class:"my-4"},Qt={class:"my-4"},Ht={key:0},Kt=e("div",{class:"mt-4 text-600"},"No records found",-1),Xt=[Kt],Yt={class:"my-4"},Zt={class:"col-5"},es={style:{position:"sticky !important",top:"145px !important",height:"75vh !important"},class:"flex flex-column gap-4 overflow-scroll p-1"},ts={class:"bg-white border-round-xl shadow-2"},ss={class:"p-3"},ls={class:"flex align-items-center justify-content-between"},as=e("div",{class:"text-xl font-bold text-primary"},"Activity",-1),os={class:"flex align-items-center gap-4"},is={class:"flex flex-column gap-1 mb-6"},ns={class:"text-sm text-900"},ds={key:0},cs={class:"text-sm text-900 ml-2"},rs=e("p",{class:"m-0 mt-3"}," Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. ",-1),us={class:"bg-white border-round-xl shadow-2"},ms={class:"p-3"},_s={class:"flex justify-content-between align-items-center text-xl font-bold text-primary"},ps=e("div",null,"Files",-1),vs={class:"mt-5 flex flex-column gap-2 text-700"},fs=e("div",{class:"text-lg font-bold"},"Upload files",-1),gs=e("div",{class:""},"only .jpg and .png files. 5 MB max file size.",-1),hs={key:0},ys={key:0},bs={class:"border-round border-1 border-orange-300 p-2 flex align-items-center justify-content-between"},ks={class:"flex align-items-center gap-3"},xs={href:"javascript: void(0);"},ws={class:"text-700"},Ls=e("div",{class:"text-orange-500"},"Pending",-1),Ss=["onClick"],Ns={class:"border-round border-1 border-300 p-2 flex align-items-center justify-content-between"},Ts={class:"flex align-items-center gap-3"},Ds={href:"javascript: void(0);"},Ms={class:"text-700"},Fs=["onClick"],Is=e("div",{class:"bg-white border-round-xl shadow-2"},[e("div",{class:"p-3 h-15rem"},[e("div",{class:"text-xl font-bold text-primary"},"Reminders")])],-1),js={__name:"ShowDetail",setup(J){const O=F(()=>I(()=>import("./MailboxThreads-285a4683.js"),["assets/MailboxThreads-285a4683.js","assets/index-b43f83a8.js","assets/index-40ff91a8.css","assets/ShowInquiryDetail-d2b44956.css"])),x=F(()=>I(()=>import("./DynamicDataTableMain-5d1502b3.js"),["assets/DynamicDataTableMain-5d1502b3.js","assets/index-b43f83a8.js","assets/index-40ff91a8.css","assets/Validate-c6556af2.js","assets/DynamicDataTableMain-5df8962c.css"])),R=F(()=>I(()=>import("./RelatedListPanel-ea606870.js"),["assets/RelatedListPanel-ea606870.js","assets/index-b43f83a8.js","assets/index-40ff91a8.css","assets/RelatedListPanel-70fb7b80.css"])),P=F(()=>I(()=>import("./SectionFields-ff5d2daa.js"),["assets/SectionFields-ff5d2daa.js","assets/index-b43f83a8.js","assets/index-40ff91a8.css","assets/index-d3eb398d.js"])),B=F(()=>I(()=>import("./UploadFileContent-ab1fd7e5.js"),["assets/UploadFileContent-ab1fd7e5.js","assets/index-b43f83a8.js","assets/index-40ff91a8.css","assets/RdBreadCrumbs-6673c528.js","assets/RdBreadCrumbs-d49d3125.css","assets/DataTableLoader-be4446ff.js","assets/TwoColumnList-515f013f.js","assets/index-d3eb398d.js","assets/UploadFileContent-bb5410c6.css"])),G=F(()=>I(()=>import("./QuotePDFPreview-c8b35382.js").then(o=>o.Q),["assets/QuotePDFPreview-c8b35382.js","assets/index-b43f83a8.js","assets/index-40ff91a8.css","assets/index-d3eb398d.js","assets/QuotePDFPreview-c8962474.css"])),$=r(),E=r(null),V=r(),Q=Le(),A=r(0),p=st();lt();const U=r(!0),w=r(),S=r(),te=r();r();const se=r(),le=r(),ae=r([]),oe=r([]),H=r([]),ie=new ct,ne=Se(),de=mt(),ce=vt(),re=at(),{fetchModule:Ne,fetchLinkedModuleData:Te,fetchBaseModule:De}=ne,{getModule:K,getLinkedModuleData:Me,getBaseModule:ue,getFieldDetailsById:Rs}=j(ne),{itemLoading:Fe,relatedListLoading:Es,getItem:Cs,_relatedLists:zs,getRelatedLists:me,_getRelatedOrderedLists:X,getRelatedListsByCname:L,_getItemPanels:Ie,getItemPanels:je,getItemValueByName:N}=j(de),{fetchItem:Re,fetchItemRelatedList:Ee,fetchItemRelatedLists:Ce}=de,{fileLoading:Os,fileDialogSwitch:ze,fileDialog:_e,getFiles:Y,getModuleFiles:q}=j(ce),{addModuleFiles:Oe}=ce,{addTab:pe,toggleWindows:Pe}=re,{getTabs:Z}=j(re),{transformLookupDisplay:W,checkFieldIfMultipleSelect:Be}=ot(),$e=r([{label:`${p.params.name}`,to:`/modules/${p.params.name}/${p.params.id}`},{label:`${p.params.name} details`,to:null}]),Ve=r([{label:"Options",items:[{label:"Add files",icon:"pi pi-plus",command:()=>{ze.value=!0,_e.value=!0,console.log(_e.value)}}]}]),Ae=r([{label:"Select",items:[{label:"Task",icon:"pi pi-calendar",command:async()=>{let o=Object.assign({},{});await ie.getTaskForm().then(d=>o=d);const a=Object.assign({},{icon:"pi pi-calendar",type:"task",form:o});ve(a)}},{label:"Event",icon:"pi pi-book",command:async()=>{let o=Object.assign({},{});await ie.getEventForm().then(d=>o=d);const a=Object.assign({},{icon:"pi pi-book",type:"event",form:o});ve(a)}}]}]),ve=o=>{let a=Object.assign({},{type:"static-form",style:"window",name:`${o.type}-window-sform`,label:`New ${o.type} (${w.value.label})`,icon:o.icon,form:{data:o.form,be_nec:{method:"POST",uri:"/activity-logs"},prevalue:{log_type:o.type,module_id:w.value._id,link_id:p.params.pageid}},expanded:!0,opened:!1,opened_order:null});Z.value.findIndex(k=>k.name===a.name)===-1&&pe(a,!0)},Ue=o=>{A.value=o.index},fe=async o=>{const a={moduleName:p.params.name,panelName:o.panelName};await Ee(a)},qe=o=>{if(o){const a=o.getBoundingClientRect();return a.top>=0&&a.left>=0&&a.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&a.right<=(window.innerWidth||document.documentElement.clientWidth)}},ge=()=>{Ie.value(K.value.panels).map(a=>{const d=document.getElementById(`rl-panel-${a._id}`);qe(d)&&(console.log(`Element with ${a._id} id is visible`),fe(a))})},We=async o=>{const a=o.files,d=[],k=Y.value.length>0?Y.value[Y.value.length-1]:0;a.map(D=>{let T=Object.assign({},{id:k+1,label:D.name,date:Date.now(),size:D.size,type:D.type,selected:!1});d.push(T)}),Oe(d),Q.add({severity:"info",summary:"Success",detail:"File Uploaded",life:3e3})},Je=o=>{console.log(o)},Ge=o=>{const a=q.value.findIndex(d=>d.id===o.id);q.value.splice(a,1)},Qe=o=>{let a=Object.assign({},{type:"module-form",style:"window",name:`${o.name}-${p.params.pageid}-window-edit-form`,label:`${o.label} Form`,_module:o.name,expanded:!0,opened:!1,opened_order:null});const d=Z.value.findIndex(k=>k.name===a.name);d===-1?pe(a,!0):Pe(Z.value[d])};return it(me,(o,a)=>{o&&(se.value=o)}),nt(async()=>{await De(p.params.id),await Ne({moduleName:p.params.name});const o={module:"inquiries",link_field:"link_id",link_id:p.params.pageid};await Te(o),await Re(p.params);const a=Object.assign({},{id:p.params.id,name:p.params.name,pageid:p.params.pageid,moduleName:p.params.name,base:p.params.pageid,relatedLists:K.value.relatedLists});await Ce(a),U.value=Fe.value,w.value=ue.value,S.value=K.value,te.value=je.value(null),se.value=me.value,le.value=te.value.filter(d=>d.controllerMethod.includes("@index")),ae.value=X.value.filter(d=>d.entityName==="Contact"||d.entityName==="Unit"),oe.value=X.value.filter(d=>d.entityName==="SalesOpportunity"||d.entityName==="SalesOpportunity"),H.value=X.value.filter(d=>d.entityName==="DefectReport"||d.entityName==="ServiceJob"||d.entityName==="ServiceSchedule"||d.entityName==="BreakdownLog"||d.entityName==="ServiceReport"),E.value=Me.value,window.addEventListener("scroll",ge),ge()}),(o,a)=>{const d=b("ProgressSpinner"),k=b("Button"),D=b("Panel"),T=b("TabPanel"),He=b("TabView"),Ke=b("Dropdown"),he=b("Menu"),ye=b("font-awesome-icon"),be=b("Image"),Xe=b("FileUpload");return t(),l("div",null,[i(rt,{bcrumbs:$e.value},null,8,["bcrumbs"]),U.value?(t(),l("div",ft,[i(d)])):(t(),l("div",gt,[e("div",ht,[e("div",yt,[(t(!0),l(v,null,h(S.value.fields,(s,u)=>(t(),l("div",{key:u},[e("div",{class:dt(`${S.value.fields.length===u+1&&"mr-8"}`)},[s.title?(t(),l("div",bt,[s.groupWith?(t(),l("div",kt,[e("div",null,m(s.groupLabel),1),e("div",xt,[(t(!0),l(v,null,h(s.groupWith,(f,C)=>(t(),l("div",{key:C},[e("div",wt,m(n(N)(f))+m(s.fieldGlue===" "?" ":s.fieldGlue),1)]))),128))])])):(t(),l("div",Lt,[e("div",null,m(s.label),1),e("div",St,m(n(N)(s.name)),1)]))])):_("",!0)],2)]))),128)),(t(!0),l(v,null,h(S.value.fields,(s,u)=>(t(),l("div",{key:u},[s.header?(t(),l("div",Nt,[e("div",null,m(s.label),1),n(N)(s.name)?(t(),l("div",Tt,[s.field_type.name=="lookupModel"?(t(),l(v,{key:0},[n(Be)(s.rules)?(t(!0),l(v,{key:0},h(n(N)(s.name),f=>(t(),l("a",{key:f._id,href:n(W)(f,s).link,target:"_blank"},m(n(W)(f,s).label),9,Dt))),128)):(t(),l("a",{key:1,href:n(W)(n(N)(s.name),s).link,target:"_blank"},m(n(W)(n(N)(s.name),s).label),9,Mt))],64)):(t(),l(v,{key:1},[ke(m(n(N)(s.name)),1)],64))])):_("",!0)])):_("",!0)]))),128))]),e("div",null,[i(k,{label:"Edit",size:"large",onClick:a[0]||(a[0]=s=>Qe(n(ue))),class:"px-6 border-round-xl"})])]),e("div",Ft,[e("div",It,[e("div",jt,[i(He,{onTabChange:Ue},{default:c(()=>[i(T,{header:"Details"},{default:c(()=>[e("div",null,[e("div",Rt,[(t(!0),l(v,null,h(le.value,(s,u)=>(t(),l("div",{key:u,class:"flex flex-column gap-1"},[(t(!0),l(v,null,h(s.sections,(f,C)=>(t(),l("div",{key:C,class:"shadow-1 mt-4"},[i(D,{class:"detail-page-panel"},{header:c(()=>[f.sectionLabel?(t(),l("div",Et,[e("div",Ct,m(f.sectionLabel),1),n(L)(s.panelName)?(t(),l("div",zt,Pt)):_("",!0)])):_("",!0)]),default:c(()=>[e("div",Bt,[s.controllerMethod.indexOf("@show")>-1?(t(),l("div",$t,[n(L)(s.panelName)?(t(),l("div",Vt,[n(L)(s.panelName)?(t(),y(z,{key:0},{fallback:c(()=>[i(ut)]),default:c(()=>[(t(),y(n(x),{key:s._id,moduleId:s._id,moduleEntityName:s.entityName,moduleName:n(L)(s.panelName).link,moduleLabel:n(L)(s.panelName).label,fields:n(L)(s.panelName).fields.data,data:n(L)(s.panelName).collection.data,pagination:n(L)(s.panelName).collection.meta,collectionLoading:!1},null,8,["moduleId","moduleEntityName","moduleName","moduleLabel","fields","data","pagination"]))]),_:2},1024)):_("",!0)])):(t(),l("div",{key:1,id:`rl-panel-${s._id}`},[e("div",{onClick:g=>fe(s),class:"flex align-items-center gap-2 cursor-pointer text-700"},[qt,ke(" View data ")],8,Ut)],8,At))])):(t(),l("div",Wt,[f.field_ids&&f.field_ids.length>0?(t(),y(z,{key:0},{fallback:c(()=>[i(xe)]),default:c(()=>[i(n(P),{newModuleFields:S.value.fields,fieldIds:f.field_ids},null,8,["newModuleFields","fieldIds"])]),_:2},1024)):_("",!0),f.additional_fields.length>0?(t(),l("div",Jt,[(t(!0),l(v,null,h(f.additional_fields,(g,M)=>(t(),l("div",{key:M},[g.ids&&g.ids.length>0?(t(),y(z,{key:0},{fallback:c(()=>[i(xe)]),default:c(()=>[i(n(P),{newModuleFields:S.value.fields,fieldIds:g.ids},null,8,["newModuleFields","fieldIds"])]),_:2},1024)):_("",!0)]))),128))])):_("",!0)]))])]),_:2},1024)]))),128))]))),128)),(t(!0),l(v,null,h(ae.value,(s,u)=>(t(),l("div",{key:u},[e("div",Gt,[(t(),y(n(R),{key:u,relatedList:s},null,8,["relatedList"]))])]))),128))])])]),_:1}),w.value&&w.value.name==="accounts"?(t(),y(T,{key:0,header:"Sales"},{default:c(()=>[e("div",null,[A.value===1?(t(),y(z,{key:0},{fallback:c(()=>[i(we,{class:"mt-4"})]),default:c(()=>[(t(!0),l(v,null,h(oe.value,(s,u)=>(t(),l("div",{key:u},[e("div",Qt,[(t(),y(n(R),{key:u,relatedList:s},null,8,["relatedList"]))])]))),128))]),_:1})):_("",!0)])]),_:1})):_("",!0),w.value&&w.value.name==="accounts"?(t(),y(T,{key:1,header:"Services"},{default:c(()=>[e("div",null,[H.value.length<=0?(t(),l("div",Ht,Xt)):_("",!0),A.value===2?(t(),y(z,{key:1},{fallback:c(()=>[i(we,{class:"mt-4"})]),default:c(()=>[(t(!0),l(v,null,h(H.value,(s,u)=>(t(),l("div",{key:u},[e("div",Yt,[(t(),y(n(R),{key:u,relatedList:s},null,8,["relatedList"]))])]))),128))]),_:1})):_("",!0)])]),_:1})):_("",!0),E.value?(t(),y(T,{key:2,header:"Email"},{default:c(()=>[e("div",null,[i(n(O),{threads:E.value.conversations.slice().reverse()},null,8,["threads"])])]),_:1})):_("",!0),w.value&&w.value.name==="salesquotes"?(t(),y(T,{key:3,header:"Quote PDF"},{default:c(()=>[i(n(G))]),_:1})):_("",!0)]),_:1})])]),e("div",Zt,[e("div",es,[e("div",ts,[e("div",ss,[e("div",ls,[as,e("div",os,[i(Ke,{placeholder:"Filters",class:"border-round-xl border-primary w-full md:w-12rem"}),e("div",null,[i(k,{icon:"pi pi-plus",text:"",rounded:"",onClick:a[1]||(a[1]=s=>$.value.toggle(s)),"aria-haspopup":"true","aria-controls":"overlay_menu_activity"}),i(he,{ref_key:"activity_menu",ref:$,id:"overlay_menu_activity",model:Ae.value,popup:!0},null,8,["model"])])])])]),e("div",is,[(t(),l(v,null,h(["October 2023","November 2023","December 2023"],(s,u)=>i(D,{key:u,toggleable:"",collapsed:"",class:"activity-panel"},{header:c(()=>[e("div",ns,[u===0?(t(),l("span",ds,"This months")):_("",!0)])]),togglericon:c(()=>[i(ye,{icon:"fa-solid fa-caret-down",style:{"font-size":"1.5rem"}})]),icons:c(()=>[e("div",cs,m(s),1)]),default:c(()=>[rs]),_:2},1024)),64))])]),e("div",us,[e("div",ms,[e("div",_s,[ps,e("div",null,[e("div",{onClick:a[2]||(a[2]=s=>V.value.toggle(s)),class:"cursor-pointer"},[i(ye,{icon:"fa-regular fa-square-caret-down",style:{"font-size":"1.5rem"}})]),i(he,{ref_key:"fileMenu",ref:V,id:"overlay_menu",model:Ve.value,popup:!0},null,8,["model"])])]),e("div",vs,[fs,gs,e("div",null,[i(Xe,{name:"demo[]",url:"/api/upload",customUpload:"",onUploader:a[3]||(a[3]=s=>We(s)),onError:a[4]||(a[4]=s=>Je(s)),multiple:!0,accept:"image/*",maxFileSize:5e6},{empty:c(()=>[n(q).length<=0?(t(),l("p",hs,"Drag and drop files to here to upload.")):_("",!0)]),content:c(({files:s,uploadedFiles:u,removeUploadedFileCallback:f,removeFileCallback:C})=>[s.length>0?(t(),l("div",ys,[(t(!0),l(v,null,h(s,(g,M)=>(t(),l("div",{key:M,class:"mb-2"},[e("div",bs,[e("div",ks,[i(be,{src:"/demo/images/galleria/galleria6s.jpg",alt:"dummy-img",width:"50",class:"cursor-pointer"}),e("div",null,[e("a",xs,m(g.name),1),e("div",ws,m(Date.now())+" • "+m(g.size)+" • "+m(g.type),1),Ls])]),e("div",{onClick:Ye=>C(M),class:"cursor-pointer mr-2"},[i(k,{icon:"pi pi-times",severity:"danger",text:"",rounded:"","aria-label":"Cancel"})],8,Ss)])]))),128))])):_("",!0),(t(!0),l(v,null,h(n(q),(g,M)=>(t(),l("div",{key:M,class:"mb-2"},[e("div",Ns,[e("div",Ts,[i(be,{src:"/demo/images/galleria/galleria6s.jpg",alt:"dummy-img",width:"50",class:"cursor-pointer"}),e("div",null,[e("a",Ds,m(g.label),1),e("div",Ms,m(g.date)+" • "+m(g.size)+" • "+m(g.type),1)])]),e("div",{onClick:Ye=>Ge(g),class:"cursor-pointer mr-2"},[i(k,{icon:"pi pi-times",severity:"danger",text:"",rounded:"","aria-label":"Cancel"})],8,Fs)])]))),128))]),_:1})])])])]),Is])])])])),i(n(B),{module:S.value},null,8,["module"])])}}},Us=Object.freeze(Object.defineProperty({__proto__:null,default:js},Symbol.toStringTag,{value:"Module"}));export{Us as S,vt as u};
