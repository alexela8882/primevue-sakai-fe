import{I as b,J as p,u as O,r as d,B as A,s as k,G as P,E as $,c as u,V as z,o as c,j as v,e,t as w,W as N,i,m as x,f as l,w as g,p as U,F}from"./index-2f40471b.js";import{u as J}from"./index-b582f0ea.js";const G={class:"w-full"},W={key:0,class:"flex flex-column gap-4"},Y={class:"flex justify-content-between"},H={class:"flex align-items-center gap-2"},K={class:"font-bold text-2xl"},Q={key:0,class:"flex align-items-center gap-2"},X=e("span",{class:"text-xl"}," (Converted to inquiry)",-1),Z={class:"flex align-items-center gap-3"},ee={class:"m-0"},oe={class:"flex align-items-center text-2xl"},te={class:"mailbox-dialog-footer surface-50"},se={key:0,class:"flex align-items-center justify-content-end gap-2 p-2"},ne={__name:"MailboxMessage",props:{token:String,message:Object,inquiryModuleInfo:Object},setup(t){const h=t,D=b(()=>p(()=>import("./mailboxReply-3bff7c42.js"),["assets/mailboxReply-3bff7c42.js","assets/index-2f40471b.js","assets/index-d5e7f8f7.css","assets/index-b582f0ea.js","assets/Editor-8de1aada.js"])),R=b(()=>p(()=>import("./ConvertMailboxMessage-c1a64d77.js"),["assets/ConvertMailboxMessage-c1a64d77.js","assets/index-2f40471b.js","assets/index-d5e7f8f7.css","assets/index.esm-c3e8228d.js","assets/index-82b5396b.js","assets/index-b582f0ea.js","assets/TwoColumnList-b72f8f4f.js"])),C=b(()=>p(()=>import("./MailboxMessageBody-336a75ca.js"),["assets/MailboxMessageBody-336a75ca.js","assets/index-2f40471b.js","assets/index-d5e7f8f7.css"])),q=O(),_=d(!1),r=d(!1),f=d(),B=d([{label:"Leads",name:"leads",command:s=>{m(s.item)}},{label:"Defect Reports",name:"defectreports",command:s=>{m(s.item)}},{label:"Breakdown Log",name:"breakdownlogs",command:s=>{m(s.item)}},{label:"Job Request",name:"servicejobs",command:s=>{m(s.item)}}]),S=J(),T=A(),{folderMessageReplyLoading:I}=k(S),{convertMailboxDialog:n}=k(T),E=async()=>{r.value=!0},m=s=>{console.log(h.message),n.value=!0,f.value=s};return P(()=>I.value,(s,o)=>{s||(r.value=!1)}),$(()=>{}),(s,o)=>{const V=u("font-awesome-icon"),j=u("SplitButton"),y=u("Dialog"),M=u("Skeleton"),L=z("tooltip");return c(),v(F,null,[e("div",G,[t.message?(c(),v("div",W,[e("div",Y,[e("div",H,[e("span",K,w(t.message.subject),1),t.message.convertedToInquiry?(c(),v("span",Q,[X,N(e("span",{onClick:o[0]||(o[0]=a=>i(q).push({name:"modules.pages.detail",params:{name:"inquiries",id:t.inquiryModuleInfo._id,pageid:t.message.inquiry_id}})),class:"pi pi-reply cursor-pointer font-bold text-primary"},null,512),[[L,{value:"view inquiry",pt:{arrow:{style:{borderBottomColor:"var(--primary-color)"}},text:"bg-primary font-medium"}},void 0,{bottom:!0}]])])):x("",!0)]),e("div",Z,[e("div",null,[l(V,{onClick:o[1]||(o[1]=a=>E()),icon:"fa-solid fa-reply",class:"cursor-pointer",style:{"font-size":"1.5rem",color:"var(--primary-300)"}})]),e("div",null,[l(j,{model:B.value,disabled:t.message.convertedToInquiry,label:"Convert",outlined:""},null,8,["model","disabled"])])])]),e("div",null,[l(i(C),{message:t.message},null,8,["message"])])])):x("",!0)]),l(y,{visible:r.value,"onUpdate:visible":o[2]||(o[2]=a=>r.value=a),maximizable:"",modal:"",header:"You are replying to a mail",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:g(()=>[e("p",ee,[l(i(D),{mail:t.message,token:t.token},null,8,["mail","token"])])]),_:1},8,["visible"]),l(y,{visible:i(n),"onUpdate:visible":o[5]||(o[5]=a=>U(n)?n.value=a:null),modal:"",maximizable:"",style:{width:"60vw"},class:"convert-mailbox-dialog"},{header:g(()=>[e("div",oe,[e("div",null,"Convert to Inquiry — "+w(f.value.label),1)])]),footer:g(()=>[e("div",te,[_.value?(c(),v("div",se,[l(M,{width:"5rem",height:"2rem"}),l(M,{width:"5rem",height:"2rem"})])):x("",!0)])]),default:g(()=>[l(i(R),{token:t.token,mailboxMessage:t.message,convertModule:f.value,onTriggerDialog:o[3]||(o[3]=a=>n.value=!1),onUpdateTimeout:o[4]||(o[4]=a=>_.value=!1)},null,8,["token","mailboxMessage","convertModule"])]),_:1},8,["visible"])],64)}}};export{ne as default};
