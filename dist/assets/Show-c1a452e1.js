import{_ as be,c as v,o as m,j as g,f as e,e as a,I as D,J as T,r as u,N as ge,B as fe,K as he,a3 as we,U as ye,s as P,G as xe,E as Se,i as l,t as b,w as s,d as w,S as E,m as z,F as ke}from"./index-2e9b86cc.js";import{L as U}from"./ListViewLoader-3dad2989.js";import{D as Ve}from"./DataTableLoader-33b0d144.js";const Fe={},Le={class:"flex gap-2"},De={class:"flex flex-column gap-2 w-full"},Te={class:"flex flex-column gap-2 w-full"},Ee={class:"flex flex-column gap-2 w-full"},Ie={class:"flex flex-column gap-2 w-full"},Me={class:"flex flex-column gap-2 w-full"};function Ne(W,$){const n=v("Skeleton");return m(),g("div",null,[e(n,{height:"3rem",class:"mb-2"}),a("div",Le,[a("div",De,[e(n,{height:"10rem"}),e(n,{height:"10rem"}),e(n,{height:"10rem"})]),a("div",Te,[e(n,{height:"10rem"})]),a("div",Ee,[e(n,{height:"10rem"}),e(n,{height:"10rem"})]),a("div",Ie,[e(n,{height:"10rem"}),e(n,{height:"10rem"}),e(n,{height:"10rem"}),e(n,{height:"10rem"})]),a("div",Me,[e(n,{height:"10rem"}),e(n,{height:"10rem"})])])])}const $e=be(Fe,[["render",Ne]]),Ce={class:"mt-3"},Be={key:0,class:"flex align-items-center justify-content-center",style:{height:"60vh !important"}},je={key:1},Ae={class:"text-primary-700"},Ke={key:0,class:"my-4"},Oe={class:"flex flex-column md:flex-row justify-content-between mt-3 gap-2"},Re={class:"flex align-items-center gap-2"},Pe={class:"flex align-items-center gap-2"},ze={key:1,class:"mt-2 mb-4"},Ue={class:"md:flex justify-content-between"},We={class:"md:flex align-items-center"},Ge={class:"p-input-icon-left mr-2 w-full md:w-auto"},qe=a("i",{class:"pi pi-search"},null,-1),Je={class:"p-inputgroup flex-1 mb-2 md:mb-0"},He={class:"material-icons"},Qe=a("div",{class:"text-color-secondary p-2"},"VIEW SETTINGS",-1),Xe={class:"flex align-items-center text-color-secondary p-2 cursor-pointer"},Ye={class:"material-icons mr-2"},Ze=a("div",{class:"text-color-secondary p-2"},"LIST VIEW CONTROLS",-1),el={class:"flex align-items-center text-color-secondary p-2 cursor-pointer"},ll={class:"material-icons mr-2"},sl={__name:"Show",setup(W){const $=D(()=>T(()=>import("./ViewFiltersDialogMain-3f6d349a.js"),["assets/ViewFiltersDialogMain-3f6d349a.js","assets/index-2e9b86cc.js","assets/index-cb49da02.css","assets/index.esm-4d56776b.js","assets/ViewFiltersDialogMain-bbe8a5f0.css"])),n=D(()=>T(()=>import("./ListViewFilterContent-8ce20d69.js"),["assets/ListViewFilterContent-8ce20d69.js","assets/index-2e9b86cc.js","assets/index-cb49da02.css"])),G=D(()=>T(()=>import("./DynamicDataTableMain-e28638dd.js"),["assets/DynamicDataTableMain-e28638dd.js","assets/index-2e9b86cc.js","assets/index-cb49da02.css","assets/DynamicDataTableMain-e7a754e3.css"])),q=D(()=>T(()=>import("./DynamicKanban-9afb4331.js"),["assets/DynamicKanban-9afb4331.js","assets/index-2e9b86cc.js","assets/index-cb49da02.css","assets/DynamicKanban-1a0fa8fb.css"])),y=u("new"),_=u(!1),x=u(0),J=ge(),r=u([]),f=u(),H=u(),I=u(),C=fe(),B=he(),Q=we(),X=ye(),{listViewFilterOverlay:tl,viewFiltersDialogLoading:S,viewFiltersDialogSwitch:k,viewFiltersDialog:M,moduleLoading:Y,collectionLoading:N,getModule:V,getBaseModule:c,getCollection:F,getViewFilters:Z,getDefaultViewFilter:ee,getViewFilterIds:le,getViewFilter:te,getSearchKeyFieldIds:ae}=P(C),{fetchModule:oe,fetchBaseModule:ie}=C,{getTabs:h}=P(B),{addTab:ne,toggleWindows:j,maximizeTab:al}=B,{setFormReset:se}=Q,A=u(!1),K=u(!1),re=u([{label:"New",icon:"add",command:t=>{console.log(t),y.value="new",x.value+=1,S.value=!0,k.value=!0,M.value=!0}},{label:"Edit table settings",icon:"table_chart",command:t=>{console.log(t),y.value="edit-table",x.value+=1,S.value=!0,k.value=!0,M.value=!0}},{label:"Edit kanban settings",icon:"view_kanban",command:t=>{console.log(t),y.value="edit-kanban",x.value+=1,S.value=!0,k.value=!0,M.value=!0}}]),de=u([{label:"Table view",icon:"table_chart",command:t=>{console.log(t),r.value.currentDisplay="table"}},{label:"Kanban view",icon:"view_kanban",command:t=>{console.log(t),r.value.currentDisplay="kanban"}},{label:"Split view",icon:"vertical_split",command:t=>{console.log(t)}}]),ce=async t=>{let o=Object.assign({},{type:"module-form",style:"window",name:`${t.name}-window-create-form`,label:`${t.label} Form`,_module:t.name,expanded:!1,opened:!1,mode:"modal",opened_order:null});h.value.findIndex((d,O)=>d.name===o.name)==-1?await ne(o,!0):ue(t)},ue=(t,o)=>{X.require({group:"templating",header:"Unsaved "+t.mainEntity+" Alert",message:t.mainEntity,icon:"pi pi-exclamation-triangle",rejectClass:"p-button-outlined",rejectLabel:"Continue",acceptLabel:"Create New "+t.mainEntity,accept:()=>{let p=h.value.findIndex(d=>d.name===`${t.name}-window-create-form`);se(`${t.name}-window-create-form`),j(h.value[p])},reject:()=>{let p=h.value.findIndex(d=>d.name===`${t.name}-window-create-form`);j(h.value[p])}})};return xe(f,(t,o)=>{t&&(r.value=te.value(t))}),Se(async()=>{await ie(J.params.id),await oe(c.value.name),r.value=ee.value,f.value=r.value._id,H.value=le.value,I.value=ae.value}),(t,o)=>{const p=v("ProgressSpinner"),d=v("Skeleton"),O=v("Dropdown"),me=v("MultiSelect"),_e=v("InputText"),L=v("Button"),R=v("Menu");return m(),g(ke,null,[a("div",Ce,[l(Y)?(m(),g("div",Be,[e(p)])):(m(),g("div",je,[a("h4",Ae,b(l(c).label),1),a("div",null,[l(N)?(m(),g("div",Ke,[a("div",Oe,[a("div",Re,[e(d,{width:"10rem",height:"2.5rem"}),e(d,{width:"10rem",height:"2.5rem"})]),a("div",Pe,[e(d,{width:"10rem",height:"2.5rem"}),e(d,{width:"3rem",height:"2.5rem"}),e(d,{width:"3rem",height:"2.5rem"}),e(d,{width:"3rem",height:"2.5rem"}),e(d,{width:"8rem",height:"2.5rem"})])])])):(m(),g("div",ze,[a("div",Ue,[a("div",null,[e(O,{modelValue:f.value,"onUpdate:modelValue":o[0]||(o[0]=i=>f.value=i),options:l(Z),optionLabel:"filterName",optionValue:"_id",placeholder:"Select View Filters",class:"border-round-xl border-primary w-full md:w-12rem mr-2 mb-2 md:mb-0"},null,8,["modelValue","options"]),e(me,{modelValue:I.value,"onUpdate:modelValue":o[1]||(o[1]=i=>I.value=i),options:l(V).fields,filter:"",showToggleAll:!1,optionLabel:"label",optionValue:"_id",dataKey:"_id",placeholder:"Select Fields",class:"border-round-xl border-primary w-full md:w-12rem mb-2 md:mb-0"},null,8,["modelValue","options"])]),a("div",We,[a("div",Ge,[qe,e(_e,{type:"text",class:"border-round-xl border-primary w-full mb-2 md:mb-0",placeholder:"Search The List..."})]),a("div",Je,[e(L,{onClick:o[2]||(o[2]=i=>K.value.toggle(i)),type:"button","aria-haspopup":"true","aria-controls":"tbl_overlay_menu2",class:"material-icon border-round-md mr-2"},{icon:s(()=>[a("div",He,b(r.value.currentDisplay==="table"?"table_chart":"view_kanban"),1)]),_:1}),e(R,{ref_key:"tblMenu2",ref:K,id:"tbl_overlay_menu2",class:"mt-2",model:de.value,popup:!0},{start:s(()=>[Qe]),item:s(({item:i,label:ve,props:pe})=>[a("div",Xe,[a("div",Ye,b(i.icon),1),a("div",null,b(i.label),1)])]),_:1},8,["model"]),e(L,{onClick:o[3]||(o[3]=i=>A.value.toggle(i)),loading:l(S),type:"button",icon:"pi pi-cog","aria-haspopup":"true","aria-controls":"tbl_overlay_menu",class:"border-round-md mr-2"},null,8,["loading"]),e(R,{ref_key:"tblMenu",ref:A,id:"tbl_overlay_menu",class:"mt-2",model:re.value,popup:!0},{start:s(()=>[Ze]),item:s(({item:i,label:ve,props:pe})=>[a("div",el,[a("div",ll,b(i.icon),1),a("div",null,b(i.label),1)])]),_:1},8,["model"]),e(L,{onClick:o[4]||(o[4]=i=>_.value=!0),disabled:_.value,icon:"pi pi-filter","aria-label":"Submit",class:"list-view-filter-btn border-round-md mr-2"},null,8,["disabled"]),e(L,{class:"border-round-md mr-2",icon:"pi pi-plus",onClick:o[5]||(o[5]=i=>ce(l(c))),label:`New ${l(c).label}`},null,8,["label"])])])])]))]),r.value.currentDisplay==="table"?(m(),w(E,{key:0},{fallback:s(()=>[e(Ve)]),default:s(()=>[e(l(G),{mode:"edit",moduleId:l(c)._id,moduleEntityName:l(c).mainEntity,moduleName:l(c).name,moduleLabel:l(c).label,fields:r.value.fields,data:l(F).data,pagination:l(F).meta&&l(F).meta.pagination,collectionLoading:l(N),sidebar:_.value,onToggleSidebar:o[6]||(o[6]=i=>_.value=!_.value)},{"list-view-filter":s(()=>[(m(),w(E,null,{fallback:s(()=>[e(U)]),default:s(()=>[e(l(n),{baseModule:l(c),module:l(V)},null,8,["baseModule","module"])]),_:1}))]),_:1},8,["moduleId","moduleEntityName","moduleName","moduleLabel","fields","data","pagination","collectionLoading","sidebar"])]),_:1})):r.value.currentDisplay==="kanban"?(m(),w(E,{key:1},{fallback:s(()=>[e($e)]),default:s(()=>[e(l(q),{viewFilterId:r.value._id,groupBy:r.value.group_by,summarizeBy:r.value.summarize_by,moduleName:l(c).name,moduleLabel:l(c).label,fields:r.value.fields,data:l(F).data,collectionLoading:l(N),sidebar:_.value,onToggleSidebar:o[7]||(o[7]=i=>_.value=!_.value)},{"list-view-filter":s(()=>[(m(),w(E,null,{fallback:s(()=>[e(U)]),default:s(()=>[e(l(n),{baseModule:l(c),module:l(V)},null,8,["baseModule","module"])]),_:1}))]),_:1},8,["viewFilterId","groupBy","summarizeBy","moduleName","moduleLabel","fields","data","collectionLoading","sidebar"])]),_:1})):z("",!0)]))]),l(k)?(m(),w(l($),{key:x.value,mode:y.value,selectedViewFilter:f.value,module:l(V)},null,8,["mode","selectedViewFilter","module"])):z("",!0)],64)}}};export{sl as default};
