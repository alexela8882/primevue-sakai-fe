import{_ as We,c as b,o as t,j as l,f as a,M as Je,a as fe,O as Ge,B as ge,s as R,r,v as Q,I as S,J as T,N as He,u as Ke,K as Qe,G as Xe,E as Ye,e,F as f,k as g,n as Ze,t as _,i as d,m as p,w as c,d as h,S as C,g as et}from"./index-54e8fe55.js";import{R as tt}from"./RdBreadCrumbs-80fd8179.js";import{D as st}from"./DataTableLoader-ee2ea988.js";import{T as pe}from"./TwoColumnList-cb187298.js";import{u as lt}from"./index-87aea817.js";const at={};function ot(U,P){const x=b("Skeleton");return t(),l("div",null,[a(x,{class:"mb-2",borderRadius:"16px"}),a(x,{width:"10rem",class:"mb-2",borderRadius:"16px"}),a(x,{width:"5rem",borderRadius:"16px",class:"mb-2"}),a(x,{height:"2rem",class:"mb-2",borderRadius:"16px"}),a(x,{width:"10rem",height:"4rem",borderRadius:"16px"})])}const ve=We(at,[["render",ot]]),it=Je("moduleFileStore",()=>{fe();const U=Ge(),P=ge();R(U),R(P);const x=r(!1),E=r(!1),B=r(!1),O=r([]),j=r([{categoryValue:0,items:[{id:1,label:"Test 1",date:"Jan 23, 2023",size:"55kb",type:"jpg",selected:!1},{id:2,label:"Test 2",date:"Aug 01, 2023",size:"45kb",type:"jpg",selected:!1},{id:3,label:"Test 3",date:"Nov 23, 2023",size:"100kb",type:"jpg",selected:!1},{id:4,label:"Test 4",date:"Sept 23, 2023",size:"1mb",type:"png",selected:!1},{id:5,label:"Test 5",date:"Jan 06, 2023",size:"2.3mb",type:"jpg",selected:!1},{id:6,label:"Test 6",date:"March 24, 2023",size:"50kb",type:"jpeg",selected:!1},{id:7,label:"Test 7",date:"Nov 23, 2023",size:"1kb",type:"jpeg",selected:!1},{id:8,label:"Test 8",date:"Nov 23, 2023",size:"0kb",type:"png",selected:!1},{id:9,label:"Test 9",date:"Nov 23, 2023",size:"90kb",type:"png",selected:!1},{id:10,label:"Test 10",date:"Nov 23, 2023",size:"1.1mb",type:"jpg",selected:!1},{id:11,label:"Test 11",date:"Nov 23, 2023",size:"1.1mb",type:"jpg",selected:!1},{id:12,label:"Test 12",date:"Dec 23, 2023",size:"1.1mb",type:"jpg",selected:!1}]},{categoryValue:2,items:[{label:"Test 1",date:"Nov 23, 2023",size:"55kb",file_type:"jpg"}]}]),V=r({}),q=Q(()=>O.value),F=Q(()=>j.value),m=Q(()=>V.value);return{fileLoading:x,fileDialog:E,fileDialogSwitch:B,getModuleFiles:q,getFiles:F,getFile:m,addModuleFiles:async N=>{N.map(k=>O.value.push(k))}}});const nt={key:0,class:"flex align-items-center justify-content-center",style:{height:"60vh !important"}},dt={key:1},ct={style:{position:"sticky !important",top:"72px","z-index":"2 !important"},class:"bg-white px-5 py-3 mb-5 border-round-xl flex align-items-center justify-content-between shadow-2"},rt={class:"flex"},ut={key:0,class:"flex flex-column text-md mr-4"},mt={key:0},_t={class:"flex"},pt={class:"font-bold text-md"},vt={key:1},ft={class:"font-bold text-md"},gt={key:0,class:"flex flex-column text-md mx-4"},ht={class:"font-bold text-md"},bt={class:"grid"},yt={class:"col-7"},xt={class:"p-3 bg-white border-round-xl shadow-2"},kt={class:"flex flex-column gap-3"},wt={key:0},Lt={class:"text-2xl font-bold"},Nt={key:0},St=e("div",{class:"material-icons cursor-pointer"},"playlist_add",-1),Tt=[St],Mt={class:"flex flex-column px-3 mt-4"},Dt={key:0},It={key:0},Rt=["id"],Et=["onClick"],jt=e("i",{class:"pi pi-eye"},null,-1),Ft={key:1},zt={key:1},Ct={class:"my-4"},Pt={class:"my-4"},Bt={key:0},Ot=e("div",{class:"mt-4 text-600"},"No records found",-1),Vt=[Ot],$t={class:"my-4"},At={class:"col-5"},Ut={style:{position:"sticky !important",top:"145px !important",height:"75vh !important"},class:"flex flex-column gap-4 overflow-scroll p-1"},qt={class:"bg-white border-round-xl shadow-2"},Wt={class:"p-3"},Jt={class:"flex align-items-center justify-content-between"},Gt=e("div",{class:"text-xl font-bold text-primary"},"Activity",-1),Ht={class:"p-inputgroup"},Kt={class:"flex flex-column gap-1 mb-6"},Qt={class:"text-sm text-900"},Xt={key:0},Yt={class:"text-sm text-900 ml-2"},Zt=e("p",{class:"m-0 mt-3"}," Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. ",-1),es={class:"bg-white border-round-xl shadow-2"},ts={class:"p-3"},ss={class:"flex justify-content-between align-items-center text-xl font-bold text-primary"},ls=e("div",null,"Files",-1),as={class:"mt-5 flex flex-column gap-2 text-700"},os=e("div",{class:"text-lg font-bold"},"Upload files",-1),is=e("div",{class:""},"only .jpg and .png files. 5 MB max file size.",-1),ns={key:0},ds={key:0},cs={class:"border-round border-1 border-orange-300 p-2 flex align-items-center justify-content-between"},rs={class:"flex align-items-center gap-3"},us={href:"javascript: void(0);"},ms={class:"text-700"},_s=e("div",{class:"text-orange-500"},"Pending",-1),ps=["onClick"],vs={class:"border-round border-1 border-300 p-2 flex align-items-center justify-content-between"},fs={class:"flex align-items-center gap-3"},gs={href:"javascript: void(0);"},hs={class:"text-700"},bs=["onClick"],ys=e("div",{class:"bg-white border-round-xl shadow-2"},[e("div",{class:"p-3 h-15rem"},[e("div",{class:"text-xl font-bold text-primary"},"Reminders")])],-1),xs={__name:"ShowDetail",setup(U){const P=S(()=>T(()=>import("./MailboxThreads-baa7012a.js"),["assets/MailboxThreads-baa7012a.js","assets/index-54e8fe55.js","assets/index-d5e7f8f7.css","assets/ShowInquiryDetail-d2b44956.css"])),x=S(()=>T(()=>import("./DynamicDataTableMain-528128b6.js"),["assets/DynamicDataTableMain-528128b6.js","assets/index-54e8fe55.js","assets/index-d5e7f8f7.css","assets/Validate-76f7b705.js","assets/DynamicDataTableMain-5df8962c.css"]));S(()=>T(()=>import("./SalesTab-01adccd1.js"),["assets/SalesTab-01adccd1.js","assets/index-54e8fe55.js","assets/index-d5e7f8f7.css","assets/index-87aea817.js"])),S(()=>T(()=>import("./ServicesTab-bd24f57b.js"),["assets/ServicesTab-bd24f57b.js","assets/index-54e8fe55.js","assets/index-d5e7f8f7.css","assets/index-87aea817.js"]));const E=S(()=>T(()=>import("./RelatedListPanel-fd70fbc8.js"),["assets/RelatedListPanel-fd70fbc8.js","assets/index-54e8fe55.js","assets/index-d5e7f8f7.css","assets/RelatedListPanel-70fb7b80.css"])),B=S(()=>T(()=>import("./SectionFields-188f7cb4.js"),["assets/SectionFields-188f7cb4.js","assets/index-54e8fe55.js","assets/index-d5e7f8f7.css","assets/index-87aea817.js"])),O=S(()=>T(()=>import("./UploadFileContent-09328138.js"),["assets/UploadFileContent-09328138.js","assets/index-54e8fe55.js","assets/index-d5e7f8f7.css","assets/RdBreadCrumbs-80fd8179.js","assets/RdBreadCrumbs-d49d3125.css","assets/DataTableLoader-ee2ea988.js","assets/TwoColumnList-cb187298.js","assets/index-87aea817.js","assets/UploadFileContent-bb5410c6.css"])),j=r(null),V=r(),q=fe(),F=r(0),m=He();Ke();const W=r(!0),N=r(),k=r(),X=r();r();const Y=r(),Z=r(),ee=r([]),te=r([]),J=r([]),se=ge(),le=lt(),ae=it(),oe=Qe(),{fetchModule:he,fetchLinkedModuleData:be,fetchBaseModule:ye}=se,{getModule:G,getLinkedModuleData:xe,getBaseModule:ie,getFieldDetailsById:ks}=R(se),{itemLoading:ke,relatedListLoading:ws,getItem:Ls,_relatedLists:Ns,getRelatedLists:ne,_getRelatedOrderedLists:H,getRelatedListsByCname:w,_getItemPanels:we,getItemPanels:Le,getItemValueByName:$}=R(le),{fetchItem:Ne,fetchItemRelatedList:Se,fetchItemRelatedLists:Te}=le,{fileLoading:Ss,fileDialogSwitch:Me,fileDialog:de,getFiles:K,getModuleFiles:A}=R(ae),{addModuleFiles:De}=ae,{addTab:Ie,toggleWindows:Re}=oe,{getTabs:ce}=R(oe),Ee=r([{label:`${m.params.name}`,to:`/modules/${m.params.name}/${m.params.id}`},{label:`${m.params.name} details`,to:null}]),je=r([{label:"Options",items:[{label:"Add files",icon:"pi pi-plus",command:()=>{Me.value=!0,de.value=!0,console.log(de.value)}}]}]),Fe=n=>{F.value=n.index},re=async n=>{const o={moduleName:m.params.name,panelName:n.panelName};await Se(o)},ze=n=>{if(n){const o=n.getBoundingClientRect();return o.top>=0&&o.left>=0&&o.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&o.right<=(window.innerWidth||document.documentElement.clientWidth)}},ue=()=>{we.value(G.value.panels).map(o=>{const i=document.getElementById(`rl-panel-${o._id}`);ze(i)&&(console.log(`Element with ${o._id} id is visible`),re(o))})},Ce=async n=>{const o=n.files,i=[],L=K.value.length>0?K.value[K.value.length-1]:0;o.map(M=>{let D=Object.assign({},{id:L+1,label:M.name,date:Date.now(),size:M.size,type:M.type,selected:!1});i.push(D)}),De(i),q.add({severity:"info",summary:"Success",detail:"File Uploaded",life:3e3})},Pe=n=>{console.log(n)},Be=n=>{const o=A.value.findIndex(i=>i.id===n.id);A.value.splice(o,1)},Oe=n=>{let o=Object.assign({},{type:"module-form",style:"window",name:`${n.name}-${m.params.pageid}-window-edit-form`,label:`${n.label} Form`,_module:n.name,expanded:!0,opened:!1,opened_order:null});const i=ce.value.findIndex(L=>L.name===o.name);i===-1?Ie(o,!0):Re(ce.value[i])};return Xe(ne,(n,o)=>{n&&(Y.value=n)}),Ye(async()=>{await ye(m.params.id),await he({moduleName:m.params.name});const n={module:"inquiries",link_field:"link_id",link_id:m.params.pageid};await be(n),await Ne(m.params);const o=Object.assign({},{id:m.params.id,name:m.params.name,pageid:m.params.pageid,moduleName:m.params.name,base:m.params.pageid,relatedLists:G.value.relatedLists});await Te(o),W.value=ke.value,N.value=ie.value,k.value=G.value,X.value=Le.value(null),Y.value=ne.value,Z.value=X.value.filter(i=>i.controllerMethod.includes("@index")),ee.value=H.value.filter(i=>i.entityName==="Contact"||i.entityName==="Unit"),te.value=H.value.filter(i=>i.entityName==="SalesOpportunity"||i.entityName==="SalesOpportunity"),J.value=H.value.filter(i=>i.entityName==="DefectReport"||i.entityName==="ServiceJob"||i.entityName==="ServiceSchedule"||i.entityName==="BreakdownLog"||i.entityName==="ServiceReport"),j.value=xe.value,window.addEventListener("scroll",ue),ue()}),(n,o)=>{const i=b("ProgressSpinner"),L=b("Button"),M=b("Panel"),D=b("TabPanel"),Ve=b("TabView"),$e=b("Dropdown"),me=b("font-awesome-icon"),Ae=b("Menu"),_e=b("Image"),Ue=b("FileUpload");return t(),l("div",null,[a(tt,{bcrumbs:Ee.value},null,8,["bcrumbs"]),W.value?(t(),l("div",nt,[a(i)])):(t(),l("div",dt,[e("div",ct,[e("div",rt,[(t(!0),l(f,null,g(k.value.fields,(s,u)=>(t(),l("div",{key:u},[e("div",{class:Ze(`${k.value.fields.length===u+1&&"mr-8"}`)},[s.title?(t(),l("div",ut,[s.groupWith?(t(),l("div",mt,[e("div",null,_(s.groupLabel),1),e("div",_t,[(t(!0),l(f,null,g(s.groupWith,(y,z)=>(t(),l("div",{key:z},[e("div",pt,_(d($)(y))+_(s.fieldGlue===" "?" ":s.fieldGlue),1)]))),128))])])):(t(),l("div",vt,[e("div",null,_(s.label),1),e("div",ft,_(d($)(s.name)),1)]))])):p("",!0)],2)]))),128)),(t(!0),l(f,null,g(k.value.fields,(s,u)=>(t(),l("div",{key:u},[s.header?(t(),l("div",gt,[e("div",null,_(s.label),1),e("div",ht,_(d($)(s.name)?d($)(s.name):null),1)])):p("",!0)]))),128))]),e("div",null,[a(L,{label:"Edit",size:"large",onClick:o[0]||(o[0]=s=>Oe(d(ie))),class:"px-6 border-round-xl"})])]),e("div",bt,[e("div",yt,[e("div",xt,[a(Ve,{onTabChange:Fe},{default:c(()=>[a(D,{header:"Details"},{default:c(()=>[e("div",null,[e("div",kt,[(t(!0),l(f,null,g(Z.value,(s,u)=>(t(),l("div",{key:u,class:"flex flex-column gap-1"},[(t(!0),l(f,null,g(s.sections,(y,z)=>(t(),l("div",{key:z,class:"shadow-1 mt-4"},[a(M,{class:"detail-page-panel"},{header:c(()=>[y.sectionLabel?(t(),l("div",wt,[e("div",Lt,_(y.sectionLabel),1),d(w)(s.panelName)?(t(),l("div",Nt,Tt)):p("",!0)])):p("",!0)]),default:c(()=>[e("div",Mt,[s.controllerMethod.indexOf("@show")>-1?(t(),l("div",Dt,[d(w)(s.panelName)?(t(),l("div",It,[d(w)(s.panelName)?(t(),h(C,{key:0},{fallback:c(()=>[a(st)]),default:c(()=>[(t(),h(d(x),{key:s._id,moduleId:s._id,moduleEntityName:s.entityName,moduleName:d(w)(s.panelName).link,moduleLabel:d(w)(s.panelName).label,fields:d(w)(s.panelName).fields.data,data:d(w)(s.panelName).collection.data,pagination:d(w)(s.panelName).collection.meta,collectionLoading:!1},null,8,["moduleId","moduleEntityName","moduleName","moduleLabel","fields","data","pagination"]))]),_:2},1024)):p("",!0)])):(t(),l("div",{key:1,id:`rl-panel-${s._id}`},[e("div",{onClick:v=>re(s),class:"flex align-items-center gap-2 cursor-pointer text-700"},[jt,et(" View data ")],8,Et)],8,Rt))])):(t(),l("div",Ft,[y.field_ids&&y.field_ids.length>0?(t(),h(C,{key:0},{fallback:c(()=>[a(pe)]),default:c(()=>[a(d(B),{newModuleFields:k.value.fields,fieldIds:y.field_ids},null,8,["newModuleFields","fieldIds"])]),_:2},1024)):p("",!0),y.additional_fields.length>0?(t(),l("div",zt,[(t(!0),l(f,null,g(y.additional_fields,(v,I)=>(t(),l("div",{key:I},[v.ids&&v.ids.length>0?(t(),h(C,{key:0},{fallback:c(()=>[a(pe)]),default:c(()=>[a(d(B),{newModuleFields:k.value.fields,fieldIds:v.ids},null,8,["newModuleFields","fieldIds"])]),_:2},1024)):p("",!0)]))),128))])):p("",!0)]))])]),_:2},1024)]))),128))]))),128)),(t(!0),l(f,null,g(ee.value,(s,u)=>(t(),l("div",{key:u},[e("div",Ct,[(t(),h(d(E),{key:u,relatedList:s},null,8,["relatedList"]))])]))),128))])])]),_:1}),N.value&&N.value.name==="accounts"?(t(),h(D,{key:0,header:"Sales"},{default:c(()=>[e("div",null,[F.value===1?(t(),h(C,{key:0},{fallback:c(()=>[a(ve,{class:"mt-4"})]),default:c(()=>[(t(!0),l(f,null,g(te.value,(s,u)=>(t(),l("div",{key:u},[e("div",Pt,[(t(),h(d(E),{key:u,relatedList:s},null,8,["relatedList"]))])]))),128))]),_:1})):p("",!0)])]),_:1})):p("",!0),N.value&&N.value.name==="accounts"?(t(),h(D,{key:1,header:"Services"},{default:c(()=>[e("div",null,[J.value.length<=0?(t(),l("div",Bt,Vt)):p("",!0),F.value===2?(t(),h(C,{key:1},{fallback:c(()=>[a(ve,{class:"mt-4"})]),default:c(()=>[(t(!0),l(f,null,g(J.value,(s,u)=>(t(),l("div",{key:u},[e("div",$t,[(t(),h(d(E),{key:u,relatedList:s},null,8,["relatedList"]))])]))),128))]),_:1})):p("",!0)])]),_:1})):p("",!0),j.value?(t(),h(D,{key:2,header:"Email"},{default:c(()=>[e("div",null,[a(d(P),{threads:j.value.conversations.slice().reverse()},null,8,["threads"])])]),_:1})):p("",!0)]),_:1})])]),e("div",At,[e("div",Ut,[e("div",qt,[e("div",Wt,[e("div",Jt,[Gt,e("div",null,[e("div",Ht,[a($e,{placeholder:"Filters",class:"border-round-xl border-primary w-full md:w-12rem"}),a(L,{label:"add activity",class:"ml-3 border-round-xl px-4"})])])])]),e("div",Kt,[(t(),l(f,null,g(["October 2023","November 2023","December 2023"],(s,u)=>a(M,{key:u,toggleable:"",collapsed:"",class:"activity-panel"},{header:c(()=>[e("div",Qt,[u===0?(t(),l("span",Xt,"This months")):p("",!0)])]),togglericon:c(()=>[a(me,{icon:"fa-solid fa-caret-down",style:{"font-size":"1.5rem"}})]),icons:c(()=>[e("div",Yt,_(s),1)]),default:c(()=>[Zt]),_:2},1024)),64))])]),e("div",es,[e("div",ts,[e("div",ss,[ls,e("div",null,[e("div",{onClick:o[1]||(o[1]=s=>V.value.toggle(s)),class:"cursor-pointer"},[a(me,{icon:"fa-regular fa-square-caret-down",style:{"font-size":"1.5rem"}})]),a(Ae,{ref_key:"fileMenu",ref:V,id:"overlay_menu",model:je.value,popup:!0},null,8,["model"])])]),e("div",as,[os,is,e("div",null,[a(Ue,{name:"demo[]",url:"/api/upload",customUpload:"",onUploader:o[2]||(o[2]=s=>Ce(s)),onError:o[3]||(o[3]=s=>Pe(s)),multiple:!0,accept:"image/*",maxFileSize:5e6},{empty:c(()=>[d(A).length<=0?(t(),l("p",ns,"Drag and drop files to here to upload.")):p("",!0)]),content:c(({files:s,uploadedFiles:u,removeUploadedFileCallback:y,removeFileCallback:z})=>[s.length>0?(t(),l("div",ds,[(t(!0),l(f,null,g(s,(v,I)=>(t(),l("div",{key:I,class:"mb-2"},[e("div",cs,[e("div",rs,[a(_e,{src:"/demo/images/galleria/galleria6s.jpg",alt:"dummy-img",width:"50",class:"cursor-pointer"}),e("div",null,[e("a",us,_(v.name),1),e("div",ms,_(Date.now())+" • "+_(v.size)+" • "+_(v.type),1),_s])]),e("div",{onClick:qe=>z(I),class:"cursor-pointer mr-2"},[a(L,{icon:"pi pi-times",severity:"danger",text:"",rounded:"","aria-label":"Cancel"})],8,ps)])]))),128))])):p("",!0),(t(!0),l(f,null,g(d(A),(v,I)=>(t(),l("div",{key:I,class:"mb-2"},[e("div",vs,[e("div",fs,[a(_e,{src:"/demo/images/galleria/galleria6s.jpg",alt:"dummy-img",width:"50",class:"cursor-pointer"}),e("div",null,[e("a",gs,_(v.label),1),e("div",hs,_(v.date)+" • "+_(v.size)+" • "+_(v.type),1)])]),e("div",{onClick:qe=>Be(v),class:"cursor-pointer mr-2"},[a(L,{icon:"pi pi-times",severity:"danger",text:"",rounded:"","aria-label":"Cancel"})],8,bs)])]))),128))]),_:1})])])])]),ys])])])])),a(d(O),{module:k.value},null,8,["module"])])}}},Es=Object.freeze(Object.defineProperty({__proto__:null,default:xs},Symbol.toStringTag,{value:"Module"}));export{Es as S,it as u};
