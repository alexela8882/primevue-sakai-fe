import{r as i,E as F,c as B,o as S,j as x,e as s,f as c,i as l,F as j,I as C,J as I}from"./index-e1fe9d82.js";import{u as $,c as p,a as k}from"./index.esm-ecafb4db.js";const O={class:"relative h-full px-3"},A={class:"sticky bottom-0 right-0 py-2 surface-50"},D={class:"flex justify-content-end gap-2 px-3 py-1"},J={__name:"DynamicForm",props:{form:Object},setup(u){const v=C(()=>I(()=>import("./DynamicFields-1c13c327.js"),["assets/DynamicFields-1c13c327.js","assets/index-e1fe9d82.js","assets/index-40ff91a8.css"])),d=u,r=i({}),o=i({});i([]);const{values:M,errors:f,setErrors:q,setFieldError:_,ErrorBag:w,defineComponentBinds:y,isSubmitting:z,setFieldValue:b,handleSubmit:V,meta:E}=$({}),g=async()=>{(await m()).inner?console.log("error"):console.log("passed")},m=V((a,e)=>{Object.keys(o.value).forEach((t,n)=>{o.value[t].modelValue!==null&&_(t,null)});try{return r.value.validateSync(a,{abortEarly:!1}),a}catch(t){return t.inner.map(n=>{n.path+"",n.message,e.setFieldError(n.path,n.message)}),t}}),h=async()=>{d.form.fields.map(e=>Object.assign(e,{...e,data:{value:null}}));const a={};d.form.fields.map(e=>{e.rules&&e.rules.required?a[e.name]=p().label(e.label).required():a[e.name]=p().label(e.label).nullable(),o.value[e.name]=y(`${e.name}`),b(`${e.name}`,null)}),r.value=a,r.value=k(a)};return F(async()=>{await h()}),(a,e)=>{const t=B("Button");return S(),x(j,null,[s("div",O,[s("div",null,[c(l(v),{fields:u.form.fields,moduleValidationInputs:o.value,moduleValidationErrors:l(f),moduleValidationMeta:l(E),onValidateSyncFunc:e[0]||(e[0]=n=>l(m)())},null,8,["fields","moduleValidationInputs","moduleValidationErrors","moduleValidationMeta"])])]),s("div",A,[s("div",D,[c(t,{label:"Reset",outlined:""}),c(t,{onClick:g,label:"Save",size:"large"})])])],64)}}};export{J as default};
