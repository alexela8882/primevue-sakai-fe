import{I as K,J as H,a3 as Q,s as W,a5 as X,r as F,aY as Z,E as p,a7 as a,c as y,o as t,j as m,t as f,m as k,f as N,i as l,n as g,F as c,k as s,d,e as S,w as x}from"./index-c093ce25.js";import{v as _}from"./Validate-aa9d6bb0.js";import{E as z}from"./Editor-d83f0cdf.js";const ee=["for"],le=["for"],ae=["for"],ne={key:3,class:"fieldInput flex flex-column"},ie=["for"],te=["for"],ue=["for"],me=["for"],oe=["for"],fe=["for"],ge={class:"fieldInputSelection"},de=S("svg",{class:"circular",viewBox:"0 0 50 50"},[S("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})],-1),ce=["for"],se=["for"],re=["for"],Ne={__name:"Field",props:{config:Object,type:String,keyName:String,inline:Boolean,module:String,entity:String,mutable:Boolean,small:Boolean},emits:["changeValue"],setup(e,{emit:G}){const r=e,T=K(()=>H(()=>import("./LookupField-d83d1ed4.js"),["assets/LookupField-d83d1ed4.js","assets/index-c093ce25.js","assets/index-cb49da02.css","assets/LookupField-09bee035.css"])),Y=Q(),{fetchPicklist:B,fetchLookup:ye}=Y,{getPicklistByListName:V,getLookupOptions:I}=W(Y),{checkFieldIfMultipleSelect:q}=X(),{validateField:P}=_();F();const C=F("izbi1p0d9vddiqqrjjtgx2a6ech4jv2wqogrplsesugoa0gs"),i=Z("form"),L=F(!1),w=F(!1),v=b=>{r.inline||(i.value.errors[r.keyName][b.name]=P(i.value.values[r.keyName],b,i.value.fields)),G("changeValue")};p(async()=>{if(r.config.field_type.name=="picklist"&&a.get(r.config.rules,"ss_dropdown",!1)!=!0&&a.get(r.config.rules,"ms_dropdown",!1)!=!0){w.value=!0;let b=V.value(r.config.listName);a.isEmpty(b)&&await B([r.config.listName]),w.value=!1}});const O=async b=>{if(b){let u=V.value(r.config.listName);a.isEmpty(u)&&(w.value=!0,await B([r.config.listName]),w.value=!1)}};return(b,u)=>{const j=y("InputText"),D=y("InputNumber"),R=y("el-date-picker"),A=y("InputSwitch"),E=y("Checkbox"),$=y("RadioButton"),h=y("Listbox"),M=y("el-option"),U=y("el-select"),J=y("el-option-group");return e.config.field_type.name=="text"?(t(),m("div",{key:0,class:g(["fieldInput flex flex-column",{required:l(a).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(t(),m("label",{key:0,for:e.config.name},f(e.config.label),9,ee)):k("",!0),N(j,{modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[0]||(u[0]=n=>l(i).values[e.keyName][e.config.name]=n),id:e.config.name,class:g({"p-invalid":!l(a).isEmpty(l(a).get(l(i).errors[e.keyName],e.config.name,[]))}),disabled:l(i).formSaving,onBlur:u[1]||(u[1]=n=>v(e.config))},null,8,["modelValue","id","class","disabled"]),(t(!0),m(c,null,s(l(a).get(l(i).errors[e.keyName],e.config.name,[]),(n,o)=>(t(),m("small",{class:"errMsg",key:o},f(n),1))),128))],2)):e.config.field_type.name=="number"||e.config.field_type.name=="percentage"?(t(),m("div",{key:1,class:g(["fieldInput flex flex-column",{required:l(a).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(t(),m("label",{key:0,for:e.config.name},f(e.config.label),9,le)):k("",!0),N(D,{modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[2]||(u[2]=n=>l(i).values[e.keyName][e.config.name]=n),inputId:"config.name",mode:"decimal",class:g({invalid:!l(a).isEmpty(l(a).get(l(i).errors[e.keyName],e.config.name,[]))}),useGrouping:l(a).get(e.config.rules,"comma_separated",!1),suffix:e.config.field_type.name=="percentage"?"%":"",minFractionDigits:l(a).get(e.config.rules,"decimal",null),maxFractionDigits:l(a).get(e.config.rules,"decimal",null),onBlur:u[3]||(u[3]=n=>v(e.config))},null,8,["modelValue","class","useGrouping","suffix","minFractionDigits","maxFractionDigits"]),(t(!0),m(c,null,s(l(a).get(l(i).errors[e.keyName],e.config.name,[]),(n,o)=>(t(),m("small",{class:"errMsg",key:o},f(n),1))),128))],2)):e.config.field_type.name=="currency"?(t(),m("div",{key:2,class:g(["fieldInput flex flex-column",{required:l(a).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(t(),m("label",{key:0,for:e.config.name},f(e.config.label),9,ae)):k("",!0),l(a).get(l(i).values[e.keyName],e.config.currencySource.field+".code","")==""?(t(),d(D,{key:1,disabled:l(i).formSaving,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[4]||(u[4]=n=>l(i).values[e.keyName][e.config.name]=n),inputId:"config.name",mode:"decimal",class:g({invalid:!l(a).isEmpty(l(a).get(l(i).errors[e.keyName],e.config.name,[]))}),useGrouping:l(a).get(e.config.rules,"comma_separated",!1),minFractionDigits:l(a).get(e.config.rules,"decimal",null),maxFractionDigits:l(a).get(e.config.rules,"decimal",null),onBlur:u[5]||(u[5]=n=>v(e.config))},null,8,["disabled","modelValue","class","useGrouping","minFractionDigits","maxFractionDigits"])):(t(),d(D,{key:2,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[6]||(u[6]=n=>l(i).values[e.keyName][e.config.name]=n),disabled:l(i).formSaving,inputId:"config.name",mode:"currency",class:g({invalid:!l(a).isEmpty(l(a).get(l(i).errors[e.keyName],e.config.name,[]))}),useGrouping:l(a).get(e.config.rules,"comma_separated",!1),currency:e.config.field_type.name=="currency"?l(a).get(l(i).values[e.keyName],e.config.currencySource.field+".code",""):"",currencyDisplay:l(a).get(e.config,"currencySource.concat",""),minFractionDigits:l(a).get(e.config.rules,"decimal",null),maxFractionDigits:l(a).get(e.config.rules,"decimal",null),onBlur:u[7]||(u[7]=n=>v(e.config))},null,8,["modelValue","disabled","class","useGrouping","currency","currencyDisplay","minFractionDigits","maxFractionDigits"])),(t(!0),m(c,null,s(l(a).get(l(i).errors[e.keyName],e.config.name,[]),(n,o)=>(t(),m("small",{class:"errMsg",key:o},f(n),1))),128))],2)):e.config.field_type.name=="date"?(t(),m("div",ne,[e.type!="tableForm"?(t(),m("label",{key:0,for:e.config.name},f(e.config.label),9,ie)):k("",!0),N(R,{class:g(["w-full",{invalid:!l(a).isEmpty(l(a).get(l(i).errors[e.keyName],e.config.name,[])),required:l(a).get(e.config.rules,"required",!1)}]),disabled:l(i).formSaving,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[8]||(u[8]=n=>l(i).values[e.keyName][e.config.name]=n),clearable:"",type:l(a).get(e.config.rules,"date_selection","date"),format:l(a).get(e.config.rules,"date_selection","date")=="month"?"MMM YYYY":l(a).get(e.config.rules,"date_selection","date")=="week"?"YYYY [w]ww":"MM/DD/YYYY","value-format":"YYYY-MM-DD",onChange:u[9]||(u[9]=n=>v(e.config))},null,8,["disabled","modelValue","class","type","format"]),(t(!0),m(c,null,s(l(a).get(l(i).errors[e.keyName],e.config.name,[]),(n,o)=>(t(),m("small",{class:"errMsg",key:o},f(n),1))),128))])):e.config.field_type.name=="richTextBox"?(t(),m("div",{key:4,class:g(["fieldInput flex flex-column",{invalid:!l(a).isEmpty(l(a).get(l(i).errors[e.keyName],e.config.name,[])),required:l(a).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(t(),m("label",{key:0,for:e.config.name},f(e.config.label),9,te)):k("",!0),N(l(z),{class:"required","api-key":C.value,init:{plugins:["lists link image paste help wordcount table"],menubar:!1,toolbar:"undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | image table"}},null,8,["api-key"]),(t(!0),m(c,null,s(l(a).get(l(i).errors[e.keyName],e.config.name,[]),(n,o)=>(t(),m("small",{class:"errMsg",key:o},f(n),1))),128))],2)):e.config.field_type.name=="longText"?(t(),m("div",{key:5,class:g(["fieldInput flex flex-column",{invalid:!l(a).isEmpty(l(a).get(l(i).errors[e.keyName],e.config.name,[])),required:l(a).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(t(),m("label",{key:0,for:e.config.name},f(e.config.label),9,ue)):k("",!0),N(l(z),{"api-key":C.value,init:{plugins:["lists link image paste help wordcount"],menubar:!1,toolbar:"undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent"}},null,8,["api-key"]),(t(!0),m(c,null,s(l(a).get(l(i).errors[e.keyName],e.config.name,[]),(n,o)=>(t(),m("small",{class:"errMsg",key:o},f(n),1))),128))],2)):e.config.field_type.name=="boolean"?(t(),m("div",{key:6,class:g(["fieldInput checkbox",{required:l(a).get(e.config.rules,"required",!1)}])},[l(a).get(e.config.rules,"switch",!1)?(t(),d(A,{key:0,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[10]||(u[10]=n=>l(i).values[e.keyName][e.config.name]=n),disabled:l(i).formSaving,inputId:e.config.name},null,8,["modelValue","disabled","inputId"])):(t(),d(E,{key:1,inputId:e.config.name,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[11]||(u[11]=n=>l(i).values[e.keyName][e.config.name]=n),binary:!0,disabled:l(i).formSaving},null,8,["inputId","modelValue","disabled"])),e.type!="tableForm"?(t(),m("label",{key:2,for:e.config.name},f(e.config.label),9,me)):k("",!0)],2)):e.config.field_type.name=="picklist"?(t(),m("div",{key:7,class:g(["fieldInput flex flex-column",{required:l(a).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(t(),m("label",{key:0,for:e.config.name},f(e.config.label),9,oe)):k("",!0),l(a).get(e.config.rules,"checkbox",!1)||l(a).get(e.config.rules,"checkbox_inline",!1)||l(a).get(e.config.rules,"radiobutton",!1)||l(a).get(e.config.rules,"radiobutton_inline",!1)?(t(),m("div",{key:1,class:g(l(a).get(e.config.rules,"checkbox_inline",!1)||l(a).get(e.config.rules,"radiobutton_inline",!1)?"card flex flex-wrap justify-content-center gap-3":"")},[(t(!0),m(c,null,s(l(V)(e.config.listName),n=>(t(),m("div",{key:n._id,class:g(["flex align-items-center",l(a).get(e.config.rules,"checkbox",!1)||l(a).get(e.config.rules,"radiobutton",!1)?"mb-1 mt-1 ml-3":""])},[l(a).get(e.config.rules,"checkbox",!1)||l(a).get(e.config.rules,"checkbox_inline",!1)?(t(),d(E,{key:0,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[12]||(u[12]=o=>l(i).values[e.keyName][e.config.name]=o),inputId:n._id,name:"category",value:n,disabled:l(i).formSaving},null,8,["modelValue","inputId","value","disabled"])):(t(),d($,{key:1,inputId:n._id,name:"dynamic",value:n,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[13]||(u[13]=o=>l(i).values[e.keyName][e.config.name]=o),disabled:l(i).formSaving},null,8,["inputId","value","modelValue","disabled"])),S("label",{for:n._id,class:"ml-1"},f(n.value),9,fe)],2))),128))],2)):l(a).get(e.config.rules,"ss_list_view",!1)||l(a).get(e.config.rules,"ms_list_view",!1)?(t(),d(h,{key:2,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[14]||(u[14]=n=>l(i).values[e.keyName][e.config.name]=n),disabled:l(i).formSaving,options:l(V)(e.config.listName),multiple:l(a).get(e.config.rules,"ms_list_view",!1),optionLabel:"value",class:"w-full mt-2 mb-2"},null,8,["modelValue","disabled","options","multiple"])):(t(),d(U,{key:3,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[15]||(u[15]=n=>l(i).values[e.keyName][e.config.name]=n),class:g([{invalid:!l(a).isEmpty(l(a).get(l(i).errors[e.keyName],e.config.name,[]))},"w-full"]),multiple:l(q)(e.config.rules),"collapse-tags":l(q)(e.config.rules),"collapse-tags-tooltip":l(q)(e.config.rules),placeholder:"Select",clearable:"",filterable:"",disabled:l(i).formSaving,loading:w.value,size:e.small?"small":"",onVisibleChange:O,onChange:u[16]||(u[16]=n=>v(e.config))},{loading:x(()=>[de]),default:x(()=>[(t(!0),m(c,null,s(l(V)(e.config.listName),n=>(t(),d(M,{key:n._id,label:n.value,value:n},{default:x(()=>[S("span",ge,f(n.value),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","class","multiple","collapse-tags","collapse-tags-tooltip","disabled","loading","size"])),(t(!0),m(c,null,s(l(a).get(l(i).errors[e.keyName],e.config.name,[]),(n,o)=>(t(),m("small",{class:"errMsg mt-1",key:o},f(n),1))),128))],2)):e.config.field_type.name=="lookupModel"?(t(),m("div",{key:8,class:g(["fieldInput flex flex-column",{required:l(a).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(t(),m("label",{key:0,for:e.config.name},f(e.config.label),9,ce)):k("",!0),l(a).get(e.config.rules,"ss_dropdown",!1)||l(a).get(e.config.rules,"ms_dropdown",!1)?(t(),m(c,{key:1},[l(I)(e.config.uniqueName,"group")?(t(),d(U,{key:0,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[18]||(u[18]=n=>l(i).values[e.keyName][e.config.name]=n),disabled:l(i).formSaving,loading:L.value,size:e.small?"small":"",class:g([{invalid:!l(a).isEmpty(l(a).get(l(i).errors[e.keyName],e.config.name,[]))},"w-full"]),placeholder:"Select",clearable:"",filterable:""},{default:x(()=>[(t(!0),m(c,null,s(l(I)(e.config.uniqueName,"options"),n=>(t(),d(J,{key:n.label,label:n.label,onChange:u[17]||(u[17]=o=>v(e.config))},{default:x(()=>[(t(!0),m(c,null,s(n.options,o=>(t(),d(M,{key:o._id,label:o.value,value:o},null,8,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","disabled","loading","size","class"])):(t(),d(U,{key:1,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[19]||(u[19]=n=>l(i).values[e.keyName][e.config.name]=n),disabled:l(i).formSaving,loading:L.value,size:e.small?"small":"",class:g(["w-full",{invalid:!l(a).isEmpty(l(a).get(l(i).errors[e.keyName],e.config.name,[]))}]),placeholder:"Select",clearable:"",filterable:"",onChange:u[20]||(u[20]=n=>v(e.config))},{default:x(()=>[(t(!0),m(c,null,s(l(I)(e.config.uniqueName,"options"),n=>(t(),d(M,{key:n._id,label:n.value,value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled","loading","size","class"]))],64)):l(a).get(e.config.rules,"checkbox",!1)||l(a).get(e.config.rules,"checkbox_inline",!1)||l(a).get(e.config.rules,"radiobutton",!1)||l(a).get(e.config.rules,"radiobutton_inline",!1)?(t(),m("div",{key:2,class:g(l(a).get(e.config.rules,"checkbox_inline",!1)||l(a).get(e.config.rules,"radiobutton_inline",!1)?"card flex flex-wrap justify-content-center gap-3":"")},[(t(!0),m(c,null,s(l(I)(e.config.uniqueName,"options"),n=>(t(),m("div",{key:n._id,class:g(["flex align-items-center",l(a).get(e.config.rules,"checkbox",!1)||l(a).get(e.config.rules,"radiobutton",!1)?"mb-1 mt-1 ml-3":""])},[l(a).get(e.config.rules,"checkbox",!1)||l(a).get(e.config.rules,"checkbox_inline",!1)?(t(),d(E,{key:0,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[21]||(u[21]=o=>l(i).values[e.keyName][e.config.name]=o),inputId:n._id,name:"category",value:n,disabled:l(i).formSaving},null,8,["modelValue","inputId","value","disabled"])):(t(),d($,{key:1,inputId:n._id,name:"dynamic",value:n,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[22]||(u[22]=o=>l(i).values[e.keyName][e.config.name]=o),disabled:l(i).formSaving},null,8,["inputId","value","modelValue","disabled"])),S("label",{for:n._id,class:"ml-1"},f(n.value),9,se)],2))),128))],2)):l(a).get(e.config.rules,"ss_list_view",!1)||l(a).get(e.config.rules,"ms_list_view",!1)?(t(),d(h,{key:3,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[23]||(u[23]=n=>l(i).values[e.keyName][e.config.name]=n),options:l(I)(e.config.uniqueName,"options"),multiple:l(a).get(e.config.rules,"ms_list_view",!1),optionLabel:"value",class:"w-full mt-2 mb-2"},null,8,["modelValue","options","multiple"])):(t(),d(l(T),{key:4,field:e.config,keyName:e.keyName,inline:e.inline,module:e.module,entity:e.entity,onChangeValue:u[24]||(u[24]=n=>v(e.config))},null,8,["field","keyName","inline","module","entity"])),(t(!0),m(c,null,s(l(a).get(l(i).errors[e.keyName],e.config.name,[]),(n,o)=>(t(),m("small",{class:"errMsg",key:o},f(n),1))),128))],2)):(t(),m("div",{key:9,class:g(["fieldInput flex flex-column",{required:l(a).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(t(),m("label",{key:0,for:e.config.name},f(e.config.label),9,re)):k("",!0),N(j,{id:e.config.name,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[25]||(u[25]=n=>l(i).values[e.keyName][e.config.name]=n)},null,8,["id","modelValue"])],2))}}};export{Ne as default};
