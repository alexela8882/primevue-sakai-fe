import{_ as qe,c as h,o as s,j as l,f as a,M as We,a as pe,O as Je,B as ve,s as E,r as c,v as K,I as S,J as T,N as Ge,u as He,K as Ke,G as Qe,E as Xe,e,F as f,k as g,n as Ye,t as u,i,m as p,w as d,d as k,S as P,g as Ze}from"./index-acce2284.js";import{R as et}from"./RdBreadCrumbs-335ecb95.js";import{D as tt}from"./DataTableLoader-da0147f9.js";import{T as me}from"./TwoColumnList-7f86654a.js";import{u as st}from"./index-5c088f96.js";const lt={};function at(W,B){const y=h("Skeleton");return s(),l("div",null,[a(y,{class:"mb-2",borderRadius:"16px"}),a(y,{width:"10rem",class:"mb-2",borderRadius:"16px"}),a(y,{width:"5rem",borderRadius:"16px",class:"mb-2"}),a(y,{height:"2rem",class:"mb-2",borderRadius:"16px"}),a(y,{width:"10rem",height:"4rem",borderRadius:"16px"})])}const _e=qe(lt,[["render",at]]),ot=We("moduleFileStore",()=>{pe();const W=Je(),B=ve();E(W),E(B);const y=c(!1),R=c(!1),O=c(!1),V=c([]),j=c([{categoryValue:0,items:[{id:1,label:"Test 1",date:"Jan 23, 2023",size:"55kb",type:"jpg",selected:!1},{id:2,label:"Test 2",date:"Aug 01, 2023",size:"45kb",type:"jpg",selected:!1},{id:3,label:"Test 3",date:"Nov 23, 2023",size:"100kb",type:"jpg",selected:!1},{id:4,label:"Test 4",date:"Sept 23, 2023",size:"1mb",type:"png",selected:!1},{id:5,label:"Test 5",date:"Jan 06, 2023",size:"2.3mb",type:"jpg",selected:!1},{id:6,label:"Test 6",date:"March 24, 2023",size:"50kb",type:"jpeg",selected:!1},{id:7,label:"Test 7",date:"Nov 23, 2023",size:"1kb",type:"jpeg",selected:!1},{id:8,label:"Test 8",date:"Nov 23, 2023",size:"0kb",type:"png",selected:!1},{id:9,label:"Test 9",date:"Nov 23, 2023",size:"90kb",type:"png",selected:!1},{id:10,label:"Test 10",date:"Nov 23, 2023",size:"1.1mb",type:"jpg",selected:!1},{id:11,label:"Test 11",date:"Nov 23, 2023",size:"1.1mb",type:"jpg",selected:!1},{id:12,label:"Test 12",date:"Dec 23, 2023",size:"1.1mb",type:"jpg",selected:!1}]},{categoryValue:2,items:[{label:"Test 1",date:"Nov 23, 2023",size:"55kb",file_type:"jpg"}]}]),$=c({}),J=K(()=>V.value),F=K(()=>j.value),r=K(()=>$.value);return{fileLoading:y,fileDialog:R,fileDialogSwitch:O,getModuleFiles:J,getFiles:F,getFile:r,addModuleFiles:async N=>{N.map(x=>V.value.push(x))}}});const it={key:0,class:"flex align-items-center justify-content-center",style:{height:"60vh !important"}},nt={key:1},dt={style:{position:"sticky !important",top:"72px","z-index":"2 !important"},class:"bg-white px-5 py-3 mb-5 border-round-xl flex align-items-center justify-content-between shadow-2"},ct={class:"flex"},rt={key:0,class:"flex flex-column text-md mr-4"},ut={key:0},mt={class:"flex"},_t={class:"font-bold text-md"},pt={key:1},vt={class:"font-bold text-md"},ft={key:0,class:"flex flex-column text-md mx-4"},gt={class:"font-bold text-md"},ht={class:"grid"},bt={class:"col-7"},yt={class:"p-3 bg-white border-round-xl shadow-2"},xt={class:"flex flex-column gap-3"},kt={key:0},wt={class:"text-2xl font-bold"},Lt={key:0},Nt=e("div",{class:"material-icons cursor-pointer"},"playlist_add",-1),St=[Nt],Tt={class:"flex flex-column px-3 mt-4"},Mt={key:0},Dt={key:0},It=["id"],Et=["onClick"],Rt=e("i",{class:"pi pi-eye"},null,-1),jt={key:1},Ft={key:1},Ct={class:"my-4"},zt={class:"my-4"},Pt={class:"my-4"},Bt={class:"col-5"},Ot={style:{position:"sticky !important",top:"145px !important",height:"75vh !important"},class:"flex flex-column gap-4 overflow-scroll p-1"},Vt={class:"bg-white border-round-xl shadow-2"},$t={class:"p-3"},Ut={class:"flex align-items-center justify-content-between"},At=e("div",{class:"text-xl font-bold text-primary"},"Activity",-1),qt={class:"p-inputgroup"},Wt={class:"flex flex-column gap-1 mb-6"},Jt={class:"text-sm text-900"},Gt={key:0},Ht={class:"text-sm text-900 ml-2"},Kt=e("p",{class:"m-0 mt-3"}," Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. ",-1),Qt={class:"bg-white border-round-xl shadow-2"},Xt={class:"p-3"},Yt={class:"flex justify-content-between align-items-center text-xl font-bold text-primary"},Zt=e("div",null,"Files",-1),es={class:"mt-5 flex flex-column gap-2 text-700"},ts=e("div",{class:"text-lg font-bold"},"Upload files",-1),ss=e("div",{class:""},"only .jpg and .png files. 5 MB max file size.",-1),ls={key:0},as={key:0},os={class:"border-round border-1 border-orange-300 p-2 flex align-items-center justify-content-between"},is={class:"flex align-items-center gap-3"},ns={href:"javascript: void(0);"},ds={class:"text-700"},cs=e("div",{class:"text-orange-500"},"Pending",-1),rs=["onClick"],us={class:"border-round border-1 border-300 p-2 flex align-items-center justify-content-between"},ms={class:"flex align-items-center gap-3"},_s={href:"javascript: void(0);"},ps={class:"text-700"},vs=["onClick"],fs=e("div",{class:"bg-white border-round-xl shadow-2"},[e("div",{class:"p-3 h-15rem"},[e("div",{class:"text-xl font-bold text-primary"},"Reminders")])],-1),gs={__name:"ShowDetail",setup(W){const B=S(()=>T(()=>import("./MailboxThreads-47bb7e88.js"),["assets/MailboxThreads-47bb7e88.js","assets/index-acce2284.js","assets/index-cb49da02.css","assets/ShowInquiryDetail-d2b44956.css"])),y=S(()=>T(()=>import("./DynamicDataTableMain-30d92c5d.js"),["assets/DynamicDataTableMain-30d92c5d.js","assets/index-acce2284.js","assets/index-cb49da02.css","assets/Validate-d0c8012e.js","assets/DynamicDataTableMain-5df8962c.css"]));S(()=>T(()=>import("./SalesTab-a445979b.js"),["assets/SalesTab-a445979b.js","assets/index-acce2284.js","assets/index-cb49da02.css","assets/index-5c088f96.js"])),S(()=>T(()=>import("./ServicesTab-fd598742.js"),["assets/ServicesTab-fd598742.js","assets/index-acce2284.js","assets/index-cb49da02.css","assets/index-5c088f96.js"]));const R=S(()=>T(()=>import("./RelatedListPanel-0393ac41.js"),["assets/RelatedListPanel-0393ac41.js","assets/index-acce2284.js","assets/index-cb49da02.css","assets/RelatedListPanel-70fb7b80.css"])),O=S(()=>T(()=>import("./SectionFields-eed6b41a.js"),["assets/SectionFields-eed6b41a.js","assets/index-acce2284.js","assets/index-cb49da02.css","assets/index-5c088f96.js"])),V=S(()=>T(()=>import("./UploadFileContent-17482fd6.js"),["assets/UploadFileContent-17482fd6.js","assets/index-acce2284.js","assets/index-cb49da02.css","assets/RdBreadCrumbs-335ecb95.js","assets/RdBreadCrumbs-d49d3125.css","assets/DataTableLoader-da0147f9.js","assets/TwoColumnList-7f86654a.js","assets/index-5c088f96.js","assets/UploadFileContent-bb5410c6.css"])),j=c(null),$=c(),J=pe(),F=c(0),r=Ge();He();const G=c(!0),N=c(),x=c(),Q=c();c();const X=c(),Y=c(),Z=c([]),ee=ve(),te=st(),se=ot(),le=Ke(),{fetchModule:fe,fetchLinkedModuleData:ge,fetchBaseModule:he}=ee,{getModule:U,getLinkedModuleData:be,getBaseModule:ae,getFieldDetailsById:hs}=E(ee),{itemLoading:ye,relatedListLoading:bs,getItem:ys,_relatedLists:xe,getRelatedLists:oe,_getRelatedOrderedLists:C,getRelatedListsByCname:w,_getItemPanels:ke,getItemPanels:we,getItemValueByName:A}=E(te),{fetchItem:Le,fetchItemRelatedList:Ne,fetchItemRelatedLists:Se}=te,{fileLoading:xs,fileDialogSwitch:Te,fileDialog:ie,getFiles:H,getModuleFiles:q}=E(se),{addModuleFiles:Me}=se,{addTab:De,toggleWindows:Ie}=le,{getTabs:ne}=E(le),Ee=c([{label:`${r.params.name}`,to:`/modules/${r.params.name}/${r.params.id}`},{label:`${r.params.name} details`,to:null}]),Re=c([{label:"Options",items:[{label:"Add files",icon:"pi pi-plus",command:()=>{Te.value=!0,ie.value=!0,console.log(ie.value)}}]}]),je=n=>{F.value=n.index},de=async n=>{const o={moduleName:r.params.name,panelName:n.panelName};await Ne(o)},Fe=n=>{if(n){const o=n.getBoundingClientRect();return o.top>=0&&o.left>=0&&o.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&o.right<=(window.innerWidth||document.documentElement.clientWidth)}},ce=()=>{ke.value(U.value.panels).map(o=>{const m=document.getElementById(`rl-panel-${o._id}`);Fe(m)&&(console.log(`Element with ${o._id} id is visible`),de(o))})},Ce=async n=>{const o=n.files,m=[],L=H.value.length>0?H.value[H.value.length-1]:0;o.map(M=>{let D=Object.assign({},{id:L+1,label:M.name,date:Date.now(),size:M.size,type:M.type,selected:!1});m.push(D)}),Me(m),J.add({severity:"info",summary:"Success",detail:"File Uploaded",life:3e3})},ze=n=>{console.log(n)},Pe=n=>{const o=q.value.findIndex(m=>m.id===n.id);q.value.splice(o,1)},Be=n=>{let o=Object.assign({},{type:"module-form",style:"window",name:`${n.name}-${r.params.pageid}-window-edit-form`,label:`${n.label} Form`,_module:n.name,expanded:!0,opened:!1,opened_order:null});const m=ne.value.findIndex(L=>L.name===o.name);m===-1?De(o,!0):Ie(ne.value[m])};return Qe(oe,(n,o)=>{n&&(X.value=n)}),Xe(async()=>{await he(r.params.id),await fe({moduleName:r.params.name});const n={module:"inquiries",link_field:"link_id",link_id:r.params.pageid};await ge(n),await Le(r.params),console.log(r.params),console.log(U.value.relatedLists);const o=Object.assign({},{id:r.params.id,name:r.params.name,pageid:r.params.pageid,moduleName:r.params.name,base:r.params.pageid,relatedLists:U.value.relatedLists});await Se(o),G.value=ye.value,N.value=ae.value,x.value=U.value,Q.value=we.value(null),X.value=oe.value,Y.value=Q.value.filter(m=>m.controllerMethod.includes("@index")),Z.value=C.value.filter(m=>m.entityName==="Contact"||m.entityName==="Unit"),j.value=be.value,console.log(xe.value),console.log(C.value),console.log(Z.value),window.addEventListener("scroll",ce),ce()}),(n,o)=>{const m=h("ProgressSpinner"),L=h("Button"),M=h("Panel"),D=h("TabPanel"),Oe=h("TabView"),Ve=h("Dropdown"),re=h("font-awesome-icon"),$e=h("Menu"),ue=h("Image"),Ue=h("FileUpload");return s(),l("div",null,[a(et,{bcrumbs:Ee.value},null,8,["bcrumbs"]),G.value?(s(),l("div",it,[a(m)])):(s(),l("div",nt,[e("div",dt,[e("div",ct,[(s(!0),l(f,null,g(x.value.fields,(t,_)=>(s(),l("div",{key:_},[e("div",{class:Ye(`${x.value.fields.length===_+1&&"mr-8"}`)},[t.title?(s(),l("div",rt,[t.groupWith?(s(),l("div",ut,[e("div",null,u(t.groupLabel),1),e("div",mt,[(s(!0),l(f,null,g(t.groupWith,(b,z)=>(s(),l("div",{key:z},[e("div",_t,u(i(A)(b))+u(t.fieldGlue===" "?" ":t.fieldGlue),1)]))),128))])])):(s(),l("div",pt,[e("div",null,u(t.label),1),e("div",vt,u(i(A)(t.name)),1)]))])):p("",!0)],2)]))),128)),(s(!0),l(f,null,g(x.value.fields,(t,_)=>(s(),l("div",{key:_},[t.header?(s(),l("div",ft,[e("div",null,u(t.label),1),e("div",gt,u(i(A)(t.name)?i(A)(t.name):null),1)])):p("",!0)]))),128))]),e("div",null,[a(L,{label:"Edit",size:"large",onClick:o[0]||(o[0]=t=>Be(i(ae))),class:"px-6 border-round-xl"})])]),e("div",ht,[e("div",bt,[e("div",yt,[a(Oe,{onTabChange:je},{default:d(()=>[a(D,{header:"Details"},{default:d(()=>[e("div",null,[e("div",xt,[(s(!0),l(f,null,g(Y.value,(t,_)=>(s(),l("div",{key:_,class:"flex flex-column gap-1"},[(s(!0),l(f,null,g(t.sections,(b,z)=>(s(),l("div",{key:z,class:"shadow-1 mt-4"},[a(M,{class:"detail-page-panel"},{header:d(()=>[b.sectionLabel?(s(),l("div",kt,[e("div",wt,u(b.sectionLabel),1),i(w)(t.panelName)?(s(),l("div",Lt,St)):p("",!0)])):p("",!0)]),default:d(()=>[e("div",Tt,[t.controllerMethod.indexOf("@show")>-1?(s(),l("div",Mt,[i(w)(t.panelName)?(s(),l("div",Dt,[i(w)(t.panelName)?(s(),k(P,{key:0},{fallback:d(()=>[a(tt)]),default:d(()=>[(s(),k(i(y),{key:t._id,moduleId:t._id,moduleEntityName:t.entityName,moduleName:i(w)(t.panelName).link,moduleLabel:i(w)(t.panelName).label,fields:i(w)(t.panelName).fields.data,data:i(w)(t.panelName).collection.data,pagination:i(w)(t.panelName).collection.meta,collectionLoading:!1},null,8,["moduleId","moduleEntityName","moduleName","moduleLabel","fields","data","pagination"]))]),_:2},1024)):p("",!0)])):(s(),l("div",{key:1,id:`rl-panel-${t._id}`},[e("div",{onClick:v=>de(t),class:"flex align-items-center gap-2 cursor-pointer text-700"},[Rt,Ze(" View data ")],8,Et)],8,It))])):(s(),l("div",jt,[b.field_ids&&b.field_ids.length>0?(s(),k(P,{key:0},{fallback:d(()=>[a(me)]),default:d(()=>[a(i(O),{newModuleFields:x.value.fields,fieldIds:b.field_ids},null,8,["newModuleFields","fieldIds"])]),_:2},1024)):p("",!0),b.additional_fields.length>0?(s(),l("div",Ft,[(s(!0),l(f,null,g(b.additional_fields,(v,I)=>(s(),l("div",{key:I},[v.ids&&v.ids.length>0?(s(),k(P,{key:0},{fallback:d(()=>[a(me)]),default:d(()=>[a(i(O),{newModuleFields:x.value.fields,fieldIds:v.ids},null,8,["newModuleFields","fieldIds"])]),_:2},1024)):p("",!0)]))),128))])):p("",!0)]))])]),_:2},1024)]))),128))]))),128)),(s(!0),l(f,null,g(i(C).filter(t=>t.entityName==="Contact"||t.entityName==="Unit"),(t,_)=>(s(),l("div",{key:_},[e("div",Ct,[a(i(R),{relatedList:t},null,8,["relatedList"])])]))),128))])])]),_:1}),N.value&&N.value.name==="accounts"?(s(),k(D,{key:0,header:"Sales"},{default:d(()=>[e("div",null,[F.value===1?(s(),k(P,{key:0},{fallback:d(()=>[a(_e,{class:"mt-4"})]),default:d(()=>[(s(!0),l(f,null,g(i(C).filter(t=>t.entityName==="SalesOpportunity"||t.entityName==="SalesOpportunity"),(t,_)=>(s(),l("div",{key:_},[e("div",zt,[a(i(R),{relatedList:t},null,8,["relatedList"])])]))),128))]),_:1})):p("",!0)])]),_:1})):p("",!0),N.value&&N.value.name==="accounts"?(s(),k(D,{key:1,header:"Services"},{default:d(()=>[e("div",null,[F.value===2?(s(),k(P,{key:0},{fallback:d(()=>[a(_e,{class:"mt-4"})]),default:d(()=>[(s(!0),l(f,null,g(i(C).filter(t=>t.entityName==="DefectReport"||t.entityName==="ServiceJob"||t.entityName==="ServiceSchedule"||t.entityName==="BreakdownLog"||t.entityName==="ServiceReport"),(t,_)=>(s(),l("div",{key:_},[e("div",Pt,[a(i(R),{relatedList:t},null,8,["relatedList"])])]))),128))]),_:1})):p("",!0)])]),_:1})):p("",!0),j.value?(s(),k(D,{key:2,header:"Email"},{default:d(()=>[e("div",null,[a(i(B),{threads:j.value.conversations.slice().reverse()},null,8,["threads"])])]),_:1})):p("",!0)]),_:1})])]),e("div",Bt,[e("div",Ot,[e("div",Vt,[e("div",$t,[e("div",Ut,[At,e("div",null,[e("div",qt,[a(Ve,{placeholder:"Filters",class:"border-round-xl border-primary w-full md:w-12rem"}),a(L,{label:"add activity",class:"ml-3 border-round-xl px-4"})])])])]),e("div",Wt,[(s(),l(f,null,g(["October 2023","November 2023","December 2023"],(t,_)=>a(M,{key:_,toggleable:"",collapsed:"",class:"activity-panel"},{header:d(()=>[e("div",Jt,[_===0?(s(),l("span",Gt,"This months")):p("",!0)])]),togglericon:d(()=>[a(re,{icon:"fa-solid fa-caret-down",style:{"font-size":"1.5rem"}})]),icons:d(()=>[e("div",Ht,u(t),1)]),default:d(()=>[Kt]),_:2},1024)),64))])]),e("div",Qt,[e("div",Xt,[e("div",Yt,[Zt,e("div",null,[e("div",{onClick:o[1]||(o[1]=t=>$.value.toggle(t)),class:"cursor-pointer"},[a(re,{icon:"fa-regular fa-square-caret-down",style:{"font-size":"1.5rem"}})]),a($e,{ref_key:"fileMenu",ref:$,id:"overlay_menu",model:Re.value,popup:!0},null,8,["model"])])]),e("div",es,[ts,ss,e("div",null,[a(Ue,{name:"demo[]",url:"/api/upload",customUpload:"",onUploader:o[2]||(o[2]=t=>Ce(t)),onError:o[3]||(o[3]=t=>ze(t)),multiple:!0,accept:"image/*",maxFileSize:5e6},{empty:d(()=>[i(q).length<=0?(s(),l("p",ls,"Drag and drop files to here to upload.")):p("",!0)]),content:d(({files:t,uploadedFiles:_,removeUploadedFileCallback:b,removeFileCallback:z})=>[t.length>0?(s(),l("div",as,[(s(!0),l(f,null,g(t,(v,I)=>(s(),l("div",{key:I,class:"mb-2"},[e("div",os,[e("div",is,[a(ue,{src:"/demo/images/galleria/galleria6s.jpg",alt:"dummy-img",width:"50",class:"cursor-pointer"}),e("div",null,[e("a",ns,u(v.name),1),e("div",ds,u(Date.now())+" • "+u(v.size)+" • "+u(v.type),1),cs])]),e("div",{onClick:Ae=>z(I),class:"cursor-pointer mr-2"},[a(L,{icon:"pi pi-times",severity:"danger",text:"",rounded:"","aria-label":"Cancel"})],8,rs)])]))),128))])):p("",!0),(s(!0),l(f,null,g(i(q),(v,I)=>(s(),l("div",{key:I,class:"mb-2"},[e("div",us,[e("div",ms,[a(ue,{src:"/demo/images/galleria/galleria6s.jpg",alt:"dummy-img",width:"50",class:"cursor-pointer"}),e("div",null,[e("a",_s,u(v.label),1),e("div",ps,u(v.date)+" • "+u(v.size)+" • "+u(v.type),1)])]),e("div",{onClick:Ae=>Pe(v),class:"cursor-pointer mr-2"},[a(L,{icon:"pi pi-times",severity:"danger",text:"",rounded:"","aria-label":"Cancel"})],8,vs)])]))),128))]),_:1})])])])]),fs])])])])),a(i(V),{module:x.value},null,8,["module"])])}}},Ts=Object.freeze(Object.defineProperty({__proto__:null,default:gs},Symbol.toStringTag,{value:"Module"}));export{Ts as S,ot as u};
