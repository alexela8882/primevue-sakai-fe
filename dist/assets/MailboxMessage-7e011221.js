import{C as h,_ as M,r as v,v as I,s as k,A as z,c,P as N,o as n,j as i,e,t as r,Q as O,m as g,f as l,F as w,k as P,g as U,w as f,i as p,p as $}from"./index-26e6ef51.js";import{u as F}from"./index-330292a9.js";const H={class:"w-full"},J={key:0,class:"flex flex-column gap-4"},Q={class:"flex justify-content-between"},Y={class:"flex align-items-center gap-2"},G={class:"font-bold text-2xl"},K={key:0,class:"flex align-items-center gap-2"},W=e("span",{class:"text-xl"}," (Converted to inquiry)",-1),X={class:"pi pi-reply cursor-pointer font-bold text-primary"},Z={class:"flex align-items-center gap-3"},ee={class:"flex align-items-center justify-content-between"},te={class:"flex align-items-center mb-5 gap-2"},se={key:0},oe={class:"m-0"},le=["innerHTML"],ae={class:"m-0"},ne={class:"flex align-items-center text-2xl"},ie={class:"mailbox-dialog-footer surface-50"},re={key:0,class:"flex align-items-center justify-content-end gap-2 p-2"},me={__name:"MailboxMessage",props:{token:String,message:Object},setup(t){const R=t,T=h(()=>M(()=>import("./mailboxReply-e940a6f3.js"),["assets/mailboxReply-e940a6f3.js","assets/index-26e6ef51.js","assets/index-d1288d3d.css","assets/index-330292a9.js"])),C=h(()=>M(()=>import("./ConvertMailboxMessage-45fa7422.js"),["assets/ConvertMailboxMessage-45fa7422.js","assets/index-26e6ef51.js","assets/index-d1288d3d.css","assets/index.esm-42bddd7d.js","assets/index-7d13fc53.js","assets/index-330292a9.js"])),_=v(!1),m=v(!1),b=v(),D=v([{label:"Leads",name:"leads",command:s=>{u(s.item)}},{label:"Defect Reports",name:"defectreports",command:s=>{u(s.item)}},{label:"Breakdown Log",name:"breakdownlogs",command:s=>{u(s.item)}},{label:"Job Request",name:"servicejobs",command:s=>{u(s.item)}}]),S=F(),A=I(),{folderMessageReplyLoading:B}=k(S),{convertMailboxDialog:d}=k(A),L=async()=>{m.value=!0},u=s=>{console.log(R.message),d.value=!0,b.value=s};return z(()=>B.value,(s,o)=>{s||(m.value=!1)}),(s,o)=>{const j=c("font-awesome-icon"),V=c("SplitButton"),q=c("Avatar"),x=c("Dialog"),y=c("Skeleton"),E=N("tooltip");return n(),i(w,null,[e("div",H,[t.message?(n(),i("div",J,[e("div",Q,[e("div",Y,[e("span",G,r(t.message.subject),1),t.message.convertedToInquiry?(n(),i("span",K,[W,O(e("span",X,null,512),[[E,{value:"view inquiry",pt:{arrow:{style:{borderBottomColor:"var(--primary-color)"}},text:"bg-primary font-medium"}},void 0,{bottom:!0}]])])):g("",!0)]),e("div",Z,[e("div",null,[l(j,{onClick:o[0]||(o[0]=a=>L()),icon:"fa-solid fa-reply",class:"cursor-pointer",style:{"font-size":"1.5rem",color:"var(--primary-300)"}})]),e("div",null,[l(V,{model:D.value,disabled:t.message.convertedToInquiry,label:"Convert",outlined:""},null,8,["model","disabled"])])])]),e("div",null,[e("div",ee,[e("div",te,[e("div",null,[l(q,{icon:"pi pi-user",class:"mr-2",shape:"circle",size:"xlarge"})]),e("div",null,[e("div",null,r(t.message.from.emailAddress.name)+" <"+r(t.message.from.emailAddress.address)+"> ",1),e("div",null,[(n(!0),i(w,null,P(t.message.toRecipients.slice(0,2),a=>(n(),i("div",null,[U(" To: "+r(a.emailAddress.address)+" ",1),t.message.toRecipients.length>2?(n(),i("span",se," and "+r(t.message.toRecipients.length-2)+" others ",1)):g("",!0)]))),256))])])])]),e("p",oe,[e("div",{innerHTML:t.message.body.content},null,8,le)])])])):g("",!0)]),l(x,{visible:m.value,"onUpdate:visible":o[1]||(o[1]=a=>m.value=a),maximizable:"",modal:"",header:"You are replying to a mail",style:{width:"50rem"},breakpoints:{"1199px":"75vw","575px":"90vw"}},{default:f(()=>[e("p",ae,[l(p(T),{mail:t.message,token:t.token},null,8,["mail","token"])])]),_:1},8,["visible"]),l(x,{visible:p(d),"onUpdate:visible":o[4]||(o[4]=a=>$(d)?d.value=a:null),modal:"",maximizable:"",style:{width:"60vw"},class:"convert-mailbox-dialog"},{header:f(()=>[e("div",ne,[e("div",null,"Convert to Inquiry — "+r(b.value.label),1)])]),footer:f(()=>[e("div",ie,[_.value?(n(),i("div",re,[l(y,{width:"5rem",height:"2rem"}),l(y,{width:"5rem",height:"2rem"})])):g("",!0)])]),default:f(()=>[l(p(C),{mailboxMessage:t.message,convertModule:b.value,onTriggerDialog:o[2]||(o[2]=a=>d.value=!1),onUpdateTimeout:o[3]||(o[3]=a=>_.value=!1)},null,8,["mailboxMessage","convertModule"])]),_:1},8,["visible"])],64)}}};export{me as default};
