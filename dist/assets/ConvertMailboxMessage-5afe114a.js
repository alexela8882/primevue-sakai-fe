import{r as f,v as B,s as N,A as r,z as h,c as u,o as g,j as x,e as o,f as d,w as k,t as a,i as R,m as j}from"./index-ed3b8c92.js";const I={class:"flex flex-column gap-3 m-4"},S={class:"flex align-items-center"},E=o("label",{class:"ml-2"},"Choose existing",-1),O={class:"flex align-items-center"},$={key:0},q={class:"flex flex-column gap-3 m-4"},z={class:"flex align-items-center"},T=o("label",{class:"ml-2"},"Create new",-1),U={class:"m-4"},A={class:"flex align-items-center justify-content-end my-2 gap-2"},L={__name:"ConvertMailboxMessage",props:{convertModule:Object,mailboxMessage:Object},setup(b){const i=b,l=f(null),s=f(),c=B(),{getEntityByName:m,getCollection:y}=N(c),{fetchModule:w,convertMailboxToInquiry:M}=c,v=async()=>{w(i.convertModule.name)},V=()=>{const n=m.value(i.convertModule.name);if(s.value==1){const e=Object.assign({},{source_id:"Email",dateRequested:Date.now(),dateResponded:Date.now(),dateResponded:Date.now(),assigned_to_id:l.value.owner_id,description:`This is a test - ${Date.now()}`,type:n.mainEntity,link_id:l.value._id,email_id:i.mailboxMessage.id,conversation_id:i.mailboxMessage.conversationId});M(e)}};return r(()=>s.value,(n,e)=>{n==2&&(l.value=null)}),r(()=>l.value,(n,e)=>{n&&(s.value=1)}),r(()=>i.convertModule,(n,e)=>{console.log(n),v()}),h(()=>{v(),console.log(m.value(i.convertModule.name))}),(n,e)=>{const p=u("RadioButton"),C=u("Dropdown"),D=u("Divider"),_=u("Button");return g(),x("div",null,[o("div",I,[o("div",S,[d(p,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value=t),inputId:"ingredient1",name:"1",value:1,disabled:""},null,8,["modelValue"]),E]),d(C,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=t=>l.value=t),options:R(y).data,optionLabel:"owner_id.email",optionvalue:"_id",filter:"",placeholder:"Select",class:"w-full"},{option:k(t=>[o("div",O,[o("div",null,a(t.option.owner_id.email)+" ("+a(t.option.company)+")",1)])]),_:1},8,["modelValue","options"]),l.value?(g(),x("div",$,[o("div",null,a(l.value.firstName)+" "+a(l.value.lastName),1),o("div",null," Owner: "+a(l.value.owner_id.firstName)+" "+a(l.value.owner_id.lastName),1),o("div",null,"Company: "+a(l.value.company),1),o("div",null,"Status: "+a(l.value.status_id),1),o("div",null,"Country: "+a(l.value.country_id.name),1)])):j("",!0)]),d(D),o("div",q,[o("div",z,[d(p,{modelValue:s.value,"onUpdate:modelValue":e[2]||(e[2]=t=>s.value=t),inputId:"ingredient1",name:"2",value:2},null,8,["modelValue"]),T])]),o("div",U,[o("div",A,[d(_,{onClick:e[3]||(e[3]=t=>n.$emit("trigger-dialog")),outlined:"",label:"Cancel",class:"border-round-3xl py-2 px-4 border-color-primary",size:"small"}),d(_,{onClick:e[4]||(e[4]=t=>V()),disabled:!s.value,label:"Proceed",class:"border-round-3xl py-2 px-4"},null,8,["disabled"])])])])}}};export{L as default};
