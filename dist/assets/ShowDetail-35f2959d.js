import{_ as He,c as y,o as t,j as l,f as o,M as Ke,a as be,O as Xe,B as ye,s as R,r as c,v as Y,N as Ye,u as Ze,K as et,a4 as tt,G as st,E as lt,e,F as v,k as g,n as at,t as m,i as a,m as _,g as he,w as r,d as b,S as P,I,J as F}from"./index-e1fe9d82.js";import{R as ot}from"./RdBreadCrumbs-3b91954c.js";import{D as it}from"./DataTableLoader-ced18b8d.js";import{T as fe}from"./TwoColumnList-1a8e16ce.js";import{u as nt}from"./index-a7f2aeb9.js";const dt={};function rt(W,B){const k=y("Skeleton");return t(),l("div",null,[o(k,{class:"mb-2",borderRadius:"16px"}),o(k,{width:"10rem",class:"mb-2",borderRadius:"16px"}),o(k,{width:"5rem",borderRadius:"16px",class:"mb-2"}),o(k,{height:"2rem",class:"mb-2",borderRadius:"16px"}),o(k,{width:"10rem",height:"4rem",borderRadius:"16px"})])}const ge=He(dt,[["render",rt]]),ct=Ke("moduleFileStore",()=>{be();const W=Xe(),B=ye();R(W),R(B);const k=c(!1),j=c(!1),O=c(!1),V=c([]),J=c([{categoryValue:0,items:[{id:1,label:"Test 1",date:"Jan 23, 2023",size:"55kb",type:"jpg",selected:!1},{id:2,label:"Test 2",date:"Aug 01, 2023",size:"45kb",type:"jpg",selected:!1},{id:3,label:"Test 3",date:"Nov 23, 2023",size:"100kb",type:"jpg",selected:!1},{id:4,label:"Test 4",date:"Sept 23, 2023",size:"1mb",type:"png",selected:!1},{id:5,label:"Test 5",date:"Jan 06, 2023",size:"2.3mb",type:"jpg",selected:!1},{id:6,label:"Test 6",date:"March 24, 2023",size:"50kb",type:"jpeg",selected:!1},{id:7,label:"Test 7",date:"Nov 23, 2023",size:"1kb",type:"jpeg",selected:!1},{id:8,label:"Test 8",date:"Nov 23, 2023",size:"0kb",type:"png",selected:!1},{id:9,label:"Test 9",date:"Nov 23, 2023",size:"90kb",type:"png",selected:!1},{id:10,label:"Test 10",date:"Nov 23, 2023",size:"1.1mb",type:"jpg",selected:!1},{id:11,label:"Test 11",date:"Nov 23, 2023",size:"1.1mb",type:"jpg",selected:!1},{id:12,label:"Test 12",date:"Dec 23, 2023",size:"1.1mb",type:"jpg",selected:!1}]},{categoryValue:2,items:[{label:"Test 1",date:"Nov 23, 2023",size:"55kb",file_type:"jpg"}]}]),E=c({}),$=Y(()=>V.value),G=Y(()=>J.value),z=Y(()=>E.value);return{fileLoading:k,fileDialog:j,fileDialogSwitch:O,getModuleFiles:$,getFiles:G,getFile:z,addModuleFiles:async U=>{U.map(x=>V.value.push(x))}}});const ut={key:0,class:"flex align-items-center justify-content-center",style:{height:"60vh !important"}},mt={key:1},_t={style:{position:"sticky !important",top:"72px","z-index":"2 !important"},class:"bg-white px-5 py-3 mb-5 border-round-xl flex align-items-center justify-content-between shadow-2"},pt={class:"flex"},vt={key:0,class:"flex flex-column text-md mr-4"},ht={key:0},ft={class:"flex"},gt={class:"font-semibold text-md"},bt={key:1},yt={class:"font-semibold text-md"},kt={key:0,class:"flex flex-column text-md mx-4"},xt={key:0,class:"font-semibold text-md"},wt=["href"],Lt=["href"],Nt={class:"grid"},St={class:"col-7"},Mt={class:"p-3 bg-white border-round-xl shadow-2"},Tt={class:"flex flex-column gap-3"},Dt={key:0},It={class:"text-2xl font-bold"},Ft={key:0},Rt=e("div",{class:"material-icons cursor-pointer"},"playlist_add",-1),jt=[Rt],Et={class:"flex flex-column px-3 mt-4"},zt={key:0},Ct={key:0},Pt=["id"],Bt=["onClick"],Ot=e("i",{class:"pi pi-eye"},null,-1),Vt={key:1},$t={key:1},Ut={class:"my-4"},At={class:"my-4"},qt={key:0},Wt=e("div",{class:"mt-4 text-600"},"No records found",-1),Jt=[Wt],Gt={class:"my-4"},Qt={class:"col-5"},Ht={style:{position:"sticky !important",top:"145px !important",height:"75vh !important"},class:"flex flex-column gap-4 overflow-scroll p-1"},Kt={class:"bg-white border-round-xl shadow-2"},Xt={class:"p-3"},Yt={class:"flex align-items-center justify-content-between"},Zt=e("div",{class:"text-xl font-bold text-primary"},"Activity",-1),es={class:"p-inputgroup"},ts={class:"flex flex-column gap-1 mb-6"},ss={class:"text-sm text-900"},ls={key:0},as={class:"text-sm text-900 ml-2"},os=e("p",{class:"m-0 mt-3"}," Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum. ",-1),is={class:"bg-white border-round-xl shadow-2"},ns={class:"p-3"},ds={class:"flex justify-content-between align-items-center text-xl font-bold text-primary"},rs=e("div",null,"Files",-1),cs={class:"mt-5 flex flex-column gap-2 text-700"},us=e("div",{class:"text-lg font-bold"},"Upload files",-1),ms=e("div",{class:""},"only .jpg and .png files. 5 MB max file size.",-1),_s={key:0},ps={key:0},vs={class:"border-round border-1 border-orange-300 p-2 flex align-items-center justify-content-between"},hs={class:"flex align-items-center gap-3"},fs={href:"javascript: void(0);"},gs={class:"text-700"},bs=e("div",{class:"text-orange-500"},"Pending",-1),ys=["onClick"],ks={class:"border-round border-1 border-300 p-2 flex align-items-center justify-content-between"},xs={class:"flex align-items-center gap-3"},ws={href:"javascript: void(0);"},Ls={class:"text-700"},Ns=["onClick"],Ss=e("div",{class:"bg-white border-round-xl shadow-2"},[e("div",{class:"p-3 h-15rem"},[e("div",{class:"text-xl font-bold text-primary"},"Reminders")])],-1),Ms={__name:"ShowDetail",setup(W){const B=I(()=>F(()=>import("./MailboxThreads-65eac5c9.js"),["assets/MailboxThreads-65eac5c9.js","assets/index-e1fe9d82.js","assets/index-40ff91a8.css","assets/ShowInquiryDetail-d2b44956.css"])),k=I(()=>F(()=>import("./DynamicDataTableMain-e1a24736.js"),["assets/DynamicDataTableMain-e1a24736.js","assets/index-e1fe9d82.js","assets/index-40ff91a8.css","assets/Validate-570dbf18.js","assets/DynamicDataTableMain-5df8962c.css"])),j=I(()=>F(()=>import("./RelatedListPanel-32afc4c6.js"),["assets/RelatedListPanel-32afc4c6.js","assets/index-e1fe9d82.js","assets/index-40ff91a8.css","assets/RelatedListPanel-70fb7b80.css"])),O=I(()=>F(()=>import("./SectionFields-f3c836d7.js"),["assets/SectionFields-f3c836d7.js","assets/index-e1fe9d82.js","assets/index-40ff91a8.css","assets/index-a7f2aeb9.js"])),V=I(()=>F(()=>import("./UploadFileContent-5234629a.js"),["assets/UploadFileContent-5234629a.js","assets/index-e1fe9d82.js","assets/index-40ff91a8.css","assets/RdBreadCrumbs-3b91954c.js","assets/RdBreadCrumbs-d49d3125.css","assets/DataTableLoader-ced18b8d.js","assets/TwoColumnList-1a8e16ce.js","assets/index-a7f2aeb9.js","assets/UploadFileContent-bb5410c6.css"])),J=I(()=>F(()=>import("./QuotePDFPreview-7d3c7497.js").then(n=>n.Q),["assets/QuotePDFPreview-7d3c7497.js","assets/index-e1fe9d82.js","assets/index-40ff91a8.css","assets/index-a7f2aeb9.js","assets/QuotePDFPreview-c8962474.css"])),E=c(null),$=c(),G=be(),z=c(0),p=Ye();Ze();const U=c(!0),x=c(),N=c(),Z=c();c();const ee=c(),te=c(),se=c([]),le=c([]),Q=c([]),ae=ye(),oe=nt(),ie=ct(),ne=et(),{fetchModule:ke,fetchLinkedModuleData:xe,fetchBaseModule:we}=ae,{getModule:H,getLinkedModuleData:Le,getBaseModule:de,getFieldDetailsById:Ts}=R(ae),{itemLoading:Ne,relatedListLoading:Ds,getItem:Is,_relatedLists:Fs,getRelatedLists:re,_getRelatedOrderedLists:K,getRelatedListsByCname:w,_getItemPanels:Se,getItemPanels:Me,getItemValueByName:S}=R(oe),{fetchItem:Te,fetchItemRelatedList:De,fetchItemRelatedLists:Ie}=oe,{fileLoading:Rs,fileDialogSwitch:Fe,fileDialog:ce,getFiles:X,getModuleFiles:A}=R(ie),{addModuleFiles:Re}=ie,{addTab:je,toggleWindows:Ee}=ne,{getTabs:ue}=R(ne),{transformLookupDisplay:q,checkFieldIfMultipleSelect:ze}=tt(),Ce=c([{label:`${p.params.name}`,to:`/modules/${p.params.name}/${p.params.id}`},{label:`${p.params.name} details`,to:null}]),Pe=c([{label:"Options",items:[{label:"Add files",icon:"pi pi-plus",command:()=>{Fe.value=!0,ce.value=!0,console.log(ce.value)}}]}]),Be=n=>{z.value=n.index},me=async n=>{const i={moduleName:p.params.name,panelName:n.panelName};await De(i)},Oe=n=>{if(n){const i=n.getBoundingClientRect();return i.top>=0&&i.left>=0&&i.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&i.right<=(window.innerWidth||document.documentElement.clientWidth)}},_e=()=>{Se.value(H.value.panels).map(i=>{const d=document.getElementById(`rl-panel-${i._id}`);Oe(d)&&(console.log(`Element with ${i._id} id is visible`),me(i))})},Ve=async n=>{const i=n.files,d=[],L=X.value.length>0?X.value[X.value.length-1]:0;i.map(T=>{let M=Object.assign({},{id:L+1,label:T.name,date:Date.now(),size:T.size,type:T.type,selected:!1});d.push(M)}),Re(d),G.add({severity:"info",summary:"Success",detail:"File Uploaded",life:3e3})},$e=n=>{console.log(n)},Ue=n=>{const i=A.value.findIndex(d=>d.id===n.id);A.value.splice(i,1)},Ae=n=>{let i=Object.assign({},{type:"module-form",style:"window",name:`${n.name}-${p.params.pageid}-window-edit-form`,label:`${n.label} Form`,_module:n.name,expanded:!0,opened:!1,opened_order:null});const d=ue.value.findIndex(L=>L.name===i.name);d===-1?je(i,!0):Ee(ue.value[d])};return st(re,(n,i)=>{n&&(ee.value=n)}),lt(async()=>{await we(p.params.id),await ke({moduleName:p.params.name});const n={module:"inquiries",link_field:"link_id",link_id:p.params.pageid};await xe(n),await Te(p.params);const i=Object.assign({},{id:p.params.id,name:p.params.name,pageid:p.params.pageid,moduleName:p.params.name,base:p.params.pageid,relatedLists:H.value.relatedLists});await Ie(i),U.value=Ne.value,x.value=de.value,N.value=H.value,Z.value=Me.value(null),ee.value=re.value,te.value=Z.value.filter(d=>d.controllerMethod.includes("@index")),se.value=K.value.filter(d=>d.entityName==="Contact"||d.entityName==="Unit"),le.value=K.value.filter(d=>d.entityName==="SalesOpportunity"||d.entityName==="SalesOpportunity"),Q.value=K.value.filter(d=>d.entityName==="DefectReport"||d.entityName==="ServiceJob"||d.entityName==="ServiceSchedule"||d.entityName==="BreakdownLog"||d.entityName==="ServiceReport"),E.value=Le.value,window.addEventListener("scroll",_e),_e()}),(n,i)=>{const d=y("ProgressSpinner"),L=y("Button"),T=y("Panel"),M=y("TabPanel"),qe=y("TabView"),We=y("Dropdown"),pe=y("font-awesome-icon"),Je=y("Menu"),ve=y("Image"),Ge=y("FileUpload");return t(),l("div",null,[o(ot,{bcrumbs:Ce.value},null,8,["bcrumbs"]),U.value?(t(),l("div",ut,[o(d)])):(t(),l("div",mt,[e("div",_t,[e("div",pt,[(t(!0),l(v,null,g(N.value.fields,(s,u)=>(t(),l("div",{key:u},[e("div",{class:at(`${N.value.fields.length===u+1&&"mr-8"}`)},[s.title?(t(),l("div",vt,[s.groupWith?(t(),l("div",ht,[e("div",null,m(s.groupLabel),1),e("div",ft,[(t(!0),l(v,null,g(s.groupWith,(h,C)=>(t(),l("div",{key:C},[e("div",gt,m(a(S)(h))+m(s.fieldGlue===" "?" ":s.fieldGlue),1)]))),128))])])):(t(),l("div",bt,[e("div",null,m(s.label),1),e("div",yt,m(a(S)(s.name)),1)]))])):_("",!0)],2)]))),128)),(t(!0),l(v,null,g(N.value.fields,(s,u)=>(t(),l("div",{key:u},[s.header?(t(),l("div",kt,[e("div",null,m(s.label),1),a(S)(s.name)?(t(),l("div",xt,[s.field_type.name=="lookupModel"?(t(),l(v,{key:0},[a(ze)(s.rules)?(t(!0),l(v,{key:0},g(a(S)(s.name),h=>(t(),l("a",{key:h._id,href:a(q)(h,s).link,target:"_blank"},m(a(q)(h,s).label),9,wt))),128)):(t(),l("a",{key:1,href:a(q)(a(S)(s.name),s).link,target:"_blank"},m(a(q)(a(S)(s.name),s).label),9,Lt))],64)):(t(),l(v,{key:1},[he(m(a(S)(s.name)),1)],64))])):_("",!0)])):_("",!0)]))),128))]),e("div",null,[o(L,{label:"Edit",size:"large",onClick:i[0]||(i[0]=s=>Ae(a(de))),class:"px-6 border-round-xl"})])]),e("div",Nt,[e("div",St,[e("div",Mt,[o(qe,{onTabChange:Be},{default:r(()=>[o(M,{header:"Details"},{default:r(()=>[e("div",null,[e("div",Tt,[(t(!0),l(v,null,g(te.value,(s,u)=>(t(),l("div",{key:u,class:"flex flex-column gap-1"},[(t(!0),l(v,null,g(s.sections,(h,C)=>(t(),l("div",{key:C,class:"shadow-1 mt-4"},[o(T,{class:"detail-page-panel"},{header:r(()=>[h.sectionLabel?(t(),l("div",Dt,[e("div",It,m(h.sectionLabel),1),a(w)(s.panelName)?(t(),l("div",Ft,jt)):_("",!0)])):_("",!0)]),default:r(()=>[e("div",Et,[s.controllerMethod.indexOf("@show")>-1?(t(),l("div",zt,[a(w)(s.panelName)?(t(),l("div",Ct,[a(w)(s.panelName)?(t(),b(P,{key:0},{fallback:r(()=>[o(it)]),default:r(()=>[(t(),b(a(k),{key:s._id,moduleId:s._id,moduleEntityName:s.entityName,moduleName:a(w)(s.panelName).link,moduleLabel:a(w)(s.panelName).label,fields:a(w)(s.panelName).fields.data,data:a(w)(s.panelName).collection.data,pagination:a(w)(s.panelName).collection.meta,collectionLoading:!1},null,8,["moduleId","moduleEntityName","moduleName","moduleLabel","fields","data","pagination"]))]),_:2},1024)):_("",!0)])):(t(),l("div",{key:1,id:`rl-panel-${s._id}`},[e("div",{onClick:f=>me(s),class:"flex align-items-center gap-2 cursor-pointer text-700"},[Ot,he(" View data ")],8,Bt)],8,Pt))])):(t(),l("div",Vt,[h.field_ids&&h.field_ids.length>0?(t(),b(P,{key:0},{fallback:r(()=>[o(fe)]),default:r(()=>[o(a(O),{newModuleFields:N.value.fields,fieldIds:h.field_ids},null,8,["newModuleFields","fieldIds"])]),_:2},1024)):_("",!0),h.additional_fields.length>0?(t(),l("div",$t,[(t(!0),l(v,null,g(h.additional_fields,(f,D)=>(t(),l("div",{key:D},[f.ids&&f.ids.length>0?(t(),b(P,{key:0},{fallback:r(()=>[o(fe)]),default:r(()=>[o(a(O),{newModuleFields:N.value.fields,fieldIds:f.ids},null,8,["newModuleFields","fieldIds"])]),_:2},1024)):_("",!0)]))),128))])):_("",!0)]))])]),_:2},1024)]))),128))]))),128)),(t(!0),l(v,null,g(se.value,(s,u)=>(t(),l("div",{key:u},[e("div",Ut,[(t(),b(a(j),{key:u,relatedList:s},null,8,["relatedList"]))])]))),128))])])]),_:1}),x.value&&x.value.name==="accounts"?(t(),b(M,{key:0,header:"Sales"},{default:r(()=>[e("div",null,[z.value===1?(t(),b(P,{key:0},{fallback:r(()=>[o(ge,{class:"mt-4"})]),default:r(()=>[(t(!0),l(v,null,g(le.value,(s,u)=>(t(),l("div",{key:u},[e("div",At,[(t(),b(a(j),{key:u,relatedList:s},null,8,["relatedList"]))])]))),128))]),_:1})):_("",!0)])]),_:1})):_("",!0),x.value&&x.value.name==="accounts"?(t(),b(M,{key:1,header:"Services"},{default:r(()=>[e("div",null,[Q.value.length<=0?(t(),l("div",qt,Jt)):_("",!0),z.value===2?(t(),b(P,{key:1},{fallback:r(()=>[o(ge,{class:"mt-4"})]),default:r(()=>[(t(!0),l(v,null,g(Q.value,(s,u)=>(t(),l("div",{key:u},[e("div",Gt,[(t(),b(a(j),{key:u,relatedList:s},null,8,["relatedList"]))])]))),128))]),_:1})):_("",!0)])]),_:1})):_("",!0),E.value?(t(),b(M,{key:2,header:"Email"},{default:r(()=>[e("div",null,[o(a(B),{threads:E.value.conversations.slice().reverse()},null,8,["threads"])])]),_:1})):_("",!0),x.value&&x.value.name==="salesquotes"?(t(),b(M,{key:3,header:"Quote PDF"},{default:r(()=>[o(a(J))]),_:1})):_("",!0)]),_:1})])]),e("div",Qt,[e("div",Ht,[e("div",Kt,[e("div",Xt,[e("div",Yt,[Zt,e("div",null,[e("div",es,[o(We,{placeholder:"Filters",class:"border-round-xl border-primary w-full md:w-12rem"}),o(L,{label:"add activity",class:"ml-3 border-round-xl px-4"})])])])]),e("div",ts,[(t(),l(v,null,g(["October 2023","November 2023","December 2023"],(s,u)=>o(T,{key:u,toggleable:"",collapsed:"",class:"activity-panel"},{header:r(()=>[e("div",ss,[u===0?(t(),l("span",ls,"This months")):_("",!0)])]),togglericon:r(()=>[o(pe,{icon:"fa-solid fa-caret-down",style:{"font-size":"1.5rem"}})]),icons:r(()=>[e("div",as,m(s),1)]),default:r(()=>[os]),_:2},1024)),64))])]),e("div",is,[e("div",ns,[e("div",ds,[rs,e("div",null,[e("div",{onClick:i[1]||(i[1]=s=>$.value.toggle(s)),class:"cursor-pointer"},[o(pe,{icon:"fa-regular fa-square-caret-down",style:{"font-size":"1.5rem"}})]),o(Je,{ref_key:"fileMenu",ref:$,id:"overlay_menu",model:Pe.value,popup:!0},null,8,["model"])])]),e("div",cs,[us,ms,e("div",null,[o(Ge,{name:"demo[]",url:"/api/upload",customUpload:"",onUploader:i[2]||(i[2]=s=>Ve(s)),onError:i[3]||(i[3]=s=>$e(s)),multiple:!0,accept:"image/*",maxFileSize:5e6},{empty:r(()=>[a(A).length<=0?(t(),l("p",_s,"Drag and drop files to here to upload.")):_("",!0)]),content:r(({files:s,uploadedFiles:u,removeUploadedFileCallback:h,removeFileCallback:C})=>[s.length>0?(t(),l("div",ps,[(t(!0),l(v,null,g(s,(f,D)=>(t(),l("div",{key:D,class:"mb-2"},[e("div",vs,[e("div",hs,[o(ve,{src:"/demo/images/galleria/galleria6s.jpg",alt:"dummy-img",width:"50",class:"cursor-pointer"}),e("div",null,[e("a",fs,m(f.name),1),e("div",gs,m(Date.now())+" • "+m(f.size)+" • "+m(f.type),1),bs])]),e("div",{onClick:Qe=>C(D),class:"cursor-pointer mr-2"},[o(L,{icon:"pi pi-times",severity:"danger",text:"",rounded:"","aria-label":"Cancel"})],8,ys)])]))),128))])):_("",!0),(t(!0),l(v,null,g(a(A),(f,D)=>(t(),l("div",{key:D,class:"mb-2"},[e("div",ks,[e("div",xs,[o(ve,{src:"/demo/images/galleria/galleria6s.jpg",alt:"dummy-img",width:"50",class:"cursor-pointer"}),e("div",null,[e("a",ws,m(f.label),1),e("div",Ls,m(f.date)+" • "+m(f.size)+" • "+m(f.type),1)])]),e("div",{onClick:Qe=>Ue(f),class:"cursor-pointer mr-2"},[o(L,{icon:"pi pi-times",severity:"danger",text:"",rounded:"","aria-label":"Cancel"})],8,Ns)])]))),128))]),_:1})])])])]),Ss])])])])),o(a(V),{module:N.value},null,8,["module"])])}}},Bs=Object.freeze(Object.defineProperty({__proto__:null,default:Ms},Symbol.toStringTag,{value:"Module"}));export{Bs as S,ct as u};
