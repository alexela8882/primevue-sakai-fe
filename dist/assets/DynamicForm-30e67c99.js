import{I as h,J as B,r,E as S,c as C,o as I,j as $,e as i,f as d,i as s,F as j}from"./index-2e9b86cc.js";import{u as k,c as p,a as O}from"./index.esm-4d56776b.js";const x={class:"relative h-full"},A={class:"sticky bottom-0 right-0 py-2 surface-0"},J={__name:"DynamicForm",props:{form:Object},setup(c){const u=c,v=h(()=>B(()=>import("./DynamicFields-0b0b6237.js"),["assets/DynamicFields-0b0b6237.js","assets/index-2e9b86cc.js","assets/index-cb49da02.css"])),l=r({}),n=r({});r([]);const{values:D,errors:f,setErrors:M,setFieldError:_,ErrorBag:q,defineComponentBinds:V,isSubmitting:w,setFieldValue:b,handleSubmit:y,meta:E}=k({}),F=async()=>{(await m()).inner?console.log("error"):console.log("passed")},m=y((a,e)=>{Object.keys(n.value).forEach((o,t)=>{n.value[o].modelValue!==null&&_(o,null)});try{return l.value.validateSync(a,{abortEarly:!1}),a}catch(o){return o.inner.map(t=>{t.path+"",t.message,e.setFieldError(t.path,t.message)}),o}}),g=async()=>{u.form.fields.map(e=>Object.assign(e,{...e,data:{value:null}}));const a={};u.form.fields.map(e=>{e.rules&&e.rules.required?a[e.name]=p().label(e.label).required():a[e.name]=p().label(e.label).nullable(),n.value[e.name]=V(`${e.name}`),b(`${e.name}`,null)}),l.value=a,l.value=O(a)};return S(async()=>{await g()}),(a,e)=>{const o=C("Button");return I(),$(j,null,[i("div",x,[i("div",null,[d(s(v),{fields:c.form.fields,moduleValidationInputs:n.value,moduleValidationErrors:s(f),moduleValidationMeta:s(E),onValidateSyncFunc:e[0]||(e[0]=t=>s(m)())},null,8,["fields","moduleValidationInputs","moduleValidationErrors","moduleValidationMeta"])])]),i("div",A,[d(o,{onClick:F,label:"Save"})])],64)}}};export{J as default};
