import{I as X,J as Z,a3 as p,s as _,a5 as ee,r as q,aY as le,E as ne,a7 as n,c as y,o as t,j as d,t as o,m as k,f as x,i as l,n as m,F as s,k as r,d as c,e as w,w as V}from"./index-557ccd93.js";import{v as ie}from"./Validate-390cd3ee.js";import{E as G}from"./Editor-faad0546.js";const ae=["for"],te=["for"],ue=["for"],de={key:3,class:"fieldInput flex flex-column"},fe=["for"],oe=["for"],me=["for"],ge=["for"],ce=["for"],se=["for"],re={class:"fieldInputSelection"},ye=w("svg",{class:"circular",viewBox:"0 0 50 50"},[w("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})],-1),ke=["for"],ve=["for"],be=["for"],we={__name:"Field",props:{config:Object,type:String,keyName:String,inline:Boolean,module:String,entity:String,small:Boolean,formPage:String},emits:["changeValue"],setup(e,{emit:O}){const g=e,P=X(()=>Z(()=>import("./LookupField-e00ddafb.js"),["assets/LookupField-e00ddafb.js","assets/index-557ccd93.js","assets/index-cb49da02.css","assets/LookupField-09bee035.css"])),B=p(),{fetchPicklist:T,fetchLookup:R}=B,{getPicklistByListName:I,getLookupOptions:N}=_(B),{checkFieldIfMultipleSelect:D,controllingFieldChecker:A,parseHiddenFields:H}=ee(),{validateField:J}=ie();q();const L=q("izbi1p0d9vddiqqrjjtgx2a6ech4jv2wqogrplsesugoa0gs"),i=le("form"),F=q(!1),E=q(!1),v=b=>{if(!g.inline){i.value.errors[g.keyName][b.name]=J(i.value.values[g.keyName],b,i.value.fields);let u=A(b,i.value.fields,g.entity);if(!n.isEmpty(u.visible_if)||!n.isEmpty(u.hide_if)){let S=H(i.value.hidden.fields,u,g.entity,i.value.values.main);i.value.hidden.fields=S}!n.isEmpty(u.set_val_disable_if)||n.isEmpty(u.disable_if)}O("changeValue",b)};ne(async()=>{g.config.field_type.name=="picklist"&&n.get(g.config.rules,"ss_dropdown",!1)!=!0&&n.get(g.config.rules,"ms_dropdown",!1)!=!0&&j(!0),g.config.field_type.name=="lookupModel"&&n.get(g.config.rules,"ss_pop_up",!1)!=!0&&n.get(g.config.rules,"ms_pop_up",!1)!=!0&&n.get(g.config.rules,"ss_dropdown",!1)!=!0&&n.get(g.config.rules,"ms_dropdown",!1)!=!0&&M(!0)});const j=async b=>{if(b){let u=I.value(g.config.listName);n.isEmpty(u)&&(E.value=!0,await T([g.config.listName]),E.value=!1)}},M=async b=>{if(console.log("fetchLookupOptions"),b){let u=N.value(g.config.uniqueName,"group");n.isEmpty(u)&&(F.value=!0,await R(g.module,g.config),F.value=!1)}};return(b,u)=>{const S=y("InputText"),h=y("InputNumber"),K=y("el-date-picker"),Q=y("InputSwitch"),C=y("Checkbox"),$=y("RadioButton"),z=y("Listbox"),U=y("el-option"),Y=y("el-select"),W=y("el-option-group");return e.config.field_type.name=="text"?(t(),d("div",{key:0,class:m(["fieldInput flex flex-column",{required:l(n).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(t(),d("label",{key:0,for:e.config.name},o(e.config.label),9,ae)):k("",!0),x(S,{modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[0]||(u[0]=a=>l(i).values[e.keyName][e.config.name]=a),id:e.config.name,class:m({"p-invalid":!l(n).isEmpty(l(n).get(l(i).errors[e.keyName],e.config.name,[]))}),disabled:l(i).formSaving||l(n).includes(l(i).disabled,e.config._id),onBlur:u[1]||(u[1]=a=>v(e.config))},null,8,["modelValue","id","class","disabled"]),(t(!0),d(s,null,r(l(n).get(l(i).errors[e.keyName],e.config.name,[]),(a,f)=>(t(),d("small",{class:"errMsg",key:f},o(a),1))),128))],2)):e.config.field_type.name=="number"||e.config.field_type.name=="percentage"?(t(),d("div",{key:1,class:m(["fieldInput flex flex-column",{required:l(n).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(t(),d("label",{key:0,for:e.config.name},o(e.config.label),9,te)):k("",!0),x(h,{modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[2]||(u[2]=a=>l(i).values[e.keyName][e.config.name]=a),inputId:"config.name",mode:"decimal",class:m({invalid:!l(n).isEmpty(l(n).get(l(i).errors[e.keyName],e.config.name,[]))}),useGrouping:l(n).get(e.config.rules,"comma_separated",!1),suffix:e.config.field_type.name=="percentage"?"%":"",minFractionDigits:l(n).get(e.config.rules,"decimal",null),maxFractionDigits:l(n).get(e.config.rules,"decimal",null),onBlur:u[3]||(u[3]=a=>v(e.config))},null,8,["modelValue","class","useGrouping","suffix","minFractionDigits","maxFractionDigits"]),(t(!0),d(s,null,r(l(n).get(l(i).errors[e.keyName],e.config.name,[]),(a,f)=>(t(),d("small",{class:"errMsg",key:f},o(a),1))),128))],2)):e.config.field_type.name=="currency"?(t(),d("div",{key:2,class:m(["fieldInput flex flex-column",{required:l(n).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(t(),d("label",{key:0,for:e.config.name},o(e.config.label),9,ue)):k("",!0),l(n).get(l(i).values[e.keyName],e.config.currencySource.field+".code","")==""?(t(),c(h,{key:1,disabled:l(i).formSaving||l(n).includes(l(i).disabled,e.config._id),modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[4]||(u[4]=a=>l(i).values[e.keyName][e.config.name]=a),inputId:"config.name",mode:"decimal",class:m({invalid:!l(n).isEmpty(l(n).get(l(i).errors[e.keyName],e.config.name,[]))}),useGrouping:l(n).get(e.config.rules,"comma_separated",!1),minFractionDigits:l(n).get(e.config.rules,"decimal",null),maxFractionDigits:l(n).get(e.config.rules,"decimal",null),onBlur:u[5]||(u[5]=a=>v(e.config))},null,8,["disabled","modelValue","class","useGrouping","minFractionDigits","maxFractionDigits"])):(t(),c(h,{key:2,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[6]||(u[6]=a=>l(i).values[e.keyName][e.config.name]=a),disabled:l(i).formSaving||l(n).includes(l(i).disabled,e.config._id),inputId:"config.name",mode:"currency",class:m({invalid:!l(n).isEmpty(l(n).get(l(i).errors[e.keyName],e.config.name,[]))}),useGrouping:l(n).get(e.config.rules,"comma_separated",!1),currency:e.config.field_type.name=="currency"?l(n).get(l(i).values[e.keyName],e.config.currencySource.field+".code",""):"",currencyDisplay:l(n).get(e.config,"currencySource.concat",""),minFractionDigits:l(n).get(e.config.rules,"decimal",null),maxFractionDigits:l(n).get(e.config.rules,"decimal",null),onBlur:u[7]||(u[7]=a=>v(e.config))},null,8,["modelValue","disabled","class","useGrouping","currency","currencyDisplay","minFractionDigits","maxFractionDigits"])),(t(!0),d(s,null,r(l(n).get(l(i).errors[e.keyName],e.config.name,[]),(a,f)=>(t(),d("small",{class:"errMsg",key:f},o(a),1))),128))],2)):e.config.field_type.name=="date"?(t(),d("div",de,[e.type!="tableForm"?(t(),d("label",{key:0,for:e.config.name},o(e.config.label),9,fe)):k("",!0),x(K,{class:m(["w-full",{invalid:!l(n).isEmpty(l(n).get(l(i).errors[e.keyName],e.config.name,[])),required:l(n).get(e.config.rules,"required",!1)}]),disabled:l(i).formSaving||l(n).includes(l(i).disabled,e.config._id),modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[8]||(u[8]=a=>l(i).values[e.keyName][e.config.name]=a),clearable:"",type:l(n).get(e.config.rules,"date_selection","date"),format:l(n).get(e.config.rules,"date_selection","date")=="month"?"MMM YYYY":l(n).get(e.config.rules,"date_selection","date")=="week"?"YYYY [w]ww":"MM/DD/YYYY","value-format":"YYYY-MM-DD",onChange:u[9]||(u[9]=a=>v(e.config))},null,8,["disabled","modelValue","class","type","format"]),(t(!0),d(s,null,r(l(n).get(l(i).errors[e.keyName],e.config.name,[]),(a,f)=>(t(),d("small",{class:"errMsg",key:f},o(a),1))),128))])):e.config.field_type.name=="richTextBox"?(t(),d("div",{key:4,class:m(["fieldInput flex flex-column",{invalid:!l(n).isEmpty(l(n).get(l(i).errors[e.keyName],e.config.name,[])),required:l(n).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(t(),d("label",{key:0,for:e.config.name},o(e.config.label),9,oe)):k("",!0),x(l(G),{class:"required","api-key":L.value,init:{plugins:["lists link image paste help wordcount table"],menubar:!1,toolbar:"undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | image table"}},null,8,["api-key"]),(t(!0),d(s,null,r(l(n).get(l(i).errors[e.keyName],e.config.name,[]),(a,f)=>(t(),d("small",{class:"errMsg",key:f},o(a),1))),128))],2)):e.config.field_type.name=="longText"?(t(),d("div",{key:5,class:m(["fieldInput flex flex-column",{invalid:!l(n).isEmpty(l(n).get(l(i).errors[e.keyName],e.config.name,[])),required:l(n).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(t(),d("label",{key:0,for:e.config.name},o(e.config.label),9,me)):k("",!0),x(l(G),{"api-key":L.value,init:{plugins:["lists link image paste help wordcount"],menubar:!1,toolbar:"undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent"}},null,8,["api-key"]),(t(!0),d(s,null,r(l(n).get(l(i).errors[e.keyName],e.config.name,[]),(a,f)=>(t(),d("small",{class:"errMsg",key:f},o(a),1))),128))],2)):e.config.field_type.name=="boolean"?(t(),d("div",{key:6,class:m(["fieldInput checkbox",{required:l(n).get(e.config.rules,"required",!1)}])},[l(n).get(e.config.rules,"switch",!1)?(t(),c(Q,{key:0,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[10]||(u[10]=a=>l(i).values[e.keyName][e.config.name]=a),disabled:l(i).formSaving||l(n).includes(l(i).disabled,e.config._id),inputId:e.config.name},null,8,["modelValue","disabled","inputId"])):(t(),c(C,{key:1,inputId:e.config.name,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[11]||(u[11]=a=>l(i).values[e.keyName][e.config.name]=a),binary:!0,disabled:l(i).formSaving||l(n).includes(l(i).disabled,e.config._id)},null,8,["inputId","modelValue","disabled"])),e.type!="tableForm"?(t(),d("label",{key:2,for:e.config.name},o(e.config.label),9,ge)):k("",!0)],2)):e.config.field_type.name=="picklist"?(t(),d("div",{key:7,class:m(["fieldInput flex flex-column",{required:l(n).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(t(),d("label",{key:0,for:e.config.name},o(e.config.label),9,ce)):k("",!0),l(n).get(e.config.rules,"checkbox",!1)||l(n).get(e.config.rules,"checkbox_inline",!1)||l(n).get(e.config.rules,"radiobutton",!1)||l(n).get(e.config.rules,"radiobutton_inline",!1)?(t(),d("div",{key:1,class:m(l(n).get(e.config.rules,"checkbox_inline",!1)||l(n).get(e.config.rules,"radiobutton_inline",!1)?"card flex flex-wrap justify-content-center gap-3":"")},[(t(!0),d(s,null,r(l(I)(e.config.listName),a=>(t(),d("div",{key:a._id,class:m(["flex align-items-center",l(n).get(e.config.rules,"checkbox",!1)||l(n).get(e.config.rules,"radiobutton",!1)?"mb-1 mt-1 ml-3":""])},[l(n).get(e.config.rules,"checkbox",!1)||l(n).get(e.config.rules,"checkbox_inline",!1)?(t(),c(C,{key:0,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[12]||(u[12]=f=>l(i).values[e.keyName][e.config.name]=f),inputId:a._id,name:"category",value:a,disabled:l(i).formSaving||l(n).includes(l(i).disabled,e.config._id)},null,8,["modelValue","inputId","value","disabled"])):(t(),c($,{key:1,inputId:a._id,name:"dynamic",value:a,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[13]||(u[13]=f=>l(i).values[e.keyName][e.config.name]=f),disabled:l(i).formSaving||l(n).includes(l(i).disabled,e.config._id)},null,8,["inputId","value","modelValue","disabled"])),w("label",{for:a._id,class:"ml-1"},o(a.value),9,se)],2))),128))],2)):l(n).get(e.config.rules,"ss_list_view",!1)||l(n).get(e.config.rules,"ms_list_view",!1)?(t(),c(z,{key:2,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[14]||(u[14]=a=>l(i).values[e.keyName][e.config.name]=a),disabled:l(i).formSaving||l(n).includes(l(i).disabled,e.config._id),options:l(I)(e.config.listName),multiple:l(n).get(e.config.rules,"ms_list_view",!1),optionLabel:"value",class:"w-full mt-2 mb-2"},null,8,["modelValue","disabled","options","multiple"])):(t(),c(Y,{key:3,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[15]||(u[15]=a=>l(i).values[e.keyName][e.config.name]=a),class:m([{invalid:!l(n).isEmpty(l(n).get(l(i).errors[e.keyName],e.config.name,[]))},"w-full"]),multiple:l(D)(e.config.rules),"collapse-tags":l(D)(e.config.rules),"collapse-tags-tooltip":l(D)(e.config.rules),placeholder:"Select",clearable:"",filterable:"",disabled:l(i).formSaving||l(n).includes(l(i).disabled,e.config._id),loading:E.value,size:e.small?"small":"",onVisibleChange:j,onChange:u[16]||(u[16]=a=>v(e.config))},{loading:V(()=>[ye]),default:V(()=>[(t(!0),d(s,null,r(l(I)(e.config.listName),a=>(t(),c(U,{key:a._id,label:a.value,value:a},{default:V(()=>[w("span",re,o(a.value),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","class","multiple","collapse-tags","collapse-tags-tooltip","disabled","loading","size"])),(t(!0),d(s,null,r(l(n).get(l(i).errors[e.keyName],e.config.name,[]),(a,f)=>(t(),d("small",{class:"errMsg mt-1",key:f},o(a),1))),128))],2)):e.config.field_type.name=="lookupModel"?(t(),d("div",{key:8,class:m(["fieldInput flex flex-column",{required:l(n).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(t(),d("label",{key:0,for:e.config.name},o(e.config.label),9,ke)):k("",!0),l(n).get(e.config.rules,"ss_dropdown",!1)||l(n).get(e.config.rules,"ms_dropdown",!1)?(t(),d(s,{key:1},[l(N)(e.config.uniqueName,"group")?(t(),c(Y,{key:0,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[17]||(u[17]=a=>l(i).values[e.keyName][e.config.name]=a),disabled:l(i).formSaving||l(n).includes(l(i).disabled,e.config._id),loading:F.value,size:e.small?"small":"",class:m([{invalid:!l(n).isEmpty(l(n).get(l(i).errors[e.keyName],e.config.name,[]))},"w-full"]),placeholder:"Select",clearable:"",filterable:"",onChange:u[18]||(u[18]=a=>v(e.config)),onVisibleChange:M},{default:V(()=>[(t(!0),d(s,null,r(l(N)(e.config.uniqueName,"options"),a=>(t(),c(W,{key:a.label,label:a.label},{default:V(()=>[(t(!0),d(s,null,r(a.options,f=>(t(),c(U,{key:f._id,label:f.value,value:f},null,8,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","disabled","loading","size","class"])):(t(),c(Y,{key:1,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[19]||(u[19]=a=>l(i).values[e.keyName][e.config.name]=a),disabled:l(i).formSaving||l(n).includes(l(i).disabled,e.config._id),loading:F.value,size:e.small?"small":"",class:m(["w-full",{invalid:!l(n).isEmpty(l(n).get(l(i).errors[e.keyName],e.config.name,[]))}]),placeholder:"Select",clearable:"",filterable:"",onChange:u[20]||(u[20]=a=>v(e.config)),onVisibleChange:M},{default:V(()=>[(t(!0),d(s,null,r(l(N)(e.config.uniqueName,"options"),a=>(t(),c(U,{key:a._id,label:a.value,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled","loading","size","class"]))],64)):l(n).get(e.config.rules,"checkbox",!1)||l(n).get(e.config.rules,"checkbox_inline",!1)||l(n).get(e.config.rules,"radiobutton",!1)||l(n).get(e.config.rules,"radiobutton_inline",!1)?(t(),d("div",{key:2,class:m(l(n).get(e.config.rules,"checkbox_inline",!1)||l(n).get(e.config.rules,"radiobutton_inline",!1)?"card flex flex-wrap justify-content-center gap-3":"")},[(t(!0),d(s,null,r(l(N)(e.config.uniqueName,"options"),a=>(t(),d("div",{key:a._id,class:m(["flex align-items-center",l(n).get(e.config.rules,"checkbox",!1)||l(n).get(e.config.rules,"radiobutton",!1)?"mb-1 mt-1 ml-3":""])},[l(n).get(e.config.rules,"checkbox",!1)||l(n).get(e.config.rules,"checkbox_inline",!1)?(t(),c(C,{key:0,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[21]||(u[21]=f=>l(i).values[e.keyName][e.config.name]=f),inputId:a._id,name:"category",value:a,disabled:l(i).formSaving||l(n).includes(l(i).disabled,e.config._id)},null,8,["modelValue","inputId","value","disabled"])):(t(),c($,{key:1,inputId:a._id,name:"dynamic",value:a,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[22]||(u[22]=f=>l(i).values[e.keyName][e.config.name]=f),disabled:l(i).formSaving||l(n).includes(l(i).disabled,e.config._id)},null,8,["inputId","value","modelValue","disabled"])),w("label",{for:a._id,class:"ml-1"},o(a.value),9,ve)],2))),128))],2)):l(n).get(e.config.rules,"ss_list_view",!1)||l(n).get(e.config.rules,"ms_list_view",!1)?(t(),c(z,{key:3,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[23]||(u[23]=a=>l(i).values[e.keyName][e.config.name]=a),options:l(N)(e.config.uniqueName,"options"),multiple:l(n).get(e.config.rules,"ms_list_view",!1),optionLabel:"value",class:"w-full mt-2 mb-2"},null,8,["modelValue","options","multiple"])):(t(),c(l(P),{key:4,field:e.config,keyName:e.keyName,inline:e.inline,module:e.module,entity:e.entity,onChangeValue:u[24]||(u[24]=a=>v(e.config))},null,8,["field","keyName","inline","module","entity"])),(t(!0),d(s,null,r(l(n).get(l(i).errors[e.keyName],e.config.name,[]),(a,f)=>(t(),d("small",{class:"errMsg",key:f},o(a),1))),128))],2)):(t(),d("div",{key:9,class:m(["fieldInput flex flex-column",{required:l(n).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(t(),d("label",{key:0,for:e.config.name},o(e.config.label),9,be)):k("",!0),x(S,{id:e.config.name,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":u[25]||(u[25]=a=>l(i).values[e.keyName][e.config.name]=a)},null,8,["id","modelValue"])],2))}}};export{we as default};
