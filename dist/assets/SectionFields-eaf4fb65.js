import{r as h,B as A,s as C,a4 as P,G as R,c as k,o as a,j as d,F as i,k as m,i as e,n as z,e as M,t as u,f as g,d as F,m as b,w as V,g as G,aa as H,a7 as U}from"./index-5970bb5d.js";import{u as p}from"./index-984c9a28.js";const J={class:"grid"},K={key:0,class:"flex align-items-start gap-4"},Q={class:"white-space-nowrap"},W={key:0},X=["href"],Y=["href"],Z={key:1},ee={key:1,class:"flex gap-4 font-bold"},le={key:0},ae={key:1},te={key:1},de={class:"p-float-label"},oe={key:0,class:"text-red-600"},ne={key:1},ce={__name:"SectionFields",props:{fieldIds:Array,newModuleFields:Array,moduleValidationInputs:Object,moduleValidationErrors:Object,moduleValidationMeta:Object,source:String,mode:{type:String,default:"view"}},setup(l){h([]);const x=h(),_=h([]),I=h([]),D=A(),S=p(),{_getFieldDetailsById:o,getFieldDetailsById:T}=C(D),{getItemValueByName:s}=C(S),{transformLookupDisplay:c,checkFieldIfMultipleSelect:B,checkIfHasModule:N}=P(),$=(f,w)=>{_.value=f,I.value=w.relation.displayFieldName,console.log(f),x.value.toggle(event)};return R(()=>T.value,(f,w)=>{console.log(f)}),(f,w)=>{const v=k("Tag"),q=k("InputText"),E=k("Column"),L=k("DataTable"),O=k("OverlayPanel");return a(),d("div",J,[(a(!0),d(i,null,m(l.fieldIds,(y,j)=>(a(),d("div",{key:j,class:"col flex flex-column gap-4"},[(a(!0),d(i,null,m(y,(t,se)=>(a(),d("div",null,[e(o)({fields:l.newModuleFields,_id:t})?(a(),d("div",{key:0,class:z(`${l.mode==="view"&&"border-bottom-1 border-200"}`)},[l.mode==="view"?(a(),d("div",K,[M("div",Q,u(e(o)({fields:l.newModuleFields,_id:t}).label),1),e(o)({fields:l.newModuleFields,_id:t}).field_type.name=="lookupModel"?(a(),d("div",W,[e(B)(e(o)({fields:l.newModuleFields,_id:t}).rules)?(a(),d(i,{key:0},[(a(!0),d(i,null,m(e(c)(e(s)(e(o)({fields:l.newModuleFields,_id:t}).name),e(o)({fields:l.newModuleFields,_id:t})),(n,r)=>(a(),d(i,{key:r},[e(N)(e(o)({fields:l.newModuleFields,_id:t}))&&r<10?(a(),d("a",{key:0,href:n.link,target:"_blank"},[g(v,{rounded:"",class:"white-space-nowrap px-3 m-1",severity:"info",value:n.label},null,8,["value"])],8,X)):r<10?(a(),F(v,{key:1,rounded:"",class:"white-space-nowrap px-3 m-1",severity:"info",value:n.label},null,8,["value"])):b("",!0)],64))),128)),e(c)(e(s)(e(o)({fields:l.newModuleFields,_id:t}).name),e(o)({fields:l.newModuleFields,_id:t})).length>10?(a(),F(v,{key:0,rounded:"",class:"white-space-nowrap px-3 m-1 cursor-pointer",severity:"info",onClick:n=>$(e(s)(e(o)({fields:l.newModuleFields,_id:t}).name),e(o)({fields:l.newModuleFields,_id:t})),"aria-haspopup":"true","aria-controls":"overlay_panel"},{default:V(()=>[G(" + "+u(e(c)(e(s)(e(o)({fields:l.newModuleFields,_id:t}).name),e(o)({fields:l.newModuleFields,_id:t})).length-10),1)]),_:2},1032,["onClick"])):b("",!0)],64)):(a(),d(i,{key:1},[e(N)(e(o)({fields:l.newModuleFields,_id:t}))?(a(),d("a",{key:0,href:e(c)(e(s)(e(o)({fields:l.newModuleFields,_id:t}).name),e(o)({fields:l.newModuleFields,_id:t})).link,target:"_blank"},u(e(c)(e(s)(e(o)({fields:l.newModuleFields,_id:t}).name),e(o)({fields:l.newModuleFields,_id:t})).label),9,Y)):(a(),d("span",Z,u(e(c)(e(s)(e(o)({fields:l.newModuleFields,_id:t}).name),e(o)({fields:l.newModuleFields,_id:t})).label),1))],64))])):(a(),d("div",ee,[Array.isArray(e(s)(e(o)({fields:l.newModuleFields,_id:t}).name))?(a(),d("div",le,[(a(!0),d(i,null,m(e(s)(e(o)({fields:l.newModuleFields,_id:t}).name),(n,r)=>(a(),F(v,{key:r,rounded:"",value:n,class:"white-space-nowrap px-3 m-1 cursor-pointer my-1",severity:"info"},null,8,["value"]))),128))])):(a(),d("div",ae,u(e(s)(e(o)({fields:l.newModuleFields,_id:t}).name)?e(s)(e(o)({fields:l.newModuleFields,_id:t}).name):""),1))]))])):(a(),d("div",te,[(a(!0),d(i,null,m(l.newModuleFields.filter(n=>n._id===t),(n,r)=>(a(),d("div",{key:r},[M("span",de,[g(q,H(l.moduleValidationInputs[n.uniqueName],{"onUpdate:modelValue":w[0]||(w[0]=ie=>f.$emit("validate-sync-func")),class:["w-full",`${n.rules&&n.rules.required&&"border-left-3"} ${!l.moduleValidationErrors[n.uniqueName]&&l.moduleValidationMeta.touched?"border-green-600":"border-red-600"}`]}),null,16,["class"]),M("label",null,u(n.label),1)]),l.moduleValidationErrors[n.uniqueName]?(a(),d("small",oe,u(l.moduleValidationErrors[n.uniqueName]),1)):b("",!0)]))),128))]))],2)):(a(),d("div",ne,[M("code",null,"undefined "+u(t),1)]))]))),256))]))),128)),g(O,{ref_key:"op",ref:x,appendTo:"body"},{default:V(()=>[g(L,{value:_.value,stripedRows:"",paginator:!0,rows:10},{default:V(()=>[(a(!0),d(i,null,m(I.value,y=>(a(),F(E,{key:y,field:y,header:e(U).startCase(y),sortable:""},null,8,["field","header"]))),128))]),_:1},8,["value"])]),_:1},512)])}}};export{ce as default};
