import{a4 as _,s as ee,a5 as le,r as D,b2 as ae,E as ie,a2 as a,c as b,o as u,j as d,t as m,m as N,f as w,i as l,n as g,F as r,k as v,d as c,e as F,w as I,I as ne,J as te}from"./index-dd487e2b.js";import{v as ue}from"./Validate-f8a9b3cc.js";import{E as O}from"./Editor-7b2bb173.js";const de=["for"],oe=["for"],fe=["for"],me={key:3,class:"fieldInput flex flex-column"},ge=["for"],ce=["for"],se=["for"],ye=["for"],re=["for"],ve=["for"],ke={class:"fieldInputSelection"},be=F("svg",{class:"circular",viewBox:"0 0 50 50"},[F("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})],-1),Ne=["for"],Ve=["for"],xe=["for"],Fe={__name:"Field",props:{config:Object,type:String,keyName:String,inline:Boolean,module:String,entity:String,small:Boolean,formPage:String},emits:["changeValue"],setup(e,{emit:P}){const T=ne(()=>te(()=>import("./LookupField-b20be82c.js"),["assets/LookupField-b20be82c.js","assets/index-dd487e2b.js","assets/index-40ff91a8.css","assets/LookupField-c7c583d6.css"])),f=e,A=P,L=_(),{fetchPicklist:R,fetchLookup:H}=L,{getPicklistByListName:q,getLookupOptions:x}=ee(L),{checkFieldIfMultipleSelect:h,controllingFieldChecker:J,parseHiddenFields:K,checkSetValRule:Q,applyAutofill:W}=le(),{validateField:X}=ue();D();const j=D("izbi1p0d9vddiqqrjjtgx2a6ech4jv2wqogrplsesugoa0gs"),i=ae("form"),E=D(!1),M=D(!1),V=y=>{if(!f.inline){i.value.errors[f.keyName][y.name]=X(i.value.values[f.keyName],y,i.value.fields);let t=J(y,i.value.fields,f.entity);if(console.log("fieldChange",y,t),!a.isEmpty(t.visible_if)||!a.isEmpty(t.hide_if)){let s=K(i.value.hidden.fields,t,f.entity,i.value.values.main);i.value.hidden.fields=s}if(!a.isEmpty(t.set_val_disable_if)||!a.isEmpty(t.set_val_if)){let s=Q(t,i.value.values.main,f.entity);a.isEmpty(s.disabled)||(i.value.disabled=a.union(i.value.disabled,s.disabled)),a.isEmpty(s.removeDisabled)||(i.value.disabled=a.pullAll(i.value.disabled,s.removeDisabled)),a.isEmpty(s.values)||(i.value.values.main=a.merge(i.value.values.main,s.values))}if(a.isEmpty(t.filtered_by)||a.forEach(t.filtered_by,function(s){i.value.values.main[s]=null}),a.has(y.rules,"auto_fill")){let s=!0;a.forEach(y.rules.auto_fill,function(k){a.has(i.value.values[f.keyName][y.name],k[0])||(s=!1)}),console.log(s),s&&a.forEach(y.rules.auto_fill,function(k){if(console.log(k,i.value.values[f.keyName]),a.has(i.value.values[f.keyName],k[1])){console.log(a.has(i.value.values[f.keyName],k[1]));let S=a.find(i.value.fields,{name:k[1]});console.log(S),i.value.values[f.keyName][S.name]=W(S,i.value.values[f.keyName][y.name],k[0])}})}}A("changeValue",y)};ie(async()=>{f.config.field_type.name=="picklist"&&a.get(f.config.rules,"ss_dropdown",!1)!=!0&&a.get(f.config.rules,"ms_dropdown",!1)!=!0&&$(!0),f.config.field_type.name=="lookupModel"&&a.get(f.config.rules,"ss_pop_up",!1)!=!0&&a.get(f.config.rules,"ms_pop_up",!1)!=!0&&a.get(f.config.rules,"ss_dropdown",!1)!=!0&&a.get(f.config.rules,"ms_dropdown",!1)!=!0&&U(!0)});const $=async y=>{if(y){let t=q.value(f.config.listName);a.isEmpty(t)&&(M.value=!0,await R([f.config.listName]),M.value=!1)}},U=async y=>{if(console.log("fetchLookupOptions"),y){let t=x.value(f.config.uniqueName,"group");a.isEmpty(t)&&(E.value=!0,await H(f.module,f.config),E.value=!1)}};return(y,t)=>{const s=b("InputText"),k=b("InputNumber"),S=b("el-date-picker"),Z=b("InputSwitch"),C=b("Checkbox"),z=b("RadioButton"),G=b("Listbox"),Y=b("el-option"),B=b("el-select"),p=b("el-option-group");return e.config.field_type.name=="text"?(u(),d("div",{key:0,class:g(["fieldInput flex flex-column",{required:l(a).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(u(),d("label",{key:0,for:e.config.name},m(e.config.label),9,de)):N("",!0),w(s,{modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":t[0]||(t[0]=n=>l(i).values[e.keyName][e.config.name]=n),id:e.config.name,class:g({"p-invalid":!l(a).isEmpty(l(a).get(l(i).errors[e.keyName],e.config.name,[]))}),disabled:l(i).formSaving||l(a).includes(l(i).disabled,e.config._id),onBlur:t[1]||(t[1]=n=>V(e.config))},null,8,["modelValue","id","class","disabled"]),(u(!0),d(r,null,v(l(a).get(l(i).errors[e.keyName],e.config.name,[]),(n,o)=>(u(),d("small",{class:"errMsg",key:o},m(n),1))),128))],2)):e.config.field_type.name=="number"||e.config.field_type.name=="percentage"?(u(),d("div",{key:1,class:g(["fieldInput flex flex-column",{required:l(a).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(u(),d("label",{key:0,for:e.config.name},m(e.config.label),9,oe)):N("",!0),w(k,{modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":t[2]||(t[2]=n=>l(i).values[e.keyName][e.config.name]=n),inputId:"config.name",mode:"decimal",class:g({invalid:!l(a).isEmpty(l(a).get(l(i).errors[e.keyName],e.config.name,[]))}),useGrouping:l(a).get(e.config.rules,"comma_separated",!1),suffix:e.config.field_type.name=="percentage"?"%":"",minFractionDigits:l(a).get(e.config.rules,"decimal",null),maxFractionDigits:l(a).get(e.config.rules,"decimal",null),onBlur:t[3]||(t[3]=n=>V(e.config))},null,8,["modelValue","class","useGrouping","suffix","minFractionDigits","maxFractionDigits"]),(u(!0),d(r,null,v(l(a).get(l(i).errors[e.keyName],e.config.name,[]),(n,o)=>(u(),d("small",{class:"errMsg",key:o},m(n),1))),128))],2)):e.config.field_type.name=="currency"?(u(),d("div",{key:2,class:g(["fieldInput flex flex-column",{required:l(a).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(u(),d("label",{key:0,for:e.config.name},m(e.config.label),9,fe)):N("",!0),l(a).get(l(i).values[e.keyName],e.config.currencySource.field+".code","")==""?(u(),c(k,{key:1,disabled:l(i).formSaving||l(a).includes(l(i).disabled,e.config._id),modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":t[4]||(t[4]=n=>l(i).values[e.keyName][e.config.name]=n),inputId:"config.name",mode:"decimal",class:g({invalid:!l(a).isEmpty(l(a).get(l(i).errors[e.keyName],e.config.name,[]))}),useGrouping:l(a).get(e.config.rules,"comma_separated",!1),minFractionDigits:l(a).get(e.config.rules,"decimal",null),maxFractionDigits:l(a).get(e.config.rules,"decimal",null),onBlur:t[5]||(t[5]=n=>V(e.config))},null,8,["disabled","modelValue","class","useGrouping","minFractionDigits","maxFractionDigits"])):(u(),c(k,{key:2,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":t[6]||(t[6]=n=>l(i).values[e.keyName][e.config.name]=n),disabled:l(i).formSaving||l(a).includes(l(i).disabled,e.config._id),inputId:"config.name",mode:"currency",class:g({invalid:!l(a).isEmpty(l(a).get(l(i).errors[e.keyName],e.config.name,[]))}),useGrouping:l(a).get(e.config.rules,"comma_separated",!1),currency:e.config.field_type.name=="currency"?l(a).get(l(i).values[e.keyName],e.config.currencySource.field+".code",""):"",currencyDisplay:l(a).get(e.config,"currencySource.concat",""),minFractionDigits:l(a).get(e.config.rules,"decimal",null),maxFractionDigits:l(a).get(e.config.rules,"decimal",null),onBlur:t[7]||(t[7]=n=>V(e.config))},null,8,["modelValue","disabled","class","useGrouping","currency","currencyDisplay","minFractionDigits","maxFractionDigits"])),(u(!0),d(r,null,v(l(a).get(l(i).errors[e.keyName],e.config.name,[]),(n,o)=>(u(),d("small",{class:"errMsg",key:o},m(n),1))),128))],2)):e.config.field_type.name=="date"?(u(),d("div",me,[e.type!="tableForm"?(u(),d("label",{key:0,for:e.config.name},m(e.config.label),9,ge)):N("",!0),w(S,{class:g(["w-full",{invalid:!l(a).isEmpty(l(a).get(l(i).errors[e.keyName],e.config.name,[])),required:l(a).get(e.config.rules,"required",!1)}]),disabled:l(i).formSaving||l(a).includes(l(i).disabled,e.config._id),modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":t[8]||(t[8]=n=>l(i).values[e.keyName][e.config.name]=n),clearable:"",type:l(a).get(e.config.rules,"date_selection","date"),format:l(a).get(e.config.rules,"date_selection","date")=="month"?"MMM YYYY":l(a).get(e.config.rules,"date_selection","date")=="week"?"YYYY [w]ww":"MM/DD/YYYY","value-format":"YYYY-MM-DD",onChange:t[9]||(t[9]=n=>V(e.config))},null,8,["disabled","modelValue","class","type","format"]),(u(!0),d(r,null,v(l(a).get(l(i).errors[e.keyName],e.config.name,[]),(n,o)=>(u(),d("small",{class:"errMsg",key:o},m(n),1))),128))])):e.config.field_type.name=="richTextbox"?(u(),d("div",{key:4,class:g(["fieldInput flex flex-column",{invalid:!l(a).isEmpty(l(a).get(l(i).errors[e.keyName],e.config.name,[])),required:l(a).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(u(),d("label",{key:0,for:e.config.name},m(e.config.label),9,ce)):N("",!0),w(l(O),{modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":t[10]||(t[10]=n=>l(i).values[e.keyName][e.config.name]=n),"api-key":j.value,init:{plugins:["lists link image paste help wordcount table"],menubar:!1,toolbar:"undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | image table"},disabled:l(i).formSaving||l(a).includes(l(i).disabled,e.config._id)},null,8,["modelValue","api-key","disabled"]),(u(!0),d(r,null,v(l(a).get(l(i).errors[e.keyName],e.config.name,[]),(n,o)=>(u(),d("small",{class:"errMsg",key:o},m(n),1))),128))],2)):e.config.field_type.name=="longText"?(u(),d("div",{key:5,class:g(["fieldInput flex flex-column",{invalid:!l(a).isEmpty(l(a).get(l(i).errors[e.keyName],e.config.name,[])),required:l(a).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(u(),d("label",{key:0,for:e.config.name},m(e.config.label),9,se)):N("",!0),w(l(O),{"api-key":j.value,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":t[11]||(t[11]=n=>l(i).values[e.keyName][e.config.name]=n),init:{plugins:["lists link image paste help wordcount"],menubar:!1,toolbar:"undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent"},disabled:l(i).formSaving||l(a).includes(l(i).disabled,e.config._id)},null,8,["api-key","modelValue","disabled"]),(u(!0),d(r,null,v(l(a).get(l(i).errors[e.keyName],e.config.name,[]),(n,o)=>(u(),d("small",{class:"errMsg",key:o},m(n),1))),128))],2)):e.config.field_type.name=="boolean"?(u(),d("div",{key:6,class:g(["fieldInput checkbox",{required:l(a).get(e.config.rules,"required",!1)}])},[l(a).get(e.config.rules,"switch",!1)?(u(),c(Z,{key:0,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":t[12]||(t[12]=n=>l(i).values[e.keyName][e.config.name]=n),disabled:l(i).formSaving||l(a).includes(l(i).disabled,e.config._id),inputId:e.config.name},null,8,["modelValue","disabled","inputId"])):(u(),c(C,{key:1,inputId:e.config.name,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":t[13]||(t[13]=n=>l(i).values[e.keyName][e.config.name]=n),binary:!0,disabled:l(i).formSaving||l(a).includes(l(i).disabled,e.config._id)},null,8,["inputId","modelValue","disabled"])),e.type!="tableForm"?(u(),d("label",{key:2,for:e.config.name},m(e.config.label),9,ye)):N("",!0)],2)):e.config.field_type.name=="picklist"?(u(),d("div",{key:7,class:g(["fieldInput flex flex-column",{required:l(a).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(u(),d("label",{key:0,for:e.config.name},m(e.config.label),9,re)):N("",!0),l(a).get(e.config.rules,"checkbox",!1)||l(a).get(e.config.rules,"checkbox_inline",!1)||l(a).get(e.config.rules,"radiobutton",!1)||l(a).get(e.config.rules,"radiobutton_inline",!1)?(u(),d("div",{key:1,class:g(l(a).get(e.config.rules,"checkbox_inline",!1)||l(a).get(e.config.rules,"radiobutton_inline",!1)?"card flex flex-wrap justify-content-center gap-3":"")},[(u(!0),d(r,null,v(l(q)(e.config.listName),n=>(u(),d("div",{key:n._id,class:g(["flex align-items-center",l(a).get(e.config.rules,"checkbox",!1)||l(a).get(e.config.rules,"radiobutton",!1)?"mb-1 mt-1 ml-3":""])},[l(a).get(e.config.rules,"checkbox",!1)||l(a).get(e.config.rules,"checkbox_inline",!1)?(u(),c(C,{key:0,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":t[14]||(t[14]=o=>l(i).values[e.keyName][e.config.name]=o),inputId:n._id,name:"category",value:n,disabled:l(i).formSaving||l(a).includes(l(i).disabled,e.config._id)},null,8,["modelValue","inputId","value","disabled"])):(u(),c(z,{key:1,inputId:n._id,name:"dynamic",value:n,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":t[15]||(t[15]=o=>l(i).values[e.keyName][e.config.name]=o),disabled:l(i).formSaving||l(a).includes(l(i).disabled,e.config._id)},null,8,["inputId","value","modelValue","disabled"])),F("label",{for:n._id,class:"ml-1"},m(n.value),9,ve)],2))),128))],2)):l(a).get(e.config.rules,"ss_list_view",!1)||l(a).get(e.config.rules,"ms_list_view",!1)?(u(),c(G,{key:2,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":t[16]||(t[16]=n=>l(i).values[e.keyName][e.config.name]=n),disabled:l(i).formSaving||l(a).includes(l(i).disabled,e.config._id),options:l(q)(e.config.listName),multiple:l(a).get(e.config.rules,"ms_list_view",!1),optionLabel:"value",class:"w-full mt-2 mb-2"},null,8,["modelValue","disabled","options","multiple"])):(u(),c(B,{key:3,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":t[17]||(t[17]=n=>l(i).values[e.keyName][e.config.name]=n),class:g([{invalid:!l(a).isEmpty(l(a).get(l(i).errors[e.keyName],e.config.name,[]))},"w-full"]),multiple:l(h)(e.config.rules),"collapse-tags":l(h)(e.config.rules),"collapse-tags-tooltip":l(h)(e.config.rules),placeholder:"Select",clearable:"",filterable:"",disabled:l(i).formSaving||l(a).includes(l(i).disabled,e.config._id),loading:M.value,size:e.small?"small":"","value-key":"_id",onVisibleChange:$,onChange:t[18]||(t[18]=n=>V(e.config))},{loading:I(()=>[be]),default:I(()=>[(u(!0),d(r,null,v(l(q)(e.config.listName),n=>(u(),c(Y,{key:n._id,label:n.value,value:n},{default:I(()=>[F("span",ke,m(n.value),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","class","multiple","collapse-tags","collapse-tags-tooltip","disabled","loading","size"])),(u(!0),d(r,null,v(l(a).get(l(i).errors[e.keyName],e.config.name,[]),(n,o)=>(u(),d("small",{class:"errMsg mt-1",key:o},m(n),1))),128))],2)):e.config.field_type.name=="lookupModel"?(u(),d("div",{key:8,class:g(["fieldInput flex flex-column",{required:l(a).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(u(),d("label",{key:0,for:e.config.name},m(e.config.label),9,Ne)):N("",!0),l(a).get(e.config.rules,"ss_dropdown",!1)||l(a).get(e.config.rules,"ms_dropdown",!1)?(u(),d(r,{key:1},[l(x)(e.config.uniqueName,"group")?(u(),c(B,{key:0,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":t[19]||(t[19]=n=>l(i).values[e.keyName][e.config.name]=n),disabled:l(i).formSaving||l(a).includes(l(i).disabled,e.config._id),loading:E.value,size:e.small?"small":"",class:g([{invalid:!l(a).isEmpty(l(a).get(l(i).errors[e.keyName],e.config.name,[]))},"w-full"]),placeholder:"Select",clearable:"",filterable:"",onChange:t[20]||(t[20]=n=>V(e.config)),"value-key":"_id",onVisibleChange:U},{default:I(()=>[(u(!0),d(r,null,v(l(x)(e.config.uniqueName,"options"),n=>(u(),c(p,{key:n.label,label:n.label},{default:I(()=>[(u(!0),d(r,null,v(n.options,o=>(u(),c(Y,{key:o._id,label:o.value,value:o},null,8,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","disabled","loading","size","class"])):(u(),c(B,{key:1,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":t[21]||(t[21]=n=>l(i).values[e.keyName][e.config.name]=n),disabled:l(i).formSaving||l(a).includes(l(i).disabled,e.config._id),loading:E.value,"value-key":"_id",size:e.small?"small":"",class:g(["w-full",{invalid:!l(a).isEmpty(l(a).get(l(i).errors[e.keyName],e.config.name,[]))}]),placeholder:"Select",clearable:"",filterable:"",onChange:t[22]||(t[22]=n=>V(e.config)),onVisibleChange:U},{default:I(()=>[(u(!0),d(r,null,v(l(x)(e.config.uniqueName,"options"),n=>(u(),c(Y,{key:n._id,label:n.value,value:n},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled","loading","size","class"]))],64)):l(a).get(e.config.rules,"checkbox",!1)||l(a).get(e.config.rules,"checkbox_inline",!1)||l(a).get(e.config.rules,"radiobutton",!1)||l(a).get(e.config.rules,"radiobutton_inline",!1)?(u(),d("div",{key:2,class:g(l(a).get(e.config.rules,"checkbox_inline",!1)||l(a).get(e.config.rules,"radiobutton_inline",!1)?"card flex flex-wrap justify-content-center gap-3":"")},[(u(!0),d(r,null,v(l(x)(e.config.uniqueName,"options"),n=>(u(),d("div",{key:n._id,class:g(["flex align-items-center",l(a).get(e.config.rules,"checkbox",!1)||l(a).get(e.config.rules,"radiobutton",!1)?"mb-1 mt-1 ml-3":""])},[l(a).get(e.config.rules,"checkbox",!1)||l(a).get(e.config.rules,"checkbox_inline",!1)?(u(),c(C,{key:0,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":t[23]||(t[23]=o=>l(i).values[e.keyName][e.config.name]=o),inputId:n._id,name:"category",value:n,disabled:l(i).formSaving||l(a).includes(l(i).disabled,e.config._id)},null,8,["modelValue","inputId","value","disabled"])):(u(),c(z,{key:1,inputId:n._id,name:"dynamic",value:n,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":t[24]||(t[24]=o=>l(i).values[e.keyName][e.config.name]=o),disabled:l(i).formSaving||l(a).includes(l(i).disabled,e.config._id)},null,8,["inputId","value","modelValue","disabled"])),F("label",{for:n._id,class:"ml-1"},m(n.value),9,Ve)],2))),128))],2)):l(a).get(e.config.rules,"ss_list_view",!1)||l(a).get(e.config.rules,"ms_list_view",!1)?(u(),c(G,{key:3,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":t[25]||(t[25]=n=>l(i).values[e.keyName][e.config.name]=n),options:l(x)(e.config.uniqueName,"options"),multiple:l(a).get(e.config.rules,"ms_list_view",!1),optionLabel:"value",class:"w-full mt-2 mb-2"},null,8,["modelValue","options","multiple"])):(u(),c(l(T),{key:4,field:e.config,keyName:e.keyName,inline:e.inline,module:e.module,entity:e.entity,formField:!0,onChangeValue:t[26]||(t[26]=n=>V(e.config))},null,8,["field","keyName","inline","module","entity"])),(u(!0),d(r,null,v(l(a).get(l(i).errors[e.keyName],e.config.name,[]),(n,o)=>(u(),d("small",{class:"errMsg",key:o},m(n),1))),128))],2)):(u(),d("div",{key:9,class:g(["fieldInput flex flex-column",{required:l(a).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(u(),d("label",{key:0,for:e.config.name},m(e.config.label),9,xe)):N("",!0),w(s,{id:e.config.name,modelValue:l(i).values[e.keyName][e.config.name],"onUpdate:modelValue":t[27]||(t[27]=n=>l(i).values[e.keyName][e.config.name]=n)},null,8,["id","modelValue"])],2))}}};export{Fe as default};
