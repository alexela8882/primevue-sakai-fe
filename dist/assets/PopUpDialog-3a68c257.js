import{u as C,a as M,b as N,r as t,s as T,c as h,o as A,d as P,w as d,e as v,f as x,g as R,t as V,i as U,p as G,q as O}from"./index-c3c56cb5.js";import{u as j}from"./user-55f12847.js";import{u as q}from"./branch-4dcee0d3.js";const z={class:"flex items-center confirmation-content"},F=v("i",{class:"pi pi-exclamation-triangle mr-3",style:{"font-size":"2rem"}},null,-1),I={class:"flex items-center justify-end"},Q={__name:"PopUpDialog",setup(Y){const c=C(),p=M(),f=N(),w=j(),D=q(),m=t(),a=t(),b=t(),{toastTimer:$,toastOpen:E,popUpModalOpen:o,popUpModalData:u,pageData:H}=T(f),S=t(),g=t(),n=t(),l=t(),e=t(),s=t(!1),k=async()=>{s.value=!0,l.value=u.value.data.store.name,e.value=u.value.data.store.action,S.value=u.value.data.api.uri,g.value=u.value.data.api.method,n.value=u.value.data.redirectUrl,await O({url:S.value,method:g.value}).then(r=>{m.value=r.status,a.value=r.data}).catch(r=>{b.value=r.response}),t({}),m.value===200?(l.value==="tagStore"&&tagStore[e.value](a.value.data),l.value==="roleStore"&&roleStore[e.value](a.value.data),l.value==="userStore"&&w[e.value](a.value.data),l.value==="branchStore"&&D[e.value](a.value.data),l.value==="galleryStore"&&(removeUGallery(a.value.data._token),galleryStore[e.value](a.value.data)),l.value==="albumStore"&&(e.value==="deleteAlbum"&&c.push(n.value),e.value==="emptyAlbum"&&albumStore[e.value](a.value.data)),l.value==="photoStore"&&(e.value==="deletePhoto"&&albumStore[e.value](a.value.data),n.value&&c.push(n.value)),l.value==="subdomainStore"&&e.value==="deleteSubdomain"&&subdomainStore[e.value](a.value.data),o.value=!1,p.add({severity:"success",summary:"Success",detail:a.value.message,life:3e3}),s.value=!1):(p.add({severity:"error",summary:"Forbidden",detail:b.value.data.message,life:3e3}),s.value=!1),s.value=!1,o.value=!1,console.log(o.value)};return(r,i)=>{const _=h("Button"),B=h("Dialog");return A(),P(B,{visible:U(o),"onUpdate:visible":i[1]||(i[1]=y=>G(o)?o.value=y:null),style:{width:"450px"},breakpoints:{"960px":"75vw","641px":"95vw"},header:"Confirm",modal:!0},{footer:d(()=>[v("span",I,[x(_,{onClick:i[0]||(i[0]=y=>o.value=!1),type:"button",class:"reddot-button-secondary"},{default:d(()=>[R(" No, cancel ")]),_:1}),x(_,{onClick:k,type:"button",disabled:s.value,loading:s.value,class:"reddot-button-danger",label:s.value?"Please wait...":"Yes, I'm sure"},null,8,["disabled","loading","label"])])]),default:d(()=>[v("div",z,[F,v("span",null,V(U(f).popUpModalData.title),1)])]),_:1},8,["visible"])}}};export{Q as default};
