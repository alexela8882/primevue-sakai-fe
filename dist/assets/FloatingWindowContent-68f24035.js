import{r as f,K as T,B as A,s as I,E as N,o as a,j as n,d as i,a7 as B,m as d,i as c,w as g,f as C,S as R,I as u,J as b}from"./index-e7c0abc4.js";import{D as V}from"./DataTableLoader-0b9513de.js";import{u as j}from"./index-c4381dbf.js";const O={class:"h-full"},x={key:0,class:"p-2"},W={key:1,class:"py-5 h-full"},p={key:2,class:"py-2 h-full"},M={key:3,class:"p-2"},z={__name:"FloatingWindowContent",props:{tab:Object},setup(e){const y=u(()=>b(()=>import("./Form-1b86b4e4.js"),["assets/Form-1b86b4e4.js","assets/index-e7c0abc4.js","assets/index-40ff91a8.css","assets/Validate-e6350b83.js","assets/index-2004fffb.js","assets/Form-5461db5c.css"])),L=u(()=>b(()=>import("./DynamicDataTableMain-2d2ba481.js"),["assets/DynamicDataTableMain-2d2ba481.js","assets/index-e7c0abc4.js","assets/index-40ff91a8.css","assets/Validate-e6350b83.js","assets/DynamicDataTableMain-5df8962c.css"])),k=u(()=>b(()=>import("./DynamicForm-dbdb1205.js"),["assets/DynamicForm-dbdb1205.js","assets/index-e7c0abc4.js","assets/index-40ff91a8.css","assets/index.esm-e320f94d.js"])),s=e,l=f(!1),r=f(),F=j(),w=T(),E=A(),{saveActivityLog:h}=F,{updateTabByField:D}=w;I(E);const P=async o=>{l.value=!0;const t=await h(o);r.value=t,l.value=!1},v=async o=>{l.value=!0;let t=1;o.jump?t=s.tab.module.collection&&s.tab.module.collection.meta.pagination.current_page:t=o.event.page+1,await D({tab:s.tab.name,field:"module",data:{module:s.tab.base_module.name,page:t,per_page:o.per_page}}),l.value=!1},S=async o=>{const t=o.value,m={event:o,page:1,jump:!0,per_page:t,limit:!0};console.log(m.per_page),await v(m)};return N(async()=>{}),(o,t)=>(a(),n("div",O,[e.tab.type==="component"?(a(),n("div",x,[(a(),i(B(e.tab.component)))])):d("",!0),e.tab.type==="static-form"?(a(),n("div",W,[(a(),i(c(k),{key:e.tab.name,form:e.tab.form,loading:l.value,response:r.value,onSaveAction:t[0]||(t[0]=m=>P(m))},null,8,["form","loading","response"]))])):e.tab.type==="module-form"?(a(),n("div",p,[(a(),i(c(y),{key:e.tab.name,config:e.tab},null,8,["config"]))])):e.tab.type=="module"?(a(),n("div",M,[e.tab.base_module?(a(),i(R,{key:0},{fallback:g(()=>[C(V)]),default:g(()=>[(a(),i(c(L),{key:e.tab.base_module._id,mode:"view",moduleId:e.tab.base_module._id,moduleEntityName:e.tab.base_module.mainEntity,moduleName:e.tab.base_module.name,moduleLabel:e.tab.base_module.label,modulePermissions:e.tab.module.permissions,fields:e.tab.module.viewFilterWithFields.fields,data:e.tab.module.collection&&e.tab.module.collection.data,viewFilter:e.tab.module.viewFilterWithFields,collectionLoading:l.value,pagination:e.tab.module.collection&&e.tab.module.collection.meta&&e.tab.module.collection.meta.pagination,onPaginate:v,onLimitPage:S},null,8,["moduleId","moduleEntityName","moduleName","moduleLabel","modulePermissions","fields","data","viewFilter","collectionLoading","pagination"]))]),_:1})):d("",!0)])):d("",!0)]))}};export{z as default};
