import{B as de,a4 as oe,s as pe,a5 as le,r as d,b2 as re,a as be,E as me,a2 as a,G as ue,c as _,o as r,j as v,e as I,t as y,m as F,f as s,w as o,i as f,g as S,F as R,k as _e,d as M,x as k,I as fe,J as ve,q as U}from"./index-62853e10.js";const Se={class:"formSectionLabel flex align-items-center justify-content-between"},Ce={key:0,class:"mb-0"},ye={key:0,class:"flex align-items-center justify-content-center"},Re=["innerHTML"],Pe=["innerHTML"],he={class:"flex align-items-center justify-content-between mt-2"},ge=["innerHTML"],Me={__name:"QuoteLineItem",props:{module:String,panel:Object,formPage:String},setup(b){const q=fe(()=>ve(()=>import("./MutableField-528dea0e.js"),["assets/MutableField-528dea0e.js","assets/index-62853e10.js","assets/index-40ff91a8.css","assets/Validate-97e58e3d.js","assets/Editor-584db963.js","assets/MutableField-a3ea61c1.css"])),c=b,O=de(),G=oe(),{fetchModuleFields:W}=O,{getEntityFields:V}=pe(O),{fetchLookupPaginated:j}=G,{getDefaultValue:z}=le(),C=d([]),i=re("form"),Y=be(),A=d([]),E=d([]),x=d([]),B=d({}),P=d({asServiceSales:"50px",business_unit_ids:"130px",itemCode:"100px",modelCode:"100px",product_id:"270px",HSNCode:"80px",quantity:"80px",list_price_id:"50px",salesPrice:"130px",discount:"90px",subTotal:"130px",vat:"90px",status_id:"100px",commisionPercentSalesAgent:"130px",commisionAmountSalesAgent:"130px"}),T=d(1),$=d(""),N=d(!1),L=d([]),D=d({}),h=d(!1);d([{_id:"5c0723dc678f7161775a1f41",price:1,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5bd13076678f7127291cc866",name:"<p>MIRI TL gas connectors complete set</p>",itemCode:"1320125",modelCode:"TBA",product_type_id:"Replacement Part",description:"<p>MIRI TL gas connectors complete set</p>"}},{_id:"5c0723dc678f7161775a1f43",price:1,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5bd13075678f7127291cc85f",name:"<p>MIRI TL compartment complete with lid, heaters, glass, bottom and sensors</p>",itemCode:"1320124",modelCode:"NA",product_type_id:"Replacement Part",description:"<p>MIRI TL compartment complete with lid, heaters, glass, bottom and sensors</p>"}},{_id:"5c0723fb678f71603633a4f8",price:1,inclusiveServices:[],product_id:{_id:"5bfba8c0678f7154e5247e92",name:"<p>Shipping Charge</p>",itemCode:"RSR-019",modelCode:"RSR-019",product_type_id:"Delivery",description:"<p>Shipping Charge</p>"}},{_id:"5c0723fb678f71603633a4fe",price:1,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5bd12d5b678f71272c1d41ba",name:"<p>Replacement parts</p>",itemCode:"RSR-030",modelCode:"RSR-030",product_type_id:"Accessory",description:"<p>Replacement parts</p>"}},{_id:"5c07241f678f7161443ea1a6",price:10,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5c05d05e678f7161775a142f",name:"Gas connector, CO2",itemCode:"1320014",modelCode:"MRA-1010",product_type_id:"Replacement Part",description:"Gas connector, CO2"}},{_id:"5c072446678f71603a68450e",price:20,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5c05d05e678f7161775a142a",name:"<p>Alarm Port Connector</p>",itemCode:"1320049",modelCode:"MRS-1031",product_type_id:"Replacement Part",description:"<p>Alarm Port Connector</p>"}},{_id:"5c072446678f71603a684510",price:20,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5c05d05e678f7161775a1414",name:"<p>Validation Sensor Connector</p>",itemCode:"1320068",modelCode:"MRS-1033",product_type_id:"Replacement Part",description:"<p>Validation Sensor Connector</p>"}},{_id:"5c072446678f71603a684512",price:20,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5bd13079678f7127291cc97a",name:"<p>12V Regulator</p>",itemCode:"1320102",modelCode:"TBA",product_type_id:"Replacement Part",description:"<p>12V Regulator</p>"}},{_id:"5c072486678f716037405b12",price:35,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5c05d05e678f7161775a1428",name:"<p>BNC Connector</p>",itemCode:"1320047",modelCode:"MRS-1029",product_type_id:"Replacement Part",description:"<p>BNC Connector</p>"}},{_id:"5c072486678f716037405b14",price:35,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5c05d05e678f7161775a1429",name:"<p>USB Connector</p>",itemCode:"1320048",modelCode:"MRS-1030",product_type_id:"Replacement Part",description:"<p>USB Connector</p>"}},{_id:"5c0724a1678f7160354af9e4",price:40,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5bd130e6678f71272b6450d6",name:"<p>Mains cable, US</p>",itemCode:"1320007",modelCode:"MRA-1003",product_type_id:"Replacement Part",description:"<p>Mains cable, US</p>"}},{_id:"5c0724a1678f7160354af9e8",price:40,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5c05d05e678f7161775a141d",name:"Mains cable, Schuko",itemCode:"1320008",modelCode:"MRA-1004",product_type_id:"Replacement Part",description:"Mains cable, Schuko"}},{_id:"5c0724a1678f7160354af9ec",price:40,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5bd13077678f7127291cc8dc",name:"Mains cable, UK",itemCode:"1320009",modelCode:"MRA-1005",product_type_id:"Replacement Part",description:"Mains cable, UK"}},{_id:"5c0724a1678f7160354af9f0",price:40,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5c05d05e678f7161775a142e",name:"Gas connector, N2",itemCode:"1320013",modelCode:"MRA-1009",product_type_id:"Replacement Part",description:"Gas connector, N2"}},{_id:"5c0724a1678f7160354af9f4",price:40,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5c05d05e678f7161775a1430",name:"Data extension cable",itemCode:"1320017",modelCode:"MRA-1013",product_type_id:"Replacement Part",description:"Data extension cable"}},{_id:"5c0724a4678f7160354afab2",price:40,inclusiveServices:[],product_id:{_id:"5bd1300e678f7127270833b8",name:"<p>Accessory, Extra SS Shelf, With 2 Support Rails (For 50L)</p>",itemCode:"5170425",modelCode:"COA-2024-F",product_type_id:"Accessory",description:"<p>Accessory, Extra SS Shelf, With 2 Support Rails (For 50L)</p>"}},{_id:"5c0724bc678f7160397579f2",price:50,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5c05d05e678f7161775a1421",name:"Seal for gas box",itemCode:"1320038",modelCode:"MRS-1020",product_type_id:"Replacement Part",description:"Seal for gas box"}},{_id:"5c0724bc678f7160397579f6",price:45,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5c05d05e678f7161775a1422",name:"Seal for elecronics box",itemCode:"1320039",modelCode:"MRS-1021",product_type_id:"Replacement Part",description:"Seal for elecronics box"}},{_id:"5c0724bc678f7160397579fa",price:50,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5bd13078678f7127291cc913",name:"<p>Cooling fan</p>",itemCode:"1320040",modelCode:"MRS-1022",product_type_id:"Replacement Part",description:"<p>Cooling fan</p>"}},{_id:"5c0724bc678f7160397579fe",price:45,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5c05d05e678f7161775a142b",name:"<p>Mains Connector</p>",itemCode:"1320067",modelCode:"MRS-1032",product_type_id:"Replacement Part",description:"<p>Mains Connector</p>"}},{_id:"5c0724bc678f716039757a02",price:45,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5bd12f82678f71272653a06e",name:"Feet (set of 4)",itemCode:"1320010",modelCode:"MRA-1006",product_type_id:"Replacement Part",description:"Feet (set of 4)"}},{_id:"5c0724bc678f716039757a04",price:45,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5c05d05e678f7161775a1411",name:"<p>Key SP</p>",itemCode:"1320046",modelCode:"MRS-1028",product_type_id:"Replacement Part",description:"<p>Key SP</p>"}},{_id:"5c0724bc678f716039757a06",price:45,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5c05d05e678f7161775a140c",name:"<p>Key Up</p>",itemCode:"1320025",modelCode:"MRS-1007",product_type_id:"Replacement Part",description:"<p>Key Up</p>"}},{_id:"5c0724bc678f716039757a08",price:45,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5c05d05e678f7161775a140d",name:"<p>Key Down</p>",itemCode:"1320026",modelCode:"MRS-1008",product_type_id:"Replacement Part",description:"<p>Key Down</p>"}},{_id:"5c0724bc678f716039757a0a",price:45,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5c05d05e678f7161775a140e",name:"<p>Key Right</p>",itemCode:"1320027",modelCode:"MRS-1009",product_type_id:"Replacement Part",description:"<p>Key Right</p>"}},{_id:"5c0724bc678f716039757a0c",price:45,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5c05d05e678f7161775a140f",name:"<p>Key Alarm Mute</p>",itemCode:"1320028",modelCode:"MRS-1028",product_type_id:"Replacement Part",description:"<p>Key Alarm Mute</p>"}},{_id:"5c0724e2678f7160383775b2",price:55,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5c05d05e678f7161775a141e",name:"Set of labels for MRI-6A10",itemCode:"1320029",modelCode:"MRS-1011",product_type_id:"Replacement Part",description:"Set of labels for MRI-6A10"}},{_id:"5c0724e2678f7160383775b4",price:55,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5bd13078678f7127291cc908",name:"Window for display",itemCode:"1320035",modelCode:"MRS-1017",product_type_id:"Replacement Part",description:"Window for display"}},{_id:"5c0724e2678f7160383775b6",price:55,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5c05d05e678f7161775a1427",name:"Inlet, twin fused/switch",itemCode:"1320057",modelCode:"MRS-1027",product_type_id:"Replacement Part",description:"Inlet, twin fused/switch"}},{_id:"5c072502678f7160344d2c17",price:65,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5c05d05e678f7161775a1424",name:"Serial to USB converter",itemCode:"1320042",modelCode:"MRS-1024",product_type_id:"Replacement Part",description:"Serial to USB converter"}},{_id:"5c072505678f7160344d2cf9",price:70,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5bd13089678f7127291cce31",name:"<p>Bottle for HS-1</p>",itemCode:"1320078",modelCode:"NA",product_type_id:"Replacement Part",description:"<p>Bottle for HS-1</p>"}},{_id:"5c072505678f7160344d2cfb",price:70,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5bd13083678f7127291ccc33",name:"<p>Bulb for Light source</p>",itemCode:"1320152",modelCode:"NA",product_type_id:"Replacement Part",description:"<p>Bulb for Light source</p>"}},{_id:"5c07251a678f7161775a225d",price:70,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5bd12fd2678f71272d5a822a",name:"<p>UV Lamp for 4ft, 5ft, 6ft Cabinets except AC3-4B</p>",itemCode:"5170255",modelCode:"UV-30A",product_type_id:"Accessory",description:"<p>UV Lamp for 4ft, 5ft, 6ft Cabinets except AC3-4B</p>"}},{_id:"5c072520678f7161775a23e1",price:74,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5bd12dbf678f71272d5a77e2",name:"<p>Prefilter, Cardboard Frame, PF-C (565 x 440 x 15mm) Needs 2 for 4’; 3 for 6’</p>",itemCode:"5090016",modelCode:"CRF/PF-C",product_type_id:"Accessory",description:"Prefilter, Cardboard Frame, PF-C (565 x 440 x 15mm) Needs 2 for 4’; 3 for 6’"}},{_id:"5c07255a678f71603a6846a4",price:90,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5bd13079678f7127291cc959",name:"<p>MIRI TL Set of Labels</p>",itemCode:"1320126",modelCode:"TBA",product_type_id:"Replacement Part",description:"<p>MIRI TL Set of Labels</p>"}},{_id:"5c07255a678f71603a6846a6",price:100,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5bd13083678f7127291ccc3f",name:'<p><span style="color: rgb(36, 36, 36);">Set of in-line filters, 2 pcs internal + 2 pcs external&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p><span style="color: rgb(36, 36, 36);">To be replaced once every 12 months</span></p>',itemCode:"1320005",modelCode:"MRA-1001",product_type_id:"Replacement Part",description:'<p><span style="color: rgb(36, 36, 36);">Set of in-line filters, 2 pcs internal + 2 pcs external&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span></p><p><span style="color: rgb(36, 36, 36);">To be replaced once every 12 months</span></p>'}},{_id:"5c07257c678f7160337c75de",price:100,inclusiveServices:[],product_id:{_id:"5bd1300e678f7127270833c8",name:"<p>Accessory, Extra SS Shelf, With 2 Support Rails (For 170L)</p>",itemCode:"5170327",modelCode:"COA-2007-F",product_type_id:"Accessory",description:"<p>Accessory, Extra SS Shelf, With 2 Support Rails (For 170L)</p>"}},{_id:"5c072584678f7160337c77ec",price:110,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5c05d05e678f7161775a1426",name:"Solid state relay",itemCode:"1320044",modelCode:"MRS-1026",product_type_id:"Replacement Part",description:"Solid state relay"}},{_id:"5c072586678f7160337c7872",price:130,inclusiveServices:[],product_id:{_id:"5bd130c9678f712759125983",name:"<p>Option, Reversed Door Swing, Factory Installed</p>",itemCode:"5170474",modelCode:"COA-1004",product_type_id:"Accessory",description:"<p>Option, Reversed Door Swing, Factory Installed</p>"}},{_id:"5c072586678f7160337c7874",price:130,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5bd1300f678f712727083408",name:"<p>Accessory, Stacking Kit</p>",itemCode:"5170483",modelCode:"COA-2008-F",product_type_id:"Accessory",description:"<p>Accessory, Stacking Kit</p>"}},{_id:"5c0725b9678f7160354afd3c",price:125,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5bd13088678f7127291ccdc7",name:"<p>Set of 6 pcs Gas Connection Tube</p>",itemCode:"1320066",modelCode:"MRA-1104",product_type_id:"Replacement Part",description:"<p>Set of 6 pcs. Gas Connection Tube; Accessory for MRI- GA (to connect to MRI-6A10 6x gas sampling ports)</p>"}},{_id:"5c0725d9678f716039757df0",price:150,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5bd12f7b678f712726539e21",name:"<p>Internal Gas Pump</p>",itemCode:"1320023",modelCode:"MRS-1005",product_type_id:"Replacement Part",description:"<p>Internal Gas Pump</p>"}},{_id:"5c072612678f7160344d2e13",price:160,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5c05d05c678f7161775a13c6",name:"<p>SafeSens SV2 Sensor (shelf-life 12 months)</p>",itemCode:"1081277",modelCode:"TBA",product_type_id:"Accessory",description:"<p>SafeSens SV2 Sensor</p>"}},{_id:"5c072618678f7160344d2f61",price:180,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5bd13083678f7127291ccc4c",name:"<p>VOC/HEPA Filter for Miri or Miri TL (To be replaced once every 3 months)</p>",itemCode:"1320011",modelCode:"MRA-1007",product_type_id:"Replacement Part",description:"<p>VOC/HEPA Filter for Miri or Miri TL (To be replaced once every 3 months)</p>"}},{_id:"5c0774e0678f7160337c7ab8",price:200,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5c05d05e678f7161775a1434",name:"<p>Circulation Box</p>",itemCode:"1320021",modelCode:"MRS-1003",product_type_id:"Replacement Part",description:"Circulation box"}},{_id:"5c07750e678f71603633aa48",price:210,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5bd12e18678f71272a3489c3",name:"O2 Sensor To be replaced once every 12 months (ONLY FOR MRI-TL)",itemCode:"1320144",modelCode:"TBA",product_type_id:"Replacement Part",description:"O2 Sensor To be replaced once every 12 months (ONLY FOR MRI-TL)"}},{_id:"5c07750f678f71603633aa58",price:210,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5bd13085678f7127291cccd5",name:"<p>O2 Sensor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p>To be replaced once every 12 months (ONLY FOR MRI-6A10)</p>",itemCode:"1320031",modelCode:"MRS-1013",product_type_id:"Replacement Part",description:"<p>O2 Sensor&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</p><p>To be replaced once every 12 months (ONLY FOR MRI-6A10)</p>"}},{_id:"5c077516678f71603633ac0a",price:180,inclusiveServices:[],product_id:{_id:"5bd1300e678f7127270833d8",name:"<p>Accessory, Extra SS Shelf, With 2 Support Rails (For 240L)</p>",itemCode:"5170426",modelCode:"COA-2025-F",product_type_id:"Accessory",description:"<p>Accessory, Extra SS Shelf, With 2 Support Rails (For 240L)</p>"}},{_id:"5c07753d678f7161443ea61b",price:220,inclusiveServices:[{_id:"5bb164eb678f7106e91508fc",name:"Installation and/or Parts Replacement"}],product_id:{_id:"5c05d05e678f7161775a1435",name:"<p>Gas Manifold</p>",itemCode:"1320022",modelCode:"MRS-1004",product_type_id:"Replacement Part",description:"<p>Gas Manifold</p>"}},{_id:"5c077545678f7161443ea7ef",price:205,inclusiveServices:[],product_id:{_id:"5bd12e7d678f712759124cdf",name:"PC Holder",itemCode:"1320140",modelCode:"NA",product_type_id:"Accessory",description:"PC Holder for Miri"}}]),me(async()=>{a.isEmpty(V.value("SalesOpptItem"))&&await W("SalesOpptItem"),C.value=V.value("SalesOpptItem"),c.formPage=="create"?(x.value=a.reduce(["asServiceSales","business_unit_ids","product_id","HSNCode","quantity","list_price_id","salesPrice","discount","vat","subTotal"],function(e,n,p){return e.push(a.find(C.value,{name:n})),e},[]),E.value=a(C.value).filter(function(e){if(!a.includes(["product_id","list_price_id","salesPrice","vat","quantity","discount","subTotal","asServiceSales"],e.name))return!0}).map("name").value()):(x.value=a.reduce(["status_id","asServiceSales","business_unit_ids","product_id","HSNCode","quantity","list_price_id","salesPrice","discount","vat","subTotal"],function(e,n,p){return e.push(a.find(C.value,{name:n})),e},[]),E.value=a(C.value).filter(function(e){if(!a.includes(["product_id","list_price_id","salesPrice","vat","quantity","discount","subTotal","asServiceSales","status_id"],e.name))return!0}).map("name").value()),B.value=z(C.value,!1),i.value.values[c.panel.panelName]=[]});const J=e=>{A.value=e},Q=()=>{a.forEach(A.value,function(e){let n=a.cloneDeep(B.value);n.product_id=e.product_id,n.salesPrice=e.price,n.listPriceCopied=!0,n.listPrice=e.price,n.branch_id=i.value.values.main.branch_id,n.inclusive_service_ids=e.inclusiveServices,console.log(n),i.value.values[c.panel.panelName].push(n)}),A.value=[]},X=(e,n)=>{console.log(e,n),e=="salesPrice"&&(console.log(i.value.values[c.panel.panelName][n].listPrice,i.value.values[c.panel.panelName][n].salesPrice,i.value.values[c.panel.panelName][n].listPrice!=i.value.values[c.panel.panelName][n].salesPrice),i.value.values[c.panel.panelName][n].listPrice!=i.value.values[c.panel.panelName][n].salesPrice?i.value.values[c.panel.panelName][n].listPriceCopied=!1:i.value.values[c.panel.panelName][n].listPriceCopied=!0)},Z=e=>{i.value.values[c.panel.panelName][e].salesPrice=i.value.values[c.panel.panelName][e].listPrice},ee=e=>{let n=a.get(i.value.values.main,"branch_id._id",""),p=e.discount/100,m=e.salesPrice-e.salesPrice*p;if(n=="5badf748678f7111186ba26e"||n=="5f8510f0a6ebc7423b72d6f2")return a.round(m,0)*e.quantity;if(n=="5bfcf6c9678f71594d642a86"||n=="5badf748678f7111186ba268"){let u=e.vat/100;return(m+m*u)*e.quantity}else if(n=="5c6a88e3a6ebc728735b9db2"){let u=e.commisionPercentDistributor/100;return m=e.salesPrice-e.salesPrice*(p+u),m*e.quantity}else return m*e.quantity};let g=null;const H=async()=>{N.value=!0,g&&g.cancel("Previous search canceled"),g=U.CancelToken.source();try{let e={fieldId:"salesopptitem_list_price_id",page:T.value,moduleName:"salesopportunities",search:$.value},n=[];if(a.isEmpty(i.value.values.main)||(!a.isEmpty(i.value.values.main.currency_id)&&!a.isNull(i.value.values.main.currency_id)?e["SalesOpportunity::currency_id"]=i.value.values.main.currency_id._id:n.push("Currency"),!a.isEmpty(i.value.values.main.pricebook_id)&&!a.isNull(i.value.values.main.pricebook_id)?e["SalesOpportunity::pricebook_id"]=i.value.values.main.pricebook_id._id:n.push("Pricebook")),a.isEmpty(n)){h.value=!0;let p=await j(e,g);L.value=p.data,D.value=a.cloneDeep(a.get(p,"meta.pagination",{})),N.value=!1}else h.value=!1,Y.add({severity:"error",summary:"Error",detail:"Please select "+a.join(n,", "),position:"top-center",life:3e3}),N.value=!1}catch(e){U.isCancel(e)?console.log("Request canceled:",e.message):console.error("Error fetching data:",e)}},ne=async e=>{T.value=e,H()};return ue(i.value.values.main,(e,n)=>{a.forEach(i.value.values[c.panel.panelName],function(p,m){a.isEqual(p.branch_id,i.value.values.main.branch_id)||(i.value.values[c.panel.panelName][m].branch_id=i.value.values.main.branch_id)})}),(e,n)=>{const p=_("el-button"),m=_("ProgressSpinner"),u=_("el-table-column"),ie=_("el-table"),ae=_("el-pagination"),te=_("el-popover"),w=_("Column"),ce=_("el-checkbox"),se=_("DataTable");return r(),v(R,null,[I("div",Se,[b.panel.sections[0].label?(r(),v("h6",Ce,y(b.panel.sections[0].label),1)):F("",!0),s(te,{visible:h.value,placement:"bottom-start",width:880,trigger:"click",onHide:Q},{reference:o(()=>[s(p,{style:{"margin-right":"16px"},disabled:f(i).formSaving,onClick:H},{default:o(()=>[S("Add Products")]),_:1},8,["disabled"])]),default:o(()=>[f(a).isEmpty(L.value)?(r(),v("div",ye,[s(m)])):(r(),v(R,{key:1},[s(ie,{data:L.value,border:"",stripe:"",height:"250",size:"small",onSelectionChange:J},{default:o(()=>[s(u,{type:"selection",width:"30"}),s(u,{width:"100",label:"Item Code"},{default:o(t=>[S(y(t.row.product_id.itemCode),1)]),_:1}),s(u,{width:"120",label:"Model Code"},{default:o(t=>[S(y(t.row.product_id.modelCode),1)]),_:1}),s(u,{width:"250",label:"Product"},{default:o(t=>[I("div",{innerHTML:t.row.product_id.name},null,8,Re)]),_:1}),s(u,{width:"250",label:"Description"},{default:o(t=>[I("div",{innerHTML:t.row.product_id.description},null,8,Pe)]),_:1}),s(u,{width:"100",prop:"price",label:"Price"})]),_:1},8,["data"]),I("div",he,[s(ae,{small:"",background:"",layout:"prev, pager, next","default-page-size":50,"current-page":T.value,total:f(a).get(D.value,"total",0),onCurrentChange:ne},null,8,["current-page","total"]),s(p,{stype:"primary",size:"small",onClick:n[0]||(n[0]=t=>h.value=!1)},{default:o(()=>[S("OK")]),_:1})])],64))]),_:1},8,["visible"])]),s(se,{value:f(i).values[b.panel.panelName],size:"small",stripedRows:"",columnResizeMode:"expand",tableStyle:"min-width: 50rem"},{default:o(()=>[(r(!0),v(R,null,_e(x.value,t=>(r(),v(R,{key:t._id},[t.name=="product_id"?(r(),M(w,{key:0,header:"Item Code",style:k("width:"+P.value.itemCode)},{body:o(l=>[S(y(l.data.product_id.itemCode),1)]),_:1},8,["style"])):F("",!0),t.name=="product_id"?(r(),M(w,{key:1,header:"Model Code",style:k("width:"+P.value.modelCode)},{body:o(l=>[S(y(l.data.product_id.modelCode),1)]),_:1},8,["style"])):F("",!0),s(w,{field:t.name,header:t.label,style:k("width:"+P.value[t.name])},{body:o(l=>[t.name=="product_id"?(r(),v("div",{key:0,innerHTML:l.data.product_id.name},null,8,ge)):t.name=="list_price_id"?(r(),M(ce,{key:1,modelValue:f(i).values[b.panel.panelName][l.index].listPriceCopied,"onUpdate:modelValue":K=>f(i).values[b.panel.panelName][l.index].listPriceCopied=K,disabled:f(i).values[b.panel.panelName][l.index].listPrice==f(i).values[b.panel.panelName][l.index].salesPrice,onChange:K=>Z(l.index),size:"small"},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])):t.name=="subTotal"?(r(),v(R,{key:2},[S(y(ee(l.data)),1)],64)):(r(),M(f(q),{key:3,config:t,mutableIndex:l.index,keyName:b.panel.panelName,type:"tableForm",entity:b.panel.entityName,module:b.module,inputWidth:P.value[t.name],onChangeValue:X},null,8,["config","mutableIndex","keyName","entity","module","inputWidth"]))]),_:2},1032,["field","header","style"])],64))),128))]),_:1},8,["value"])],64)}}};export{Me as default};
