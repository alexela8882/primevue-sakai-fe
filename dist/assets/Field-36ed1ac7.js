import{a3 as p,s as _,a4 as ee,r as q,b1 as le,E as ie,a7 as i,c as k,o as u,j as d,t as f,m as b,f as x,i as l,n as m,F as s,k as y,d as g,e as I,w,I as ne,J as ae}from"./index-e1fe9d82.js";import{v as te}from"./Validate-570dbf18.js";import{E as G}from"./Editor-e88284a7.js";const ue=["for"],de=["for"],oe=["for"],fe={key:3,class:"fieldInput flex flex-column"},me=["for"],ce=["for"],ge=["for"],se=["for"],re=["for"],ye=["for"],ve={class:"fieldInputSelection"},ke=I("svg",{class:"circular",viewBox:"0 0 50 50"},[I("circle",{class:"path",cx:"25",cy:"25",r:"20",fill:"none"})],-1),be=["for"],Ne=["for"],Ve=["for"],Fe={__name:"Field",props:{config:Object,type:String,keyName:String,inline:Boolean,module:String,entity:String,small:Boolean,formPage:String},emits:["changeValue"],setup(e,{emit:O}){const P=ne(()=>ae(()=>import("./LookupField-02969b1b.js"),["assets/LookupField-02969b1b.js","assets/index-e1fe9d82.js","assets/index-40ff91a8.css","assets/LookupField-373edde0.css"])),c=e,T=O,B=p(),{fetchPicklist:R,fetchLookup:A}=B,{getPicklistByListName:F,getLookupOptions:V}=_(B),{checkFieldIfMultipleSelect:E,controllingFieldChecker:H,parseHiddenFields:J,checkSetValRule:K}=ee(),{validateField:Q}=te();q();const L=q("izbi1p0d9vddiqqrjjtgx2a6ech4jv2wqogrplsesugoa0gs"),n=le("form"),S=q(!1),D=q(!1),N=v=>{if(!c.inline){n.value.errors[c.keyName][v.name]=Q(n.value.values[c.keyName],v,n.value.fields);let t=H(v,n.value.fields,c.entity);if(console.log("fieldChange",v.name,t),!i.isEmpty(t.visible_if)||!i.isEmpty(t.hide_if)){let r=J(n.value.hidden.fields,t,c.entity,n.value.values.main);n.value.hidden.fields=r}if(!i.isEmpty(t.set_val_disable_if)||!i.isEmpty(t.set_val_if)){let r=K(t,n.value.values.main,c.entity);i.isEmpty(r.disabled)||(n.value.disabled=i.union(n.value.disabled,r.disabled)),i.isEmpty(r.removeDisabled)||(n.value.disabled=i.pullAll(n.value.disabled,r.removeDisabled)),i.isEmpty(r.values)||(n.value.values.main=i.merge(n.value.values.main,r.values))}i.isEmpty(t.filtered_by)||i.forEach(t.filtered_by,function(r){console.log(r),n.value.values.main[r]=null})}T("changeValue",v)};ie(async()=>{c.config.field_type.name=="picklist"&&i.get(c.config.rules,"ss_dropdown",!1)!=!0&&i.get(c.config.rules,"ms_dropdown",!1)!=!0&&j(!0),c.config.field_type.name=="lookupModel"&&i.get(c.config.rules,"ss_pop_up",!1)!=!0&&i.get(c.config.rules,"ms_pop_up",!1)!=!0&&i.get(c.config.rules,"ss_dropdown",!1)!=!0&&i.get(c.config.rules,"ms_dropdown",!1)!=!0&&h(!0)});const j=async v=>{if(v){let t=F.value(c.config.listName);i.isEmpty(t)&&(D.value=!0,await R([c.config.listName]),D.value=!1)}},h=async v=>{if(console.log("fetchLookupOptions"),v){let t=V.value(c.config.uniqueName,"group");i.isEmpty(t)&&(S.value=!0,await A(c.module,c.config),S.value=!1)}};return(v,t)=>{const r=k("InputText"),M=k("InputNumber"),W=k("el-date-picker"),X=k("InputSwitch"),C=k("Checkbox"),$=k("RadioButton"),z=k("Listbox"),U=k("el-option"),Y=k("el-select"),Z=k("el-option-group");return e.config.field_type.name=="text"?(u(),d("div",{key:0,class:m(["fieldInput flex flex-column",{required:l(i).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(u(),d("label",{key:0,for:e.config.name},f(e.config.label),9,ue)):b("",!0),x(r,{modelValue:l(n).values[e.keyName][e.config.name],"onUpdate:modelValue":t[0]||(t[0]=a=>l(n).values[e.keyName][e.config.name]=a),id:e.config.name,class:m({"p-invalid":!l(i).isEmpty(l(i).get(l(n).errors[e.keyName],e.config.name,[]))}),disabled:l(n).formSaving||l(i).includes(l(n).disabled,e.config._id),onBlur:t[1]||(t[1]=a=>N(e.config))},null,8,["modelValue","id","class","disabled"]),(u(!0),d(s,null,y(l(i).get(l(n).errors[e.keyName],e.config.name,[]),(a,o)=>(u(),d("small",{class:"errMsg",key:o},f(a),1))),128))],2)):e.config.field_type.name=="number"||e.config.field_type.name=="percentage"?(u(),d("div",{key:1,class:m(["fieldInput flex flex-column",{required:l(i).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(u(),d("label",{key:0,for:e.config.name},f(e.config.label),9,de)):b("",!0),x(M,{modelValue:l(n).values[e.keyName][e.config.name],"onUpdate:modelValue":t[2]||(t[2]=a=>l(n).values[e.keyName][e.config.name]=a),inputId:"config.name",mode:"decimal",class:m({invalid:!l(i).isEmpty(l(i).get(l(n).errors[e.keyName],e.config.name,[]))}),useGrouping:l(i).get(e.config.rules,"comma_separated",!1),suffix:e.config.field_type.name=="percentage"?"%":"",minFractionDigits:l(i).get(e.config.rules,"decimal",null),maxFractionDigits:l(i).get(e.config.rules,"decimal",null),onBlur:t[3]||(t[3]=a=>N(e.config))},null,8,["modelValue","class","useGrouping","suffix","minFractionDigits","maxFractionDigits"]),(u(!0),d(s,null,y(l(i).get(l(n).errors[e.keyName],e.config.name,[]),(a,o)=>(u(),d("small",{class:"errMsg",key:o},f(a),1))),128))],2)):e.config.field_type.name=="currency"?(u(),d("div",{key:2,class:m(["fieldInput flex flex-column",{required:l(i).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(u(),d("label",{key:0,for:e.config.name},f(e.config.label),9,oe)):b("",!0),l(i).get(l(n).values[e.keyName],e.config.currencySource.field+".code","")==""?(u(),g(M,{key:1,disabled:l(n).formSaving||l(i).includes(l(n).disabled,e.config._id),modelValue:l(n).values[e.keyName][e.config.name],"onUpdate:modelValue":t[4]||(t[4]=a=>l(n).values[e.keyName][e.config.name]=a),inputId:"config.name",mode:"decimal",class:m({invalid:!l(i).isEmpty(l(i).get(l(n).errors[e.keyName],e.config.name,[]))}),useGrouping:l(i).get(e.config.rules,"comma_separated",!1),minFractionDigits:l(i).get(e.config.rules,"decimal",null),maxFractionDigits:l(i).get(e.config.rules,"decimal",null),onBlur:t[5]||(t[5]=a=>N(e.config))},null,8,["disabled","modelValue","class","useGrouping","minFractionDigits","maxFractionDigits"])):(u(),g(M,{key:2,modelValue:l(n).values[e.keyName][e.config.name],"onUpdate:modelValue":t[6]||(t[6]=a=>l(n).values[e.keyName][e.config.name]=a),disabled:l(n).formSaving||l(i).includes(l(n).disabled,e.config._id),inputId:"config.name",mode:"currency",class:m({invalid:!l(i).isEmpty(l(i).get(l(n).errors[e.keyName],e.config.name,[]))}),useGrouping:l(i).get(e.config.rules,"comma_separated",!1),currency:e.config.field_type.name=="currency"?l(i).get(l(n).values[e.keyName],e.config.currencySource.field+".code",""):"",currencyDisplay:l(i).get(e.config,"currencySource.concat",""),minFractionDigits:l(i).get(e.config.rules,"decimal",null),maxFractionDigits:l(i).get(e.config.rules,"decimal",null),onBlur:t[7]||(t[7]=a=>N(e.config))},null,8,["modelValue","disabled","class","useGrouping","currency","currencyDisplay","minFractionDigits","maxFractionDigits"])),(u(!0),d(s,null,y(l(i).get(l(n).errors[e.keyName],e.config.name,[]),(a,o)=>(u(),d("small",{class:"errMsg",key:o},f(a),1))),128))],2)):e.config.field_type.name=="date"?(u(),d("div",fe,[e.type!="tableForm"?(u(),d("label",{key:0,for:e.config.name},f(e.config.label),9,me)):b("",!0),x(W,{class:m(["w-full",{invalid:!l(i).isEmpty(l(i).get(l(n).errors[e.keyName],e.config.name,[])),required:l(i).get(e.config.rules,"required",!1)}]),disabled:l(n).formSaving||l(i).includes(l(n).disabled,e.config._id),modelValue:l(n).values[e.keyName][e.config.name],"onUpdate:modelValue":t[8]||(t[8]=a=>l(n).values[e.keyName][e.config.name]=a),clearable:"",type:l(i).get(e.config.rules,"date_selection","date"),format:l(i).get(e.config.rules,"date_selection","date")=="month"?"MMM YYYY":l(i).get(e.config.rules,"date_selection","date")=="week"?"YYYY [w]ww":"MM/DD/YYYY","value-format":"YYYY-MM-DD",onChange:t[9]||(t[9]=a=>N(e.config))},null,8,["disabled","modelValue","class","type","format"]),(u(!0),d(s,null,y(l(i).get(l(n).errors[e.keyName],e.config.name,[]),(a,o)=>(u(),d("small",{class:"errMsg",key:o},f(a),1))),128))])):e.config.field_type.name=="richTextBox"?(u(),d("div",{key:4,class:m(["fieldInput flex flex-column",{invalid:!l(i).isEmpty(l(i).get(l(n).errors[e.keyName],e.config.name,[])),required:l(i).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(u(),d("label",{key:0,for:e.config.name},f(e.config.label),9,ce)):b("",!0),x(l(G),{class:"required","api-key":L.value,init:{plugins:["lists link image paste help wordcount table"],menubar:!1,toolbar:"undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | image table"}},null,8,["api-key"]),(u(!0),d(s,null,y(l(i).get(l(n).errors[e.keyName],e.config.name,[]),(a,o)=>(u(),d("small",{class:"errMsg",key:o},f(a),1))),128))],2)):e.config.field_type.name=="longText"?(u(),d("div",{key:5,class:m(["fieldInput flex flex-column",{invalid:!l(i).isEmpty(l(i).get(l(n).errors[e.keyName],e.config.name,[])),required:l(i).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(u(),d("label",{key:0,for:e.config.name},f(e.config.label),9,ge)):b("",!0),x(l(G),{"api-key":L.value,init:{plugins:["lists link image paste help wordcount"],menubar:!1,toolbar:"undo redo | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent"}},null,8,["api-key"]),(u(!0),d(s,null,y(l(i).get(l(n).errors[e.keyName],e.config.name,[]),(a,o)=>(u(),d("small",{class:"errMsg",key:o},f(a),1))),128))],2)):e.config.field_type.name=="boolean"?(u(),d("div",{key:6,class:m(["fieldInput checkbox",{required:l(i).get(e.config.rules,"required",!1)}])},[l(i).get(e.config.rules,"switch",!1)?(u(),g(X,{key:0,modelValue:l(n).values[e.keyName][e.config.name],"onUpdate:modelValue":t[10]||(t[10]=a=>l(n).values[e.keyName][e.config.name]=a),disabled:l(n).formSaving||l(i).includes(l(n).disabled,e.config._id),inputId:e.config.name},null,8,["modelValue","disabled","inputId"])):(u(),g(C,{key:1,inputId:e.config.name,modelValue:l(n).values[e.keyName][e.config.name],"onUpdate:modelValue":t[11]||(t[11]=a=>l(n).values[e.keyName][e.config.name]=a),binary:!0,disabled:l(n).formSaving||l(i).includes(l(n).disabled,e.config._id)},null,8,["inputId","modelValue","disabled"])),e.type!="tableForm"?(u(),d("label",{key:2,for:e.config.name},f(e.config.label),9,se)):b("",!0)],2)):e.config.field_type.name=="picklist"?(u(),d("div",{key:7,class:m(["fieldInput flex flex-column",{required:l(i).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(u(),d("label",{key:0,for:e.config.name},f(e.config.label),9,re)):b("",!0),l(i).get(e.config.rules,"checkbox",!1)||l(i).get(e.config.rules,"checkbox_inline",!1)||l(i).get(e.config.rules,"radiobutton",!1)||l(i).get(e.config.rules,"radiobutton_inline",!1)?(u(),d("div",{key:1,class:m(l(i).get(e.config.rules,"checkbox_inline",!1)||l(i).get(e.config.rules,"radiobutton_inline",!1)?"card flex flex-wrap justify-content-center gap-3":"")},[(u(!0),d(s,null,y(l(F)(e.config.listName),a=>(u(),d("div",{key:a._id,class:m(["flex align-items-center",l(i).get(e.config.rules,"checkbox",!1)||l(i).get(e.config.rules,"radiobutton",!1)?"mb-1 mt-1 ml-3":""])},[l(i).get(e.config.rules,"checkbox",!1)||l(i).get(e.config.rules,"checkbox_inline",!1)?(u(),g(C,{key:0,modelValue:l(n).values[e.keyName][e.config.name],"onUpdate:modelValue":t[12]||(t[12]=o=>l(n).values[e.keyName][e.config.name]=o),inputId:a._id,name:"category",value:a,disabled:l(n).formSaving||l(i).includes(l(n).disabled,e.config._id)},null,8,["modelValue","inputId","value","disabled"])):(u(),g($,{key:1,inputId:a._id,name:"dynamic",value:a,modelValue:l(n).values[e.keyName][e.config.name],"onUpdate:modelValue":t[13]||(t[13]=o=>l(n).values[e.keyName][e.config.name]=o),disabled:l(n).formSaving||l(i).includes(l(n).disabled,e.config._id)},null,8,["inputId","value","modelValue","disabled"])),I("label",{for:a._id,class:"ml-1"},f(a.value),9,ye)],2))),128))],2)):l(i).get(e.config.rules,"ss_list_view",!1)||l(i).get(e.config.rules,"ms_list_view",!1)?(u(),g(z,{key:2,modelValue:l(n).values[e.keyName][e.config.name],"onUpdate:modelValue":t[14]||(t[14]=a=>l(n).values[e.keyName][e.config.name]=a),disabled:l(n).formSaving||l(i).includes(l(n).disabled,e.config._id),options:l(F)(e.config.listName),multiple:l(i).get(e.config.rules,"ms_list_view",!1),optionLabel:"value",class:"w-full mt-2 mb-2"},null,8,["modelValue","disabled","options","multiple"])):(u(),g(Y,{key:3,modelValue:l(n).values[e.keyName][e.config.name],"onUpdate:modelValue":t[15]||(t[15]=a=>l(n).values[e.keyName][e.config.name]=a),class:m([{invalid:!l(i).isEmpty(l(i).get(l(n).errors[e.keyName],e.config.name,[]))},"w-full"]),multiple:l(E)(e.config.rules),"collapse-tags":l(E)(e.config.rules),"collapse-tags-tooltip":l(E)(e.config.rules),placeholder:"Select",clearable:"",filterable:"",disabled:l(n).formSaving||l(i).includes(l(n).disabled,e.config._id),loading:D.value,size:e.small?"small":"",onVisibleChange:j,onChange:t[16]||(t[16]=a=>N(e.config))},{loading:w(()=>[ke]),default:w(()=>[(u(!0),d(s,null,y(l(F)(e.config.listName),a=>(u(),g(U,{key:a._id,label:a.value,value:a},{default:w(()=>[I("span",ve,f(a.value),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","class","multiple","collapse-tags","collapse-tags-tooltip","disabled","loading","size"])),(u(!0),d(s,null,y(l(i).get(l(n).errors[e.keyName],e.config.name,[]),(a,o)=>(u(),d("small",{class:"errMsg mt-1",key:o},f(a),1))),128))],2)):e.config.field_type.name=="lookupModel"?(u(),d("div",{key:8,class:m(["fieldInput flex flex-column",{required:l(i).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(u(),d("label",{key:0,for:e.config.name},f(e.config.label),9,be)):b("",!0),l(i).get(e.config.rules,"ss_dropdown",!1)||l(i).get(e.config.rules,"ms_dropdown",!1)?(u(),d(s,{key:1},[l(V)(e.config.uniqueName,"group")?(u(),g(Y,{key:0,modelValue:l(n).values[e.keyName][e.config.name],"onUpdate:modelValue":t[17]||(t[17]=a=>l(n).values[e.keyName][e.config.name]=a),disabled:l(n).formSaving||l(i).includes(l(n).disabled,e.config._id),loading:S.value,size:e.small?"small":"",class:m([{invalid:!l(i).isEmpty(l(i).get(l(n).errors[e.keyName],e.config.name,[]))},"w-full"]),placeholder:"Select",clearable:"",filterable:"",onChange:t[18]||(t[18]=a=>N(e.config)),onVisibleChange:h},{default:w(()=>[(u(!0),d(s,null,y(l(V)(e.config.uniqueName,"options"),a=>(u(),g(Z,{key:a.label,label:a.label},{default:w(()=>[(u(!0),d(s,null,y(a.options,o=>(u(),g(U,{key:o._id,label:o.value,value:o},null,8,["label","value"]))),128))]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue","disabled","loading","size","class"])):(u(),g(Y,{key:1,modelValue:l(n).values[e.keyName][e.config.name],"onUpdate:modelValue":t[19]||(t[19]=a=>l(n).values[e.keyName][e.config.name]=a),disabled:l(n).formSaving||l(i).includes(l(n).disabled,e.config._id),loading:S.value,size:e.small?"small":"",class:m(["w-full",{invalid:!l(i).isEmpty(l(i).get(l(n).errors[e.keyName],e.config.name,[]))}]),placeholder:"Select",clearable:"",filterable:"",onChange:t[20]||(t[20]=a=>N(e.config)),onVisibleChange:h},{default:w(()=>[(u(!0),d(s,null,y(l(V)(e.config.uniqueName,"options"),a=>(u(),g(U,{key:a._id,label:a.value,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled","loading","size","class"]))],64)):l(i).get(e.config.rules,"checkbox",!1)||l(i).get(e.config.rules,"checkbox_inline",!1)||l(i).get(e.config.rules,"radiobutton",!1)||l(i).get(e.config.rules,"radiobutton_inline",!1)?(u(),d("div",{key:2,class:m(l(i).get(e.config.rules,"checkbox_inline",!1)||l(i).get(e.config.rules,"radiobutton_inline",!1)?"card flex flex-wrap justify-content-center gap-3":"")},[(u(!0),d(s,null,y(l(V)(e.config.uniqueName,"options"),a=>(u(),d("div",{key:a._id,class:m(["flex align-items-center",l(i).get(e.config.rules,"checkbox",!1)||l(i).get(e.config.rules,"radiobutton",!1)?"mb-1 mt-1 ml-3":""])},[l(i).get(e.config.rules,"checkbox",!1)||l(i).get(e.config.rules,"checkbox_inline",!1)?(u(),g(C,{key:0,modelValue:l(n).values[e.keyName][e.config.name],"onUpdate:modelValue":t[21]||(t[21]=o=>l(n).values[e.keyName][e.config.name]=o),inputId:a._id,name:"category",value:a,disabled:l(n).formSaving||l(i).includes(l(n).disabled,e.config._id)},null,8,["modelValue","inputId","value","disabled"])):(u(),g($,{key:1,inputId:a._id,name:"dynamic",value:a,modelValue:l(n).values[e.keyName][e.config.name],"onUpdate:modelValue":t[22]||(t[22]=o=>l(n).values[e.keyName][e.config.name]=o),disabled:l(n).formSaving||l(i).includes(l(n).disabled,e.config._id)},null,8,["inputId","value","modelValue","disabled"])),I("label",{for:a._id,class:"ml-1"},f(a.value),9,Ne)],2))),128))],2)):l(i).get(e.config.rules,"ss_list_view",!1)||l(i).get(e.config.rules,"ms_list_view",!1)?(u(),g(z,{key:3,modelValue:l(n).values[e.keyName][e.config.name],"onUpdate:modelValue":t[23]||(t[23]=a=>l(n).values[e.keyName][e.config.name]=a),options:l(V)(e.config.uniqueName,"options"),multiple:l(i).get(e.config.rules,"ms_list_view",!1),optionLabel:"value",class:"w-full mt-2 mb-2"},null,8,["modelValue","options","multiple"])):(u(),g(l(P),{key:4,field:e.config,keyName:e.keyName,inline:e.inline,module:e.module,entity:e.entity,formField:!0,onChangeValue:t[24]||(t[24]=a=>N(e.config))},null,8,["field","keyName","inline","module","entity"])),(u(!0),d(s,null,y(l(i).get(l(n).errors[e.keyName],e.config.name,[]),(a,o)=>(u(),d("small",{class:"errMsg",key:o},f(a),1))),128))],2)):(u(),d("div",{key:9,class:m(["fieldInput flex flex-column",{required:l(i).get(e.config.rules,"required",!1)}])},[e.type!="tableForm"?(u(),d("label",{key:0,for:e.config.name},f(e.config.label),9,Ve)):b("",!0),x(r,{id:e.config.name,modelValue:l(n).values[e.keyName][e.config.name],"onUpdate:modelValue":t[25]||(t[25]=a=>l(n).values[e.keyName][e.config.name]=a)},null,8,["id","modelValue"])],2))}}};export{Fe as default};
