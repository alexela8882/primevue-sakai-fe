import{D as S,s as _,b as w,r,x as M,z as O,q as b,o as D,j as E,e as t,n as L,i as T,f as I,E as k,G as B}from"./index-3e251bf1.js";import{u as $}from"./user-2338c0f7.js";import{D as F}from"./DataTable-89745a56.js";const z=l=>(k("data-v-b41f8e3b"),l=l(),B(),l),A={class:"flex flex-column gap-3 mb-5 mt-5"},P={class:"flex justify-content-between"},G={class:"flex flex-column"},N=z(()=>t("div",null,null,-1)),V={__name:"index",setup(l){const d=$();_(d);const{setUsers:v}=d,i=w(),{popUpModalOpen:f,formModalOpen:u,formModalTrigger:m,popUpModalTrigger:x}=_(i),{popUpModalDataFill:y,formModalDataFill:c}=i,s=r(!1),{isDarkTheme:h}=M(),p=r({}),n=r([]),g=()=>{let e={store:{name:"userStore",action:"addUser"},api:{uri:"users/store",method:"POST"},fields:[{label:"First name",name:"first_name",type:"text",value:null},{label:"Last name",name:"last_name",type:"text",value:null},{label:"Middle name",name:"middle_name",type:"text",value:null},{label:"Branch",name:"branch_id",type:"select",value:null,items:n.value},{label:"Email",name:"email",type:"email",value:null},{label:"Password",name:"password",type:"password",value:null}]},a={title:"Add User",type:"primary",data:Object.assign({},e)};c(a),u.value=!0,m.value=!0},U=e=>{let a={store:{name:"userStore",action:"updateUser"},api:{uri:`users/${e._id}/update`,method:"PUT"},fields:[{label:"First name",name:"first_name",type:"text",value:e.first_name},{label:"Last name",name:"last_name",type:"text",value:e.last_name},{label:"Middle name",name:"middle_name",type:"text",value:e.middle_name},{label:"Branch",name:"branch_id",type:"select",value:e.branch_id,items:n.value},{name:"email",type:"email",value:e.email},{name:"password",type:"password",value:null,instruction:"Leave this blank to keep unchanged"}]},o={title:`Edit "${e.name}" User`,type:"primary",data:Object.assign({},a)};c(o),u.value=!0,m.value=!0},j=e=>{console.log(e);let a={store:{name:"userStore",action:"deleteUser"},api:{uri:`users/${e._id}/delete`,method:"DELETE"}};const o={title:`Are you sure you want to delete user: "${e.name}"?`,type:"danger",data:Object.assign({},a)};y(o),f.value=!0,x.value=!0};return O(async()=>{s.value=!0,await b.get("/users").then(e=>{v(e.data.table),p.value=e.data}),await b.get("/branches").then(e=>{n.value=e.data.table,s.value=!1})}),(e,a)=>(D(),E("div",A,[t("div",null,[t("div",P,[t("div",G,[t("span",{class:L(["capitalize text-xl font-bold",`${T(h)?"text-surface-50":"text-blue-800"}`])},"Manage user",2)]),N])]),I(F,{onAddItem:g,onEditItem:U,onDeleteItem:j,localLoading:s.value,data:p.value},null,8,["localLoading","data"])]))}},H=S(V,[["__scopeId","data-v-b41f8e3b"]]);export{H as default};
