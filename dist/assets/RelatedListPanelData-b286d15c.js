import{r as s,N as h,u as w,s as B,G as E,o as c,d as T,w as _,f as N,e as V,j as b,i as j,S as x,m as C,I,J as S}from"./index-6fdddc5c.js";import{u as A}from"./index-878ac572.js";import{D as O}from"./DataTableLoader-6ffd32a4.js";const q={key:0},G={key:1,class:"mb-2 text-600"},H={__name:"RelatedListPanelData",props:{fromTab:{type:Boolean,required:!1,default:!1},relatedList:Object},setup(n){const y=I(()=>S(()=>import("./DynamicDataTableMain-7f13c34f.js"),["assets/DynamicDataTableMain-7f13c34f.js","assets/index-6fdddc5c.js","assets/index-40ff91a8.css","assets/Validate-62b05099.js","assets/DynamicDataTableMain-5df8962c.css"])),i=s(!1),m=h();w();const r=A(),{_getRelatedList:J,_getRelatedLists:R,_getRelatedListsByCname:e}=B(r),{paginateRelatedList:k}=r,t=n,v=s(e.value(t.relatedList.cname)),p=s(e.value(t.relatedList.cname).link),f=s(e.value(t.relatedList.cname).label),g=s(e.value(t.relatedList.cname).fields),d=s(e.value(t.relatedList.cname).collection.data),u=s(e.value(t.relatedList.cname).collection.meta.pagination),L=async a=>{i.value=!0;let l=1;a.jump?l=u.value.current_page:l=a.event.page+1,await k({moduleName:m.params.name,base:m.params.pageid,panel:t.relatedList._id,page:l,limit:a.per_page}),i.value=!1},D=async a=>{const l=a.value;await L({event:a,jump:!0,per_page:l})};return E(()=>R.value,(a,l)=>{let o=a.find(P=>P._id===t.relatedList._id);v.value=e.value(o.cname),p.value=e.value(o.cname).link,f.value=e.value(o.cname).label,g.value=e.value(o.cname).fields,d.value=e.value(o.cname).collection.data,u.value=e.value(o.cname).collection.meta.pagination},{deep:!0}),(a,l)=>v.value?(c(),T(x,{key:0},{fallback:_(()=>[N(O)]),default:_(()=>[V("div",null,[d.value.length>0?(c(),b("div",q,[N(j(y),{mode:"view",moduleId:n.relatedList._id,moduleEntityName:n.relatedList.entityName,moduleName:p.value,moduleLabel:f.value,modulePermissions:[],fields:g.value,data:d.value,pagination:u.value,collectionLoading:i.value,onPaginate:L,onLimitPage:D},null,8,["moduleId","moduleEntityName","moduleName","moduleLabel","fields","data","pagination","collectionLoading"])])):(c(),b("div",G,"No records found"))])]),_:1})):C("",!0)}};export{H as default};
