import{_ as S,s as _,b as w,r,C as M,E as O,q as b,o as E,j as L,e as t,n as T,i as D,f as I,z as k,A as B}from"./index-54e8fe55.js";import{u as $}from"./user-7b49bff7.js";import{D as A}from"./DataTable-b9edbd69.js";const F=l=>(k("data-v-b41f8e3b"),l=l(),B(),l),z={class:"flex flex-column gap-3 mb-5 mt-5"},P={class:"flex justify-content-between"},C={class:"flex flex-column"},N=F(()=>t("div",null,null,-1)),V={__name:"index",setup(l){const d=$();_(d);const{setUsers:v}=d,i=w(),{popUpModalOpen:f,formModalOpen:u,formModalTrigger:m,popUpModalTrigger:y}=_(i),{popUpModalDataFill:x,formModalDataFill:c}=i,s=r(!1),{isDarkTheme:h}=M(),p=r({}),n=r([]),g=()=>{let e={store:{name:"userStore",action:"addUser"},api:{uri:"users/store",method:"POST"},fields:[{label:"First name",name:"first_name",type:"text",value:null},{label:"Last name",name:"last_name",type:"text",value:null},{label:"Middle name",name:"middle_name",type:"text",value:null},{label:"Branch",name:"branch_id",type:"select",value:null,items:n.value},{label:"Email",name:"email",type:"email",value:null},{label:"Password",name:"password",type:"password",value:null}]},a={title:"Add User",type:"primary",data:Object.assign({},e)};c(a),u.value=!0,m.value=!0},U=e=>{let a={store:{name:"userStore",action:"updateUser"},api:{uri:`users/${e._id}/update`,method:"PUT"},fields:[{label:"First name",name:"first_name",type:"text",value:e.first_name},{label:"Last name",name:"last_name",type:"text",value:e.last_name},{label:"Middle name",name:"middle_name",type:"text",value:e.middle_name},{label:"Branch",name:"branch_id",type:"select",value:e.branch_id,items:n.value},{name:"email",type:"email",value:e.email},{name:"password",type:"password",value:null,instruction:"Leave this blank to keep unchanged"}]},o={title:`Edit "${e.name}" User`,type:"primary",data:Object.assign({},a)};c(o),u.value=!0,m.value=!0},j=e=>{console.log(e);let a={store:{name:"userStore",action:"deleteUser"},api:{uri:`users/${e._id}/delete`,method:"DELETE"}};const o={title:`Are you sure you want to delete user: "${e.name}"?`,type:"danger",data:Object.assign({},a)};x(o),f.value=!0,y.value=!0};return O(async()=>{s.value=!0,await b.get("/users").then(e=>{v(e.data.table),p.value=e.data}),await b.get("/branches").then(e=>{n.value=e.data.table,s.value=!1})}),(e,a)=>(E(),L("div",z,[t("div",null,[t("div",P,[t("div",C,[t("span",{class:T(["capitalize text-xl font-bold",`${D(h)?"text-surface-50":"text-blue-800"}`])},"Manage user",2)]),N])]),I(A,{onAddItem:g,onEditItem:U,onDeleteItem:j,localLoading:s.value,data:p.value},null,8,["localLoading","data"])]))}},H=S(V,[["__scopeId","data-v-b41f8e3b"]]);export{H as default};
