import{r as b,v as h,s as k,A as c,z as R,c as u,o as x,j as y,e as o,f as d,w as j,t as a,i as m,m as I}from"./index-283ac5a2.js";const S={class:"flex flex-column gap-3 m-4"},E={class:"flex align-items-center"},O=o("label",{class:"ml-2"},"Choose existing",-1),$={class:"flex align-items-center"},q={key:0},z={class:"flex flex-column gap-3 m-4"},T={class:"flex align-items-center"},U=o("label",{class:"ml-2"},"Create new",-1),L={class:"m-4"},A={class:"flex align-items-center justify-content-end my-2 gap-2"},G={__name:"ConvertMailboxMessage",props:{convertModule:Object,mailboxMessage:Object},setup(w){const i=w,l=b(null),s=b(),v=h(),{getEntityByName:p,getCollection:M,convertMailboxLoading:r}=k(v),{fetchModule:V,convertMailboxToInquiry:C}=v,_=async()=>{r.value=!1,V(i.convertModule.name)},D=()=>{const t=p.value(i.convertModule.name);if(s.value==1){const e=Object.assign({},{source_id:"Email",dateRequested:Date.now(),dateResponded:Date.now(),dateResponded:Date.now(),assigned_to_id:l.value.owner_id,description:`This is a test - ${Date.now()}`,type:t.mainEntity,link_id:l.value._id,email_id:i.mailboxMessage.id,conversation_id:i.mailboxMessage.conversationId});C(e)}};return c(()=>s.value,(t,e)=>{t==2&&(l.value=null)}),c(()=>l.value,(t,e)=>{t&&(s.value=1)}),c(()=>i.convertModule,(t,e)=>{console.log(t),_()}),R(()=>{_(),console.log(p.value(i.convertModule.name))}),(t,e)=>{const f=u("RadioButton"),B=u("Dropdown"),N=u("Divider"),g=u("Button");return x(),y("div",null,[o("div",S,[o("div",E,[d(f,{modelValue:s.value,"onUpdate:modelValue":e[0]||(e[0]=n=>s.value=n),inputId:"ingredient1",name:"1",value:1,disabled:""},null,8,["modelValue"]),O]),d(B,{modelValue:l.value,"onUpdate:modelValue":e[1]||(e[1]=n=>l.value=n),options:m(M).data,optionLabel:"owner_id.email",optionvalue:"_id",filter:"",placeholder:"Select",class:"w-full"},{option:j(n=>[o("div",$,[o("div",null,a(n.option.owner_id.email)+" ("+a(n.option.company)+")",1)])]),_:1},8,["modelValue","options"]),l.value?(x(),y("div",q,[o("div",null,a(l.value.firstName)+" "+a(l.value.lastName),1),o("div",null," Owner: "+a(l.value.owner_id.firstName)+" "+a(l.value.owner_id.lastName),1),o("div",null,"Company: "+a(l.value.company),1),o("div",null,"Status: "+a(l.value.status_id),1),o("div",null,"Country: "+a(l.value.country_id.name),1)])):I("",!0)]),d(N),o("div",z,[o("div",T,[d(f,{modelValue:s.value,"onUpdate:modelValue":e[2]||(e[2]=n=>s.value=n),inputId:"ingredient1",name:"2",value:2},null,8,["modelValue"]),U])]),o("div",L,[o("div",A,[d(g,{onClick:e[3]||(e[3]=n=>t.$emit("trigger-dialog")),disabled:m(r),outlined:"",label:"Cancel",class:"border-round-3xl py-2 px-4 border-color-primary",size:"small"},null,8,["disabled"]),d(g,{onClick:e[4]||(e[4]=n=>D()),disabled:!s.value||m(r),label:"Proceed",class:"border-round-3xl py-2 px-4"},null,8,["disabled"])])])])}}};export{G as default};
