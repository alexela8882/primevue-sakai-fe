import{r as g,J as A,s as I,z as P,c,o as d,d as R,w as u,f as r,e as t,t as k,i as p,j as w,k as z,n as B,F as E,m as N,C as j,_ as q}from"./index-9e27fc45.js";import{u as L,U}from"./index-c9933dcb.js";const $={class:"flex flex-column gap-3 m-3"},D={class:"flex align-items-center justify-content-between"},O={class:"flex align-items-center gap-1"},J=t("div",{class:"text-2xl text-primary font-bold"},"Mailbox",-1),G={class:"font-bold"},H=t("div",null,[t("i",{class:"cursor-pointer pi pi-refresh"})],-1),K={class:"p-input-icon-left w-full"},Q=t("i",{class:"pi pi-search"},null,-1),W=["onClick"],te={__name:"folder",setup(X){const x=j(()=>q(()=>import("./MailboxMessage-6a9d3736.js"),["assets/MailboxMessage-6a9d3736.js","assets/index-9e27fc45.js","assets/index-86c8a9da.css","assets/index-c9933dcb.js"])),a=g(),o=g(),b=A(),_=L(),{mailFolderLoading:Y,getMailFolder:f,getMailFolderMessages:m}=I(_),{fetchMailFolder:M,fetchMailFolderMessages:y}=_,C={auth:{clientId:"002454d9-50f5-4e5f-83ab-d5291500800a"}},l=new U(C);l.handleRedirectCallback((e,s)=>{});const T=async()=>{var e={scopes:["user.read","mail.send"]};await l.loginPopup(e).then(s=>{}).catch(s=>{})},S=e=>{console.log(e),a.value=e},F=async()=>{if(l.getAccount()){var e={scopes:["user.read","mail.send"]};await l.acquireTokenSilent(e).then(s=>{o.value=s.accessToken,console.log(s.accessToken)}).catch(s=>{if(s.name==="InteractionRequiredAuthError")return l.acquireTokenPopup(e).then(i=>{o.value=i.accessToken}).catch(i=>{})})}};return P(async()=>{await F(),o.value||await T(),await M(o.value,b.params.id),await y(o.value,f.value),m.value.map((e,s)=>{s===0&&(a.value=e)})}),(e,s)=>{const i=c("InputText"),v=c("SplitterPanel"),V=c("Splitter");return d(),R(V,{class:"mb-5"},{default:u(()=>[r(v,{class:"flex",size:5},{default:u(()=>[t("div",null,[t("div",$,[t("div",D,[t("div",O,[J,t("div",G,"("+k(p(f).displayName)+")",1)]),H]),t("div",null,[t("div",null,[t("span",K,[Q,r(i,{modelValue:e.value1,"onUpdate:modelValue":s[0]||(s[0]=n=>e.value1=n),placeholder:"Search",class:"w-full"},null,8,["modelValue"])])])])]),a.value?(d(!0),w(E,{key:0},z(p(m),(n,h)=>(d(),w("div",{key:h,onClick:Z=>S(n),class:B(["p-4 cursor-pointer border-1 border-300 border-x-none white-space-nowrap overflow-hidden text-overflow-ellipsis",`${h!==0&&"border-top-none"} ${n.id===a.value.id&&"bg-primary-100"}`])},k(n.subject),11,W))),128)):N("",!0)])]),_:1}),r(v,{class:"flex",size:75},{default:u(()=>[r(p(x),{token:o.value,message:a.value},null,8,["token","message"])]),_:1})]),_:1})}}};export{te as default};
