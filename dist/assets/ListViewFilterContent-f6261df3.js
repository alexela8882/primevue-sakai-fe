import{r as m,a3 as A,s as z,E,c as n,o as t,j as b,e as o,f as u,t as r,F as I,k as N,m as T,d as i,a1 as w,i as _}from"./index-89acb37e.js";const P=o("div",{class:"p-3"},[o("div",{class:"text-3xl text-color-secondary"},"Filters")],-1),R={class:"flex flex-column gap-4 p-3 text-600 cursor-pointer"},q=o("div",null,"Filter by Owner",-1),G={class:"text-lg text-800"},H=["onClick"],J={class:"text-lg text-800"},K={class:"flex justify-content-between"},Q={class:"filter-by-owner flex flex-column p-3 text-600 gap-3"},W=o("div",{class:"text-xl text-color-secondary"},"Filter by Owner",-1),X={class:"flex flex-column gap-3"},Y={class:"flex align-items-center"},Z=["for"],ee={class:"flex align-items-center"},le=["for"],ae={class:"flex align-items-center justify-content-end"},oe={class:"filter-by-owner flex flex-column p-3 text-600 gap-3"},te={class:"text-xl text-color-secondary"},se={class:"flex flex-column gap-3"},de={class:"flex justify-content-end gap-2"},ue={__name:"ListViewFilterContent",props:{baseModule:Object,module:Object},setup(s){const O=s,y=m(!1),f=m(!1),d=m(!1),e=m({name:null,filters:[],fields:{mode:"new",field:null,operator:null,value:null},default:{field:null,operator:null,value:null}}),x=A(),{getPicklist:p}=z(x),{fetchPicklist:C}=x,M=()=>{e.value.fields=Object.assign({},e.value.default),e.value.fields.mode="new",f.value=!1,d.value=!0},B=(v,l)=>{e.value.fields=Object.assign({},v),e.value.fields.index=l,e.value.fields.mode="edit",f.value=!1,d.value=!0},$=()=>{d.value=!d.value,e.value.filters.push(e.value.fields)},h=v=>{d.value=!d.value,e.value.filters[v.index]=Object.assign({},v)},j=()=>{f.value=!0,d.value=!1};return E(async()=>{e.value.name=`All ${O.baseModule.name}`,Object.keys(p.value).length===0&&(y.value=!0,await C("filter_operators"),y.value=!1)}),(v,l)=>{const F=n("divider"),g=n("RadioButton"),c=n("Button"),k=n("Dropdown"),S=n("Checkbox"),U=n("Calendar"),L=n("MultiSelect"),D=n("inputText");return t(),b("div",null,[o("div",null,[P,u(F,{class:"py-0 my-0"}),o("div",R,[o("div",{onClick:j,class:"flex flex-column gap-2 p-3 border-1 border-400 hover:border-600 hover:surface-100 border-round-md"},[q,o("div",G,r(e.value.name),1)]),e.value.filters.length>=1?(t(!0),b(I,{key:0},N(e.value.filters,(a,V)=>(t(),b("div",{onClick:ne=>B(a,V),key:V,class:"flex flex-column gap-2 p-3 border-1 border-400 hover:border-600 bg-orange-100 hover:bg-orange-200 border-round-md"},[o("div",null,r(a.field.label),1),o("div",J,r(a.operator.label)+' "'+r(a.value)+'"',1)],8,H))),128)):T("",!0),o("div",K,[o("a",{onClick:M,href:"javascript:void(0);"},"add filter"),o("a",{onClick:l[0]||(l[0]=a=>e.value.filters=[]),href:"javascript:void(0);"},"remove all")])])]),(t(),i(w,{to:`${f.value?".ddt-div-1":".hidden-div"}`},[o("div",Q,[W,o("div",X,[o("div",Y,[u(g,{modelValue:e.value.name,"onUpdate:modelValue":l[1]||(l[1]=a=>e.value.name=a),inputId:`All ${s.baseModule.name}`,value:`all ${s.baseModule.name}`},null,8,["modelValue","inputId","value"]),o("label",{for:`All ${s.baseModule.name}`,class:"ml-2"},"All "+r(s.baseModule.name),9,Z)]),o("div",ee,[u(g,{modelValue:e.value.name,"onUpdate:modelValue":l[2]||(l[2]=a=>e.value.name=a),inputId:`My ${s.baseModule.name}`,value:`owned ${s.baseModule.name}`},null,8,["modelValue","inputId","value"]),o("label",{for:`My ${s.baseModule.name}`,class:"ml-2"},"My "+r(s.baseModule.name),9,le)]),o("div",ae,[u(c,{onClick:l[3]||(l[3]=a=>f.value=!1),label:"DONE",outlined:"",size:"large"})])])])],8,["to"])),(t(),i(w,{to:`${d.value?".ddt-div-1":".hidden-div"}`},[o("div",oe,[o("div",te,r(e.value.fields.mode=="new"?"Add filter":"Edit filter"),1),o("div",se,[u(k,{modelValue:e.value.fields.field,"onUpdate:modelValue":l[4]||(l[4]=a=>e.value.fields.field=a),options:s.module.fields,optionLabel:"label",placeholder:"Select a field",class:"w-full",filter:""},null,8,["modelValue","options"]),u(k,{modelValue:e.value.fields.operator,"onUpdate:modelValue":l[5]||(l[5]=a=>e.value.fields.operator=a),options:_(p).filter_operators&&_(p).filter_operators.values,optionLabel:"label",optionValue:"value",placeholder:"Select an operator",class:"w-full"},null,8,["modelValue","options"]),e.value.fields.field&&e.value.fields.field.field_type.name==="boolean"?(t(),i(S,{key:0,modelValue:e.value.fields.value,"onUpdate:modelValue":l[6]||(l[6]=a=>e.value.fields.value=a),binary:"",variant:"filled"},null,8,["modelValue"])):e.value.fields.field&&e.value.fields.field.field_type.name==="date"?(t(),i(U,{key:1,modelValue:e.value.fields.value,"onUpdate:modelValue":l[7]||(l[7]=a=>e.value.fields.value=a)},null,8,["modelValue"])):e.value.fields.field&&(e.value.fields.field.field_type.name==="lookupModel"||e.value.fields.field.field_type.name==="picklist")?(t(),i(L,{key:2,modelValue:e.value.fields.value,"onUpdate:modelValue":l[8]||(l[8]=a=>e.value.fields.value=a),options:v.cities,optionLabel:"name",placeholder:"Select Cities",maxSelectedLabels:3,class:"w-full md:w-20rem"},null,8,["modelValue","options"])):(t(),i(D,{key:3,modelValue:e.value.fields.value,"onUpdate:modelValue":l[9]||(l[9]=a=>e.value.fields.value=a)},null,8,["modelValue"]))]),o("div",de,[u(c,{onClick:l[10]||(l[10]=a=>d.value=!1),outlined:"",label:"Cancel",severity:"secondary",size:"large"}),e.value.fields.mode==="new"?(t(),i(c,{key:0,onClick:$,disabled:!e.value.fields.field||!e.value.fields.operator,outlined:"",label:"Done",size:"large"},null,8,["disabled"])):(t(),i(c,{key:1,onClick:l[11]||(l[11]=a=>h(e.value.fields)),disabled:!e.value.fields.field||!e.value.fields.operator,outlined:"",label:"Update",size:"large"},null,8,["disabled"]))])])],8,["to"]))])}}};export{ue as default};
